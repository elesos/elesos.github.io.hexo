<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="This page is automatically generated from gn help --markdown all. Contents Commands analyze: Analyze which targets are affected by a list of files. args: Display or configure arguments declared by the">
<meta property="og:type" content="article">
<meta property="og:title" content="GN Reference">
<meta property="og:url" content="https://elesos.github.io/2021/07/04/docs/gn/reference/">
<meta property="og:site_name" content="艺搜天下 | 视频技术博客">
<meta property="og:description" content="This page is automatically generated from gn help --markdown all. Contents Commands analyze: Analyze which targets are affected by a list of files. args: Display or configure arguments declared by the">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-07-04T05:30:10.000Z">
<meta property="article:modified_time" content="2021-07-04T08:43:52.027Z">
<meta property="article:author" content="elesos">
<meta property="article:tag" content="gn">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://elesos.github.io/2021/07/04/docs/gn/reference/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>GN Reference | 艺搜天下 | 视频技术博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">艺搜天下 | 视频技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">视频技术博客</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="https://elesos.github.io/2021/07/04/docs/gn/reference/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="elesos">
      <meta itemprop="description" content="视频经验，视频解答，视频教程，视频教学">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="艺搜天下 | 视频技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          GN Reference
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-04 13:30:10 / Modified: 16:43:52" itemprop="dateCreated datePublished" datetime="2021-07-04T13:30:10+08:00">2021-07-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/gn/" itemprop="url" rel="index">
                    <span itemprop="name">gn</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><em>This page is automatically generated from</em> <code>gn help --markdown all</code>.</p>
<h2 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h2><ul>
<li><a href="#commands">Commands</a><ul>
<li><a href="#cmd_analyze">analyze: Analyze which targets are affected by a list of files.</a></li>
<li><a href="#cmd_args">args: Display or configure arguments declared by the build.</a></li>
<li><a href="#cmd_check">check: Check header dependencies.</a></li>
<li><a href="#cmd_clean">clean: Cleans the output directory.</a></li>
<li><a href="#cmd_clean_stale">clean_stale: Cleans the stale output files from the output directory.</a></li>
<li><a href="#cmd_desc">desc: Show lots of insightful information about a target or config.</a></li>
<li><a href="#cmd_format">format: Format .gn files.</a></li>
<li><a href="#cmd_gen">gen: Generate ninja files.</a></li>
<li><a href="#cmd_help">help: Does what you think.</a></li>
<li><a href="#cmd_ls">ls: List matching targets.</a></li>
<li><a href="#cmd_meta">meta: List target metadata collection results.</a></li>
<li><a href="#cmd_outputs">outputs: Which files a source/target make.</a></li>
<li><a href="#cmd_path">path: Find paths between two targets.</a></li>
<li><a href="#cmd_refs">refs: Find stuff referencing a target or file.</a></li>
</ul>
</li>
<li><a href="#targets">Target declarations</a><ul>
<li><a href="#func_action">action: Declare a target that runs a script a single time.</a></li>
<li><a href="#func_action_foreach">action_foreach: Declare a target that runs a script over a set of files.</a></li>
<li><a href="#func_bundle_data">bundle_data: [iOS/macOS] Declare a target without output.</a></li>
<li><a href="#func_copy">copy: Declare a target that copies files.</a></li>
<li><a href="#func_create_bundle">create_bundle: [iOS/macOS] Build an iOS or macOS bundle.</a></li>
<li><a href="#func_executable">executable: Declare an executable target.</a></li>
<li><a href="#func_generated_file">generated_file: Declare a generated_file target.</a></li>
<li><a href="#func_group">group: Declare a named group of targets.</a></li>
<li><a href="#func_loadable_module">loadable_module: Declare a loadable module target.</a></li>
<li><a href="#func_rust_library">rust_library: Declare a Rust library target.</a></li>
<li><a href="#func_rust_proc_macro">rust_proc_macro: Declare a Rust procedural macro target.</a></li>
<li><a href="#func_shared_library">shared_library: Declare a shared library target.</a></li>
<li><a href="#func_source_set">source_set: Declare a source set target.</a></li>
<li><a href="#func_static_library">static_library: Declare a static library target.</a></li>
<li><a href="#func_target">target: Declare an target with the given programmatic type.</a></li>
</ul>
</li>
<li><a href="#functions">Buildfile functions</a><ul>
<li><a href="#func_assert">assert: Assert an expression is true at generation time.</a></li>
<li><a href="#func_config">config: Defines a configuration object.</a></li>
<li><a href="#func_declare_args">declare_args: Declare build arguments.</a></li>
<li><a href="#func_defined">defined: Returns whether an identifier is defined.</a></li>
<li><a href="#func_exec_script">exec_script: Synchronously run a script and return the output.</a></li>
<li><a href="#func_filter_exclude">filter_exclude: Remove values that match a set of patterns.</a></li>
<li><a href="#func_filter_include">filter_include: Remove values that do not match a set of patterns.</a></li>
<li><a href="#func_foreach">foreach: Iterate over a list.</a></li>
<li><a href="#func_forward_variables_from">forward_variables_from: Copies variables from a different scope.</a></li>
<li><a href="#func_get_label_info">get_label_info: Get an attribute from a target’s label.</a></li>
<li><a href="#func_get_path_info">get_path_info: Extract parts of a file or directory name.</a></li>
<li><a href="#func_get_target_outputs">get_target_outputs: [file list] Get the list of outputs from a target.</a></li>
<li><a href="#func_getenv">getenv: Get an environment variable.</a></li>
<li><a href="#func_import">import: Import a file into the current scope.</a></li>
<li><a href="#func_not_needed">not_needed: Mark variables from scope as not needed.</a></li>
<li><a href="#func_pool">pool: Defines a pool object.</a></li>
<li><a href="#func_print">print: Prints to the console.</a></li>
<li><a href="#func_process_file_template">process_file_template: Do template expansion over a list of files.</a></li>
<li><a href="#func_read_file">read_file: Read a file into a variable.</a></li>
<li><a href="#func_rebase_path">rebase_path: Rebase a file or directory to another location.</a></li>
<li><a href="#func_set_default_toolchain">set_default_toolchain: Sets the default toolchain name.</a></li>
<li><a href="#func_set_defaults">set_defaults: Set default values for a target type.</a></li>
<li><a href="#func_split_list">split_list: Splits a list into N different sub-lists.</a></li>
<li><a href="#func_string_join">string_join: Concatenates a list of strings with a separator.</a></li>
<li><a href="#func_string_replace">string_replace: Replaces substring in the given string.</a></li>
<li><a href="#func_string_split">string_split: Split string into a list of strings.</a></li>
<li><a href="#func_template">template: Define a template rule.</a></li>
<li><a href="#func_tool">tool: Specify arguments to a toolchain tool.</a></li>
<li><a href="#func_toolchain">toolchain: Defines a toolchain.</a></li>
<li><a href="#func_write_file">write_file: Write a file to disk.</a></li>
</ul>
</li>
<li><a href="#predefined_variables">Built-in predefined variables</a><ul>
<li><a href="#var_current_cpu">current_cpu: [string] The processor architecture of the current toolchain.</a></li>
<li><a href="#var_current_os">current_os: [string] The operating system of the current toolchain.</a></li>
<li><a href="#var_current_toolchain">current_toolchain: [string] Label of the current toolchain.</a></li>
<li><a href="#var_default_toolchain">default_toolchain: [string] Label of the default toolchain.</a></li>
<li><a href="#var_gn_version">gn_version: [number] The version of gn.</a></li>
<li><a href="#var_host_cpu">host_cpu: [string] The processor architecture that GN is running on.</a></li>
<li><a href="#var_host_os">host_os: [string] The operating system that GN is running on.</a></li>
<li><a href="#var_invoker">invoker: [string] The invoking scope inside a template.</a></li>
<li><a href="#var_python_path">python_path: [string] Absolute path of Python.</a></li>
<li><a href="#var_root_build_dir">root_build_dir: [string] Directory where build commands are run.</a></li>
<li><a href="#var_root_gen_dir">root_gen_dir: [string] Directory for the toolchain’s generated files.</a></li>
<li><a href="#var_root_out_dir">root_out_dir: [string] Root directory for toolchain output files.</a></li>
<li><a href="#var_target_cpu">target_cpu: [string] The desired cpu architecture for the build.</a></li>
<li><a href="#var_target_gen_dir">target_gen_dir: [string] Directory for a target’s generated files.</a></li>
<li><a href="#var_target_name">target_name: [string] The name of the current target.</a></li>
<li><a href="#var_target_os">target_os: [string] The desired operating system for the build.</a></li>
<li><a href="#var_target_out_dir">target_out_dir: [string] Directory for target output files.</a></li>
</ul>
</li>
<li><a href="#target_variables">Variables you set in targets</a><ul>
<li><a href="#var_aliased_deps">aliased_deps: [scope] Set of crate-dependency pairs.</a></li>
<li><a href="#var_all_dependent_configs">all_dependent_configs: [label list] Configs to be forced on dependents.</a></li>
<li><a href="#var_allow_circular_includes_from">allow_circular_includes_from: [label list] Permit includes from deps.</a></li>
<li><a href="#var_arflags">arflags: [string list] Arguments passed to static_library archiver.</a></li>
<li><a href="#var_args">args: [string list] Arguments passed to an action.</a></li>
<li><a href="#var_asmflags">asmflags: [string list] Flags passed to the assembler.</a></li>
<li><a href="#var_assert_no_deps">assert_no_deps: [label pattern list] Ensure no deps on these targets.</a></li>
<li><a href="#var_bridge_header">bridge_header: [string] Path to C/Objective-C compatibility header.</a></li>
<li><a href="#var_bundle_contents_dir">bundle_contents_dir: Expansion of  in create_bundle.</a></li>
<li><a href="#var_bundle_deps_filter">bundle_deps_filter: [label list] A list of labels that are filtered out.</a></li>
<li><a href="#var_bundle_executable_dir">bundle_executable_dir: Expansion of  in create_bundle</a></li>
<li><a href="#var_bundle_resources_dir">bundle_resources_dir: Expansion of  in create_bundle.</a></li>
<li><a href="#var_bundle_root_dir">bundle_root_dir: Expansion of  in create_bundle.</a></li>
<li><a href="#var_cflags">cflags: [string list] Flags passed to all C compiler variants.</a></li>
<li><a href="#var_cflags_c">cflags_c: [string list] Flags passed to the C compiler.</a></li>
<li><a href="#var_cflags_cc">cflags_cc: [string list] Flags passed to the C++ compiler.</a></li>
<li><a href="#var_cflags_objc">cflags_objc: [string list] Flags passed to the Objective C compiler.</a></li>
<li><a href="#var_cflags_objcc">cflags_objcc: [string list] Flags passed to the Objective C++ compiler.</a></li>
<li><a href="#var_check_includes">check_includes: [boolean] Controls whether a target’s files are checked.</a></li>
<li><a href="#var_code_signing_args">code_signing_args: [string list] Arguments passed to code signing script.</a></li>
<li><a href="#var_code_signing_outputs">code_signing_outputs: [file list] Output files for code signing step.</a></li>
<li><a href="#var_code_signing_script">code_signing_script: [file name] Script for code signing.</a></li>
<li><a href="#var_code_signing_sources">code_signing_sources: [file list] Sources for code signing step.</a></li>
<li><a href="#var_complete_static_lib">complete_static_lib: [boolean] Links all deps into a static library.</a></li>
<li><a href="#var_configs">configs: [label list] Configs applying to this target or config.</a></li>
<li><a href="#var_contents">contents: Contents to write to file.</a></li>
<li><a href="#var_crate_name">crate_name: [string] The name for the compiled crate.</a></li>
<li><a href="#var_crate_root">crate_root: [string] The root source file for a binary or library.</a></li>
<li><a href="#var_crate_type">crate_type: [string] The type of linkage to use on a shared_library.</a></li>
<li><a href="#var_data">data: [file list] Runtime data file dependencies.</a></li>
<li><a href="#var_data_deps">data_deps: [label list] Non-linked dependencies.</a></li>
<li><a href="#var_data_keys">data_keys: [string list] Keys from which to collect metadata.</a></li>
<li><a href="#var_defines">defines: [string list] C preprocessor defines.</a></li>
<li><a href="#var_depfile">depfile: [string] File name for input dependencies for actions.</a></li>
<li><a href="#var_deps">deps: [label list] Private linked dependencies.</a></li>
<li><a href="#var_externs">externs: [scope] Set of Rust crate-dependency pairs.</a></li>
<li><a href="#var_framework_dirs">framework_dirs: [directory list] Additional framework search directories.</a></li>
<li><a href="#var_frameworks">frameworks: [name list] Name of frameworks that must be linked.</a></li>
<li><a href="#var_friend">friend: [label pattern list] Allow targets to include private headers.</a></li>
<li><a href="#var_include_dirs">include_dirs: [directory list] Additional include directories.</a></li>
<li><a href="#var_inputs">inputs: [file list] Additional compile-time dependencies.</a></li>
<li><a href="#var_ldflags">ldflags: [string list] Flags passed to the linker.</a></li>
<li><a href="#var_lib_dirs">lib_dirs: [directory list] Additional library directories.</a></li>
<li><a href="#var_libs">libs: [string list] Additional libraries to link.</a></li>
<li><a href="#var_metadata">metadata: [scope] Metadata of this target.</a></li>
<li><a href="#var_module_name">module_name: [string] The name for the compiled module.</a></li>
<li><a href="#var_output_conversion">output_conversion: Data format for generated_file targets.</a></li>
<li><a href="#var_output_dir">output_dir: [directory] Directory to put output file in.</a></li>
<li><a href="#var_output_extension">output_extension: [string] Value to use for the output’s file extension.</a></li>
<li><a href="#var_output_name">output_name: [string] Name for the output file other than the default.</a></li>
<li><a href="#var_output_prefix_override">output_prefix_override: [boolean] Don’t use prefix for output name.</a></li>
<li><a href="#var_outputs">outputs: [file list] Output files for actions and copy targets.</a></li>
<li><a href="#var_partial_info_plist">partial_info_plist: [filename] Path plist from asset catalog compiler.</a></li>
<li><a href="#var_pool">pool: [string] Label of the pool used by the action.</a></li>
<li><a href="#var_precompiled_header">precompiled_header: [string] Header file to precompile.</a></li>
<li><a href="#var_precompiled_header_type">precompiled_header_type: [string] “gcc” or “msvc”.</a></li>
<li><a href="#var_precompiled_source">precompiled_source: [file name] Source file to precompile.</a></li>
<li><a href="#var_product_type">product_type: [string] Product type for Xcode projects.</a></li>
<li><a href="#var_public">public: [file list] Declare public header files for a target.</a></li>
<li><a href="#var_public_configs">public_configs: [label list] Configs applied to dependents.</a></li>
<li><a href="#var_public_deps">public_deps: [label list] Declare public dependencies.</a></li>
<li><a href="#var_rebase">rebase: [boolean] Rebase collected metadata as files.</a></li>
<li><a href="#var_response_file_contents">response_file_contents: [string list] Contents of .rsp file for actions.</a></li>
<li><a href="#var_script">script: [file name] Script file for actions.</a></li>
<li><a href="#var_sources">sources: [file list] Source files for a target.</a></li>
<li><a href="#var_swiftflags">swiftflags: [string list] Flags passed to the swift compiler.</a></li>
<li><a href="#var_testonly">testonly: [boolean] Declares a target must only be used for testing.</a></li>
<li><a href="#var_visibility">visibility: [label list] A list of labels that can depend on a target.</a></li>
<li><a href="#var_walk_keys">walk_keys: [string list] Key(s) for managing the metadata collection walk.</a></li>
<li><a href="#var_weak_frameworks">weak_frameworks: [name list] Name of frameworks that must be weak linked.</a></li>
<li><a href="#var_write_runtime_deps">write_runtime_deps: Writes the target’s runtime_deps to the given path.</a></li>
<li><a href="#var_xcasset_compiler_flags">xcasset_compiler_flags: [string list] Flags passed to xcassets compiler</a></li>
<li><a href="#var_xcode_extra_attributes">xcode_extra_attributes: [scope] Extra attributes for Xcode projects.</a></li>
<li><a href="#var_xcode_test_application_name">xcode_test_application_name: [string] Name for Xcode test target.</a></li>
</ul>
</li>
<li><a href="#other">Other help topics</a><ul>
<li>all: Print all the help at once</li>
<li><a href="#buildargs">buildargs: How build arguments work.</a></li>
<li><a href="#dotfile">dotfile: Info about the toplevel .gn file.</a></li>
<li><a href="#execution">execution: Build graph and execution overview.</a></li>
<li><a href="#grammar">grammar: Language and grammar for GN build files.</a></li>
<li><a href="#io_conversion">input_conversion: Processing input from exec_script and read_file.</a></li>
<li><a href="#file_pattern">file_pattern: Matching more than one file.</a></li>
<li><a href="#label_pattern">label_pattern: Matching more than one label.</a></li>
<li><a href="#labels">labels: About labels.</a></li>
<li><a href="#metadata_collection">metadata_collection: About metadata and its collection.</a></li>
<li><a href="#ninja_rules">ninja_rules: How Ninja build rules are named.</a></li>
<li><a href="#nogncheck">nogncheck: Annotating includes for checking.</a></li>
<li><a href="#io_conversion">output_conversion: Specifies how to transform a value to output.</a></li>
<li><a href="#runtime_deps">runtime_deps: How runtime dependency computation works.</a></li>
<li><a href="#source_expansion">source_expansion: Map sources to outputs for scripts.</a></li>
<li><a href="#switch_list">switches: Show available command-line switches.</a></li>
</ul>
</li>
</ul>
<h2 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a><a name="commands"></a>Commands</h2><h3 id="gn-analyze-lt-out-dir-gt-lt-input-path-gt-lt-output-path-gt"><a href="#gn-analyze-lt-out-dir-gt-lt-input-path-gt-lt-output-path-gt" class="headerlink" title="gn analyze &lt;out_dir&gt; &lt;input_path&gt; &lt;output_path&gt;"></a><a name="cmd_analyze"></a><strong>gn analyze &lt;out_dir&gt; &lt;input_path&gt; &lt;output_path&gt;</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">Analyze which targets are affected by a list of files.</span><br><span class="line"></span><br><span class="line">This command takes three arguments:</span><br><span class="line"></span><br><span class="line">out_dir is the path to the build directory.</span><br><span class="line"></span><br><span class="line">input_path is a path to a file containing a JSON object with three fields:</span><br><span class="line"></span><br><span class="line"> - &quot;files&quot;: A list of the filenames to check.</span><br><span class="line"></span><br><span class="line"> - &quot;test_targets&quot;: A list of the labels for targets that are needed to run</span><br><span class="line">   the tests we wish to run.</span><br><span class="line"></span><br><span class="line"> - &quot;additional_compile_targets&quot; (optional): A list of the labels for targets</span><br><span class="line">   that we wish to rebuild, but aren&#39;t necessarily needed for testing. The</span><br><span class="line">   important difference between this field and &quot;test_targets&quot; is that if an</span><br><span class="line">   item in the additional_compile_targets list refers to a group, then any</span><br><span class="line">   dependencies of that group will be returned if they are out of date, but</span><br><span class="line">   the group itself does not need to be. If the dependencies themselves are</span><br><span class="line">   groups, the same filtering is repeated. This filtering can be used to</span><br><span class="line">   avoid rebuilding dependencies of a group that are unaffected by the input</span><br><span class="line">   files. The list may also contain the string &quot;all&quot; to refer to a</span><br><span class="line">   pseudo-group that contains every root target in the build graph.</span><br><span class="line"></span><br><span class="line">   This filtering behavior is also known as &quot;pruning&quot; the list of compile</span><br><span class="line">   targets.</span><br><span class="line"></span><br><span class="line">   If &quot;additional_compile_targets&quot; is absent, it defaults to the empty list.</span><br><span class="line"></span><br><span class="line">If input_path is -, input is read from stdin.</span><br><span class="line"></span><br><span class="line">output_path is a path indicating where the results of the command are to be</span><br><span class="line">written. The results will be a file containing a JSON object with one or more</span><br><span class="line">of following fields:</span><br><span class="line"></span><br><span class="line"> - &quot;compile_targets&quot;: A list of the labels derived from the input</span><br><span class="line">   compile_targets list that are affected by the input files. Due to the way</span><br><span class="line">   the filtering works for compile targets as described above, this list may</span><br><span class="line">   contain targets that do not appear in the input list.</span><br><span class="line"></span><br><span class="line"> - &quot;test_targets&quot;: A list of the labels from the input test_targets list that</span><br><span class="line">   are affected by the input files. This list will be a proper subset of the</span><br><span class="line">   input list.</span><br><span class="line"></span><br><span class="line"> - &quot;invalid_targets&quot;: A list of any names from the input that do not exist in</span><br><span class="line">   the build graph. If this list is non-empty, the &quot;error&quot; field will also be</span><br><span class="line">   set to &quot;Invalid targets&quot;.</span><br><span class="line"></span><br><span class="line"> - &quot;status&quot;: A string containing one of three values:</span><br><span class="line"></span><br><span class="line">     - &quot;Found dependency&quot;</span><br><span class="line">     - &quot;No dependency&quot;</span><br><span class="line">     - &quot;Found dependency (all)&quot;</span><br><span class="line"></span><br><span class="line">   In the first case, the lists returned in compile_targets and test_targets</span><br><span class="line">   should be passed to ninja to build. In the second case, nothing was</span><br><span class="line">   affected and no build is necessary. In the third case, GN could not</span><br><span class="line">   determine the correct answer and returned the input as the output in order</span><br><span class="line">   to be safe.</span><br><span class="line"></span><br><span class="line"> - &quot;error&quot;: This will only be present if an error occurred, and will contain</span><br><span class="line">   a string describing the error. This includes cases where the input file is</span><br><span class="line">   not in the right format, or contains invalid targets.</span><br><span class="line"></span><br><span class="line">If output_path is -, output is written to stdout.</span><br><span class="line"></span><br><span class="line">The command returns 1 if it is unable to read the input file or write the</span><br><span class="line">output file, or if there is something wrong with the build such that gen</span><br><span class="line">would also fail, and 0 otherwise. In particular, it returns 0 even if the</span><br><span class="line">&quot;error&quot; key is non-empty and a non-fatal error occurred. In other words, it</span><br><span class="line">tries really hard to always write something to the output JSON and convey</span><br><span class="line">errors that way rather than via return codes.</span><br></pre></td></tr></table></figure>
<h3 id="gn-args-command-line-tool"><a href="#gn-args-command-line-tool" class="headerlink" title="gn args: (command-line tool)"></a><a name="cmd_args"></a><strong>gn args</strong>: (command-line tool)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Display or configure arguments declared by the build.</span><br><span class="line"></span><br><span class="line">  gn args &lt;out_dir&gt; [--list] [--short] [--args] [--overrides-only]</span><br><span class="line"></span><br><span class="line">See also &quot;gn help buildargs&quot; for a more high-level overview of how</span><br><span class="line">build arguments work.</span><br></pre></td></tr></table></figure>

<h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a><strong>Usage</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">gn args &lt;out_dir&gt;</span><br><span class="line">    Open the arguments for the given build directory in an editor. If the</span><br><span class="line">    given build directory doesn&#39;t exist, it will be created and an empty args</span><br><span class="line">    file will be opened in the editor. You would type something like this</span><br><span class="line">    into that file:</span><br><span class="line">        enable_doom_melon&#x3D;false</span><br><span class="line">        os&#x3D;&quot;android&quot;</span><br><span class="line"></span><br><span class="line">    To find your editor on Posix, GN will search the environment variables in</span><br><span class="line">    order: GN_EDITOR, VISUAL, and EDITOR. On Windows GN will open the command</span><br><span class="line">    associated with .txt files.</span><br><span class="line"></span><br><span class="line">    Note: you can edit the build args manually by editing the file &quot;args.gn&quot;</span><br><span class="line">    in the build directory and then running &quot;gn gen &lt;out_dir&gt;&quot;.</span><br><span class="line"></span><br><span class="line">gn args &lt;out_dir&gt; --list[&#x3D;&lt;exact_arg&gt;] [--short] [--overrides-only] [--json]</span><br><span class="line">    Lists all build arguments available in the current configuration, or, if</span><br><span class="line">    an exact_arg is specified for the list flag, just that one build</span><br><span class="line">    argument.</span><br><span class="line"></span><br><span class="line">    The output will list the declaration location, current value for the</span><br><span class="line">    build, default value (if different than the current value), and comment</span><br><span class="line">    preceding the declaration.</span><br><span class="line"></span><br><span class="line">    If --short is specified, only the names and current values will be</span><br><span class="line">    printed.</span><br><span class="line"></span><br><span class="line">    If --overrides-only is specified, only the names and current values of</span><br><span class="line">    arguments that have been overridden (i.e. non-default arguments) will</span><br><span class="line">    be printed. Overrides come from the &lt;out_dir&gt;&#x2F;args.gn file and &#x2F;&#x2F;.gn</span><br><span class="line"></span><br><span class="line">    If --json is specified, the output will be emitted in json format.</span><br><span class="line">    JSON schema for output:</span><br><span class="line">    [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;name&quot;: variable_name,</span><br><span class="line">        &quot;current&quot;: &#123;</span><br><span class="line">          &quot;value&quot;: overridden_value,</span><br><span class="line">          &quot;file&quot;: file_name,</span><br><span class="line">          &quot;line&quot;: line_no</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;default&quot;: &#123;</span><br><span class="line">          &quot;value&quot;: default_value,</span><br><span class="line">          &quot;file&quot;: file_name,</span><br><span class="line">          &quot;line&quot;: line_no</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;comment&quot;: comment_string</span><br><span class="line">      &#125;,</span><br><span class="line">      ...</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">gn args out&#x2F;Debug</span><br><span class="line">  Opens an editor with the args for out&#x2F;Debug.</span><br><span class="line"></span><br><span class="line">gn args out&#x2F;Debug --list --short</span><br><span class="line">  Prints all arguments with their default values for the out&#x2F;Debug</span><br><span class="line">  build.</span><br><span class="line"></span><br><span class="line">gn args out&#x2F;Debug --list --short --overrides-only</span><br><span class="line">  Prints overridden arguments for the out&#x2F;Debug build.</span><br><span class="line"></span><br><span class="line">gn args out&#x2F;Debug --list&#x3D;target_cpu</span><br><span class="line">  Prints information about the &quot;target_cpu&quot; argument for the &quot;</span><br><span class="line"> &quot;out&#x2F;Debug</span><br><span class="line">  build.</span><br><span class="line"></span><br><span class="line">gn args --list --args&#x3D;&quot;os&#x3D;\&quot;android\&quot; enable_doom_melon&#x3D;true&quot;</span><br><span class="line">  Prints all arguments with the default values for a build with the</span><br><span class="line">  given arguments set (which may affect the values of other</span><br><span class="line">  arguments).</span><br></pre></td></tr></table></figure>
<h3 id="gn-check-lt-out-dir-gt-lt-label-pattern-gt-force-check-generated"><a href="#gn-check-lt-out-dir-gt-lt-label-pattern-gt-force-check-generated" class="headerlink" title="gn check &lt;out_dir&gt; [&lt;label_pattern&gt;] [--force] [--check-generated]"></a><a name="cmd_check"></a><strong>gn check &lt;out_dir&gt; [&lt;label_pattern&gt;] [--force] [--check-generated]</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GN&#39;s include header checker validates that the includes for C-like source</span><br><span class="line">files match the build dependency graph.</span><br><span class="line"></span><br><span class="line">&quot;gn check&quot; is the same thing as &quot;gn gen&quot; with the &quot;--check&quot; flag except that</span><br><span class="line">this command does not write out any build files. It&#39;s intended to be an easy</span><br><span class="line">way to manually trigger include file checking.</span><br><span class="line"></span><br><span class="line">The &lt;label_pattern&gt; can take exact labels or patterns that match more than</span><br><span class="line">one (although not general regular expressions). If specified, only those</span><br><span class="line">matching targets will be checked. See &quot;gn help label_pattern&quot; for details.</span><br></pre></td></tr></table></figure>

<h4 id="Command-specific-switches"><a href="#Command-specific-switches" class="headerlink" title="Command-specific switches"></a><strong>Command-specific switches</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">--check-generated</span><br><span class="line">    Generated files are normally not checked since they do not exist</span><br><span class="line">    until after a build. With this flag, those generated files that</span><br><span class="line">    can be found on disk are also checked.</span><br><span class="line"></span><br><span class="line">--check-system</span><br><span class="line">   Check system style includes (using &lt;angle brackets&gt;) in addition to</span><br><span class="line">   &quot;double quote&quot; includes.</span><br><span class="line"></span><br><span class="line">--default-toolchain</span><br><span class="line">    Normally wildcard targets are matched in all toolchains. This</span><br><span class="line">    switch makes wildcard labels with no explicit toolchain reference</span><br><span class="line">    only match targets in the default toolchain.</span><br><span class="line"></span><br><span class="line">    Non-wildcard inputs with no explicit toolchain specification will</span><br><span class="line">    always match only a target in the default toolchain if one exists.</span><br><span class="line"></span><br><span class="line">--force</span><br><span class="line">    Ignores specifications of &quot;check_includes &#x3D; false&quot; and checks all</span><br><span class="line">    target&#39;s files that match the target label.</span><br></pre></td></tr></table></figure>

<h4 id="What-gets-checked"><a href="#What-gets-checked" class="headerlink" title="What gets checked"></a><strong>What gets checked</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">The .gn file may specify a list of targets to be checked in the list</span><br><span class="line">check_targets (see &quot;gn help dotfile&quot;). Alternatively, the .gn file may</span><br><span class="line">specify a list of targets not to be checked in no_check_targets. If a label</span><br><span class="line">pattern is specified on the command line, neither check_targets or</span><br><span class="line">no_check_targets is used.</span><br><span class="line"></span><br><span class="line">Targets can opt-out from checking with &quot;check_includes &#x3D; false&quot; (see</span><br><span class="line">&quot;gn help check_includes&quot;).</span><br><span class="line"></span><br><span class="line">For targets being checked:</span><br><span class="line"></span><br><span class="line">  - GN opens all C-like source files in the targets to be checked and scans</span><br><span class="line">    the top for includes.</span><br><span class="line"></span><br><span class="line">  - Generated files (that might not exist yet) are ignored unless</span><br><span class="line">    the --check-generated flag is provided.</span><br><span class="line"></span><br><span class="line">  - Includes with a &quot;nogncheck&quot; annotation are skipped (see</span><br><span class="line">    &quot;gn help nogncheck&quot;).</span><br><span class="line"></span><br><span class="line">  - Includes using &quot;quotes&quot; are always checked.</span><br><span class="line">      If system style checking is enabled, includes using &lt;angle brackets&gt;</span><br><span class="line">      are also checked.</span><br><span class="line"></span><br><span class="line">  - Include paths are assumed to be relative to any of the &quot;include_dirs&quot; for</span><br><span class="line">    the target (including the implicit current dir).</span><br><span class="line"></span><br><span class="line">  - GN does not run the preprocessor so will not understand conditional</span><br><span class="line">    includes.</span><br><span class="line"></span><br><span class="line">  - Only includes matching known files in the build are checked: includes</span><br><span class="line">    matching unknown paths are ignored.</span><br><span class="line"></span><br><span class="line">For an include to be valid:</span><br><span class="line"></span><br><span class="line">  - The included file must be in the current target, or there must be a path</span><br><span class="line">    following only public dependencies to a target with the file in it</span><br><span class="line">    (&quot;gn path&quot; is a good way to diagnose problems).</span><br><span class="line"></span><br><span class="line">  - There can be multiple targets with an included file: only one needs to be</span><br><span class="line">    valid for the include to be allowed.</span><br><span class="line"></span><br><span class="line">  - If there are only &quot;sources&quot; in a target, all are considered to be public</span><br><span class="line">    and can be included by other targets with a valid public dependency path.</span><br><span class="line"></span><br><span class="line">  - If a target lists files as &quot;public&quot;, only those files are able to be</span><br><span class="line">    included by other targets. Anything in the sources will be considered</span><br><span class="line">    private and will not be includable regardless of dependency paths.</span><br><span class="line"></span><br><span class="line">  - Outputs from actions are treated like public sources on that target.</span><br><span class="line"></span><br><span class="line">  - A target can include headers from a target that depends on it if the</span><br><span class="line">    other target is annotated accordingly. See &quot;gn help</span><br><span class="line">    allow_circular_includes_from&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Advice-on-fixing-problems"><a href="#Advice-on-fixing-problems" class="headerlink" title="Advice on fixing problems"></a><strong>Advice on fixing problems</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">If you have a third party project that is difficult to fix or doesn&#39;t care</span><br><span class="line">about include checks it&#39;s generally best to exclude that target from checking</span><br><span class="line">altogether via &quot;check_includes &#x3D; false&quot;.</span><br><span class="line"></span><br><span class="line">If you have conditional includes, make sure the build conditions and the</span><br><span class="line">preprocessor conditions match, and annotate the line with &quot;nogncheck&quot; (see</span><br><span class="line">&quot;gn help nogncheck&quot; for an example).</span><br><span class="line"></span><br><span class="line">If two targets are hopelessly intertwined, use the</span><br><span class="line">&quot;allow_circular_includes_from&quot; annotation. Ideally each should have identical</span><br><span class="line">dependencies so configs inherited from those dependencies are consistent (see</span><br><span class="line">&quot;gn help allow_circular_includes_from&quot;).</span><br><span class="line"></span><br><span class="line">If you have a standalone header file or files that need to be shared between</span><br><span class="line">a few targets, you can consider making a source_set listing only those</span><br><span class="line">headers as public sources. With only header files, the source set will be a</span><br><span class="line">no-op from a build perspective, but will give a central place to refer to</span><br><span class="line">those headers. That source set&#39;s files will still need to pass &quot;gn check&quot; in</span><br><span class="line">isolation.</span><br><span class="line"></span><br><span class="line">In rare cases it makes sense to list a header in more than one target if it</span><br><span class="line">could be considered conceptually a member of both.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gn check out&#x2F;Debug</span><br><span class="line">    Check everything.</span><br><span class="line"></span><br><span class="line">gn check out&#x2F;Default &#x2F;&#x2F;foo:bar</span><br><span class="line">    Check only the files in the &#x2F;&#x2F;foo:bar target.</span><br><span class="line"></span><br><span class="line">gn check out&#x2F;Default &quot;&#x2F;&#x2F;foo&#x2F;*</span><br><span class="line">    Check only the files in targets in the &#x2F;&#x2F;foo directory tree.</span><br></pre></td></tr></table></figure>
<h3 id="gn-clean-lt-out-dir-gt-…"><a href="#gn-clean-lt-out-dir-gt-…" class="headerlink" title="gn clean &lt;out_dir&gt;…"></a><a name="cmd_clean"></a><strong>gn clean &lt;out_dir&gt;…</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Deletes the contents of the output directory except for args.gn and</span><br><span class="line">creates a Ninja build environment sufficient to regenerate the build.</span><br></pre></td></tr></table></figure>
<h3 id="gn-clean-stale-ninja-executable-…-lt-out-dir-gt-…"><a href="#gn-clean-stale-ninja-executable-…-lt-out-dir-gt-…" class="headerlink" title="gn clean_stale [--ninja-executable=…] &lt;out_dir&gt;…"></a><a name="cmd_clean_stale"></a><strong>gn clean_stale [--ninja-executable=…] &lt;out_dir&gt;…</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Removes the no longer needed output files from the build directory and prunes</span><br><span class="line">their records from the ninja build log and dependency database. These are</span><br><span class="line">output files that were generated from previous builds, but the current build</span><br><span class="line">graph no longer references them.</span><br><span class="line"></span><br><span class="line">This command requires a ninja executable of at least version 1.10.0. The</span><br><span class="line">executable must be provided by the --ninja-executable switch.</span><br></pre></td></tr></table></figure>

<h4 id="Options"><a href="#Options" class="headerlink" title="Options"></a><strong>Options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--ninja-executable&#x3D;&lt;string&gt;</span><br><span class="line">    Can be used to specify the ninja executable to use.</span><br></pre></td></tr></table></figure>
<h3 id="gn-desc"><a href="#gn-desc" class="headerlink" title="gn desc"></a><a name="cmd_desc"></a><strong>gn desc</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gn desc &lt;out_dir&gt; &lt;label or pattern&gt; [&lt;what to show&gt;] [--blame]</span><br><span class="line">        [--format&#x3D;json]</span><br><span class="line"></span><br><span class="line">Displays information about a given target or config. The build parameters</span><br><span class="line">will be taken for the build in the given &lt;out_dir&gt;.</span><br><span class="line"></span><br><span class="line">The &lt;label or pattern&gt; can be a target label, a config label, or a label</span><br><span class="line">pattern (see &quot;gn help label_pattern&quot;). A label pattern will only match</span><br><span class="line">targets.</span><br></pre></td></tr></table></figure>

<h4 id="Possibilities-for-lt-what-to-show-gt"><a href="#Possibilities-for-lt-what-to-show-gt" class="headerlink" title="Possibilities for &lt;what to show&gt;"></a><strong>Possibilities for &lt;what to show&gt;</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">(If unspecified an overall summary will be displayed.)</span><br><span class="line"></span><br><span class="line">all_dependent_configs</span><br><span class="line">allow_circular_includes_from</span><br><span class="line">arflags [--blame]</span><br><span class="line">args</span><br><span class="line">cflags [--blame]</span><br><span class="line">cflags_c [--blame]</span><br><span class="line">cflags_cc [--blame]</span><br><span class="line">check_includes</span><br><span class="line">configs [--tree] (see below)</span><br><span class="line">data_keys</span><br><span class="line">defines [--blame]</span><br><span class="line">depfile</span><br><span class="line">deps [--all] [--tree] (see below)</span><br><span class="line">framework_dirs</span><br><span class="line">frameworks</span><br><span class="line">include_dirs [--blame]</span><br><span class="line">inputs</span><br><span class="line">ldflags [--blame]</span><br><span class="line">lib_dirs</span><br><span class="line">libs</span><br><span class="line">metadata</span><br><span class="line">output_conversion</span><br><span class="line">outputs</span><br><span class="line">public_configs</span><br><span class="line">public</span><br><span class="line">rebase</span><br><span class="line">script</span><br><span class="line">sources</span><br><span class="line">testonly</span><br><span class="line">visibility</span><br><span class="line">walk_keys</span><br><span class="line">weak_frameworks</span><br><span class="line"></span><br><span class="line">runtime_deps</span><br><span class="line">    Compute all runtime deps for the given target. This is a computed list</span><br><span class="line">    and does not correspond to any GN variable, unlike most other values</span><br><span class="line">    here.</span><br><span class="line"></span><br><span class="line">    The output is a list of file names relative to the build directory. See</span><br><span class="line">    &quot;gn help runtime_deps&quot; for how this is computed. This also works with</span><br><span class="line">    &quot;--blame&quot; to see the source of the dependency.</span><br></pre></td></tr></table></figure>

<h4 id="Shared-flags"><a href="#Shared-flags" class="headerlink" title="Shared flags"></a><strong>Shared flags</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--default-toolchain</span><br><span class="line">    Normally wildcard targets are matched in all toolchains. This</span><br><span class="line">    switch makes wildcard labels with no explicit toolchain reference</span><br><span class="line">    only match targets in the default toolchain.</span><br><span class="line"></span><br><span class="line">    Non-wildcard inputs with no explicit toolchain specification will</span><br><span class="line">    always match only a target in the default toolchain if one exists.</span><br><span class="line"></span><br><span class="line">--format&#x3D;json</span><br><span class="line">    Format the output as JSON instead of text.</span><br></pre></td></tr></table></figure>

<h4 id="Target-flags"><a href="#Target-flags" class="headerlink" title="Target flags"></a><strong>Target flags</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--blame</span><br><span class="line">    Used with any value specified on a config, this will name the config that</span><br><span class="line">    causes that target to get the flag. This doesn&#39;t currently work for libs,</span><br><span class="line">    lib_dirs, frameworks, weak_frameworks and framework_dirs because those are</span><br><span class="line">    inherited and are more complicated to figure out the blame (patches</span><br><span class="line">    welcome).</span><br></pre></td></tr></table></figure>

<h4 id="Configs"><a href="#Configs" class="headerlink" title="Configs"></a><strong>Configs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The &quot;configs&quot; section will list all configs that apply. For targets this will</span><br><span class="line">include configs specified in the &quot;configs&quot; variable of the target, and also</span><br><span class="line">configs pushed onto this target via public or &quot;all dependent&quot; configs.</span><br><span class="line"></span><br><span class="line">Configs can have child configs. Specifying --tree will show the hierarchy.</span><br></pre></td></tr></table></figure>

<h4 id="Printing-outputs"><a href="#Printing-outputs" class="headerlink" title="Printing outputs"></a><strong>Printing outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The &quot;outputs&quot; section will list all outputs that apply, including the outputs</span><br><span class="line">computed from the tool definition (eg for &quot;executable&quot;, &quot;static_library&quot;, ...</span><br><span class="line">targets).</span><br></pre></td></tr></table></figure>

<h4 id="Printing-deps"><a href="#Printing-deps" class="headerlink" title="Printing deps"></a><strong>Printing deps</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Deps will include all public, private, and data deps (TODO this could be</span><br><span class="line">clarified and enhanced) sorted in order applying. The following may be used:</span><br><span class="line"></span><br><span class="line">--all</span><br><span class="line">    Collects all recursive dependencies and prints a sorted flat list. Also</span><br><span class="line">    usable with --tree (see below).</span><br><span class="line"></span><br><span class="line">--as&#x3D;(buildfile|label|output)</span><br><span class="line">    How to print targets.</span><br><span class="line"></span><br><span class="line">    buildfile</span><br><span class="line">        Prints the build files where the given target was declared as</span><br><span class="line">        file names.</span><br><span class="line">    label  (default)</span><br><span class="line">        Prints the label of the target.</span><br><span class="line">    output</span><br><span class="line">        Prints the first output file for the target relative to the</span><br><span class="line">        root build directory.</span><br><span class="line"></span><br><span class="line">--testonly&#x3D;(true|false)</span><br><span class="line">    Restrict outputs to targets with the testonly flag set</span><br><span class="line">    accordingly. When unspecified, the target&#39;s testonly flags are</span><br><span class="line">    ignored.</span><br><span class="line"></span><br><span class="line">--tree</span><br><span class="line">    Print a dependency tree. By default, duplicates will be elided with &quot;...&quot;</span><br><span class="line">    but when --all and -tree are used together, no eliding will be performed.</span><br><span class="line"></span><br><span class="line">    The &quot;deps&quot;, &quot;public_deps&quot;, and &quot;data_deps&quot; will all be included in the</span><br><span class="line">    tree.</span><br><span class="line"></span><br><span class="line">    Tree output can not be used with the filtering or output flags: --as,</span><br><span class="line">    --type, --testonly.</span><br><span class="line"></span><br><span class="line">--type&#x3D;(action|copy|executable|group|loadable_module|shared_library|</span><br><span class="line">        source_set|static_library)</span><br><span class="line">    Restrict outputs to targets matching the given type. If</span><br><span class="line">    unspecified, no filtering will be performed.</span><br></pre></td></tr></table></figure>

<h4 id="Note"><a href="#Note" class="headerlink" title="Note"></a><strong>Note</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This command will show the full name of directories and source files, but</span><br><span class="line">when directories and source paths are written to the build file, they will be</span><br><span class="line">adjusted to be relative to the build directory. So the values for paths</span><br><span class="line">displayed by this command won&#39;t match (but should mean the same thing).</span><br></pre></td></tr></table></figure>

<h4 id="Examples-2"><a href="#Examples-2" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gn desc out&#x2F;Debug &#x2F;&#x2F;base:base</span><br><span class="line">    Summarizes the given target.</span><br><span class="line"></span><br><span class="line">gn desc out&#x2F;Foo :base_unittests deps --tree</span><br><span class="line">    Shows a dependency tree of the &quot;base_unittests&quot; project in</span><br><span class="line">    the current directory.</span><br><span class="line"></span><br><span class="line">gn desc out&#x2F;Debug &#x2F;&#x2F;base defines --blame</span><br><span class="line">    Shows defines set for the &#x2F;&#x2F;base:base target, annotated by where</span><br><span class="line">    each one was set from.</span><br></pre></td></tr></table></figure>
<h3 id="gn-format-dump-tree-stdin-lt-list-of-build-files…-gt"><a href="#gn-format-dump-tree-stdin-lt-list-of-build-files…-gt" class="headerlink" title="gn format [--dump-tree] (--stdin | &lt;list of build_files…&gt;)"></a><a name="cmd_format"></a><strong>gn format [--dump-tree] (--stdin | &lt;list of build_files…&gt;)</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Formats .gn file to a standard format.</span><br><span class="line"></span><br><span class="line">The contents of some lists (&#39;sources&#39;, &#39;deps&#39;, etc.) will be sorted to a</span><br><span class="line">canonical order. To suppress this, you can add a comment of the form &quot;#</span><br><span class="line">NOSORT&quot; immediately preceding the assignment. e.g.</span><br><span class="line"></span><br><span class="line"># NOSORT</span><br><span class="line">sources &#x3D; [</span><br><span class="line">  &quot;z.cc&quot;,</span><br><span class="line">  &quot;a.cc&quot;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">--dry-run</span><br><span class="line">    Prints the list of files that would be reformatted but does not write</span><br><span class="line">    anything to disk. This is useful for presubmit&#x2F;lint-type checks.</span><br><span class="line">    - Exit code 0: successful format, matches on disk.</span><br><span class="line">    - Exit code 1: general failure (parse error, etc.)</span><br><span class="line">    - Exit code 2: successful format, but differs from on disk.</span><br><span class="line"></span><br><span class="line">--dump-tree[&#x3D;( text | json )]</span><br><span class="line">    Dumps the parse tree to stdout and does not update the file or print</span><br><span class="line">    formatted output. If no format is specified, text format will be used.</span><br><span class="line"></span><br><span class="line">--stdin</span><br><span class="line">    Read input from stdin and write to stdout rather than update a file</span><br><span class="line">    in-place.</span><br><span class="line"></span><br><span class="line">--read-tree&#x3D;json</span><br><span class="line">    Reads an AST from stdin in the format output by --dump-tree&#x3D;json and</span><br><span class="line">    uses that as the parse tree. (The only read-tree format currently</span><br><span class="line">    supported is json.) The given .gn file will be overwritten. This can be</span><br><span class="line">    used to programmatically transform .gn files.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-3"><a href="#Examples-3" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gn format &#x2F;&#x2F;some&#x2F;BUILD.gn &#x2F;&#x2F;some&#x2F;other&#x2F;BUILD.gn &#x2F;&#x2F;and&#x2F;another&#x2F;BUILD.gn</span><br><span class="line">gn format some\\BUILD.gn</span><br><span class="line">gn format &#x2F;abspath&#x2F;some&#x2F;BUILD.gn</span><br><span class="line">gn format --stdin</span><br><span class="line">gn format --read-tree&#x3D;json &#x2F;&#x2F;rewritten&#x2F;BUILD.gn</span><br></pre></td></tr></table></figure>
<h3 id="gn-gen-check-lt-ide-options-gt-lt-out-dir-gt"><a href="#gn-gen-check-lt-ide-options-gt-lt-out-dir-gt" class="headerlink" title="gn gen [--check] [&lt;ide options&gt;] &lt;out_dir&gt;"></a><a name="cmd_gen"></a><strong>gn gen [--check] [&lt;ide options&gt;] &lt;out_dir&gt;</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Generates ninja files from the current tree and puts them in the given output</span><br><span class="line">directory.</span><br><span class="line"></span><br><span class="line">The output directory can be a source-repo-absolute path name such as:</span><br><span class="line">    &#x2F;&#x2F;out&#x2F;foo</span><br><span class="line">Or it can be a directory relative to the current directory such as:</span><br><span class="line">    out&#x2F;foo</span><br><span class="line"></span><br><span class="line">&quot;gn gen --check&quot; is the same as running &quot;gn check&quot;. &quot;gn gen --check&#x3D;system&quot; is</span><br><span class="line">the same as running &quot;gn check --check-system&quot;.  See &quot;gn help check&quot; for</span><br><span class="line">documentation on that mode.</span><br><span class="line"></span><br><span class="line">See &quot;gn help switches&quot; for the common command-line switches.</span><br></pre></td></tr></table></figure>

<h4 id="General-options"><a href="#General-options" class="headerlink" title="General options"></a><strong>General options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--ninja-executable&#x3D;&lt;string&gt;</span><br><span class="line">    Can be used to specify the ninja executable to use. This executable will</span><br><span class="line">    be used as an IDE option to indicate which ninja to use for building. This</span><br><span class="line">    executable will also be used as part of the gen process for triggering a</span><br><span class="line">    restat on generated ninja files and for use with --clean-stale.</span><br><span class="line"></span><br><span class="line">--clean-stale</span><br><span class="line">    This option will cause no longer needed output files to be removed from</span><br><span class="line">    the build directory, and their records pruned from the ninja build log and</span><br><span class="line">    dependency database after the ninja build graph has been generated. This</span><br><span class="line">    option requires a ninja executable of at least version 1.10.0. It can be</span><br><span class="line">    provided by the --ninja-executable switch. Also see &quot;gn help clean_stale&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="IDE-options"><a href="#IDE-options" class="headerlink" title="IDE options"></a><strong>IDE options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GN optionally generates files for IDE. Files won&#39;t be overwritten if their</span><br><span class="line">contents don&#39;t change. Possibilities for &lt;ide options&gt;</span><br><span class="line"></span><br><span class="line">--ide&#x3D;&lt;ide_name&gt;</span><br><span class="line">    Generate files for an IDE. Currently supported values:</span><br><span class="line">    &quot;eclipse&quot; - Eclipse CDT settings file.</span><br><span class="line">    &quot;vs&quot; - Visual Studio project&#x2F;solution files.</span><br><span class="line">           (default Visual Studio version: 2019)</span><br><span class="line">    &quot;vs2013&quot; - Visual Studio 2013 project&#x2F;solution files.</span><br><span class="line">    &quot;vs2015&quot; - Visual Studio 2015 project&#x2F;solution files.</span><br><span class="line">    &quot;vs2017&quot; - Visual Studio 2017 project&#x2F;solution files.</span><br><span class="line">    &quot;vs2019&quot; - Visual Studio 2019 project&#x2F;solution files.</span><br><span class="line">    &quot;xcode&quot; - Xcode workspace&#x2F;solution files.</span><br><span class="line">    &quot;qtcreator&quot; - QtCreator project files.</span><br><span class="line">    &quot;json&quot; - JSON file containing target information</span><br><span class="line"></span><br><span class="line">--filters&#x3D;&lt;path_prefixes&gt;</span><br><span class="line">    Semicolon-separated list of label patterns used to limit the set of</span><br><span class="line">    generated projects (see &quot;gn help label_pattern&quot;). Only matching targets</span><br><span class="line">    and their dependencies will be included in the solution. Only used for</span><br><span class="line">    Visual Studio, Xcode and JSON.</span><br></pre></td></tr></table></figure>

<h4 id="Visual-Studio-Flags"><a href="#Visual-Studio-Flags" class="headerlink" title="Visual Studio Flags"></a><strong>Visual Studio Flags</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">--sln&#x3D;&lt;file_name&gt;</span><br><span class="line">    Override default sln file name (&quot;all&quot;). Solution file is written to the</span><br><span class="line">    root build directory.</span><br><span class="line"></span><br><span class="line">--no-deps</span><br><span class="line">    Don&#39;t include targets dependencies to the solution. Changes the way how</span><br><span class="line">    --filters option works. Only directly matching targets are included.</span><br><span class="line"></span><br><span class="line">--winsdk&#x3D;&lt;sdk_version&gt;</span><br><span class="line">    Use the specified Windows 10 SDK version to generate project files.</span><br><span class="line">    As an example, &quot;10.0.15063.0&quot; can be specified to use Creators Update SDK</span><br><span class="line">    instead of the default one.</span><br><span class="line"></span><br><span class="line">--ninja-extra-args&#x3D;&lt;string&gt;</span><br><span class="line">    This string is passed without any quoting to the ninja invocation</span><br><span class="line">    command-line. Can be used to configure ninja flags, like &quot;-j&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Xcode-Flags"><a href="#Xcode-Flags" class="headerlink" title="Xcode Flags"></a><strong>Xcode Flags</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">--xcode-project&#x3D;&lt;file_name&gt;</span><br><span class="line">    Override default Xcode project file name (&quot;all&quot;). The project file is</span><br><span class="line">    written to the root build directory.</span><br><span class="line"></span><br><span class="line">--xcode-build-system&#x3D;&lt;value&gt;</span><br><span class="line">    Configure the build system to use for the Xcode project. Supported</span><br><span class="line">    values are (default to &quot;legacy&quot;):</span><br><span class="line">    &quot;legacy&quot; - Legacy Build system</span><br><span class="line">    &quot;new&quot; - New Build System</span><br><span class="line"></span><br><span class="line">--ninja-executable&#x3D;&lt;string&gt;</span><br><span class="line">    Can be used to specify the ninja executable to use when building.</span><br><span class="line"></span><br><span class="line">--ninja-extra-args&#x3D;&lt;string&gt;</span><br><span class="line">    This string is passed without any quoting to the ninja invocation</span><br><span class="line">    command-line. Can be used to configure ninja flags, like &quot;-j&quot;.</span><br><span class="line"></span><br><span class="line">--ide-root-target&#x3D;&lt;target_name&gt;</span><br><span class="line">    Name of the target corresponding to &quot;All&quot; target in Xcode. If unset,</span><br><span class="line">    &quot;All&quot; invokes ninja without any target and builds everything.</span><br></pre></td></tr></table></figure>

<h4 id="QtCreator-Flags"><a href="#QtCreator-Flags" class="headerlink" title="QtCreator Flags"></a><strong>QtCreator Flags</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--ide-root-target&#x3D;&lt;target_name&gt;</span><br><span class="line">    Name of the root target for which the QtCreator project will be generated</span><br><span class="line">    to contain files of it and its dependencies. If unset, the whole build</span><br><span class="line">    graph will be emitted.</span><br></pre></td></tr></table></figure>

<h4 id="Eclipse-IDE-Support"><a href="#Eclipse-IDE-Support" class="headerlink" title="Eclipse IDE Support"></a><strong>Eclipse IDE Support</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GN DOES NOT generate Eclipse CDT projects. Instead, it generates a settings</span><br><span class="line">file which can be imported into an Eclipse CDT project. The XML file contains</span><br><span class="line">a list of include paths and defines. Because GN does not generate a full</span><br><span class="line">.cproject definition, it is not possible to properly define includes&#x2F;defines</span><br><span class="line">for each file individually. Instead, one set of includes&#x2F;defines is generated</span><br><span class="line">for the entire project. This works fairly well but may still result in a few</span><br><span class="line">indexer issues here and there.</span><br></pre></td></tr></table></figure>

<h4 id="Generic-JSON-Output"><a href="#Generic-JSON-Output" class="headerlink" title="Generic JSON Output"></a><strong>Generic JSON Output</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Dumps target information to a JSON file and optionally invokes a</span><br><span class="line">python script on the generated file. See the comments at the beginning</span><br><span class="line">of json_project_writer.cc and desc_builder.cc for an overview of the JSON</span><br><span class="line">file format.</span><br><span class="line"></span><br><span class="line">--json-file-name&#x3D;&lt;json_file_name&gt;</span><br><span class="line">    Overrides default file name (project.json) of generated JSON file.</span><br><span class="line"></span><br><span class="line">--json-ide-script&#x3D;&lt;path_to_python_script&gt;</span><br><span class="line">    Executes python script after the JSON file is generated or updated with</span><br><span class="line">    new content. Path can be project absolute (&#x2F;&#x2F;), system absolute (&#x2F;) or</span><br><span class="line">    relative, in which case the output directory will be base. Path to</span><br><span class="line">    generated JSON file will be first argument when invoking script.</span><br><span class="line"></span><br><span class="line">--json-ide-script-args&#x3D;&lt;argument&gt;</span><br><span class="line">    Optional second argument that will passed to executed script.</span><br></pre></td></tr></table></figure>

<h4 id="Compilation-Database"><a href="#Compilation-Database" class="headerlink" title="Compilation Database"></a><strong>Compilation Database</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--export-rust-project</span><br><span class="line">    Produces a rust-project.json file in the root of the build directory</span><br><span class="line">    This is used for various tools in the Rust ecosystem allowing for the</span><br><span class="line">    replay of individual compilations independent of the build system.</span><br><span class="line">    This is an unstable format and likely to change without warning.</span><br><span class="line"></span><br><span class="line">--export-compile-commands[&#x3D;&lt;target_name1,target_name2...&gt;]</span><br><span class="line">    Produces a compile_commands.json file in the root of the build directory</span><br><span class="line">    containing an array of “command objects”, where each command object</span><br><span class="line">    specifies one way a translation unit is compiled in the project. If a list</span><br><span class="line">    of target_name is supplied, only targets that are reachable from any</span><br><span class="line">    target in any build file whose name is target_name will be used for</span><br><span class="line">    “command objects” generation, otherwise all available targets will be used.</span><br><span class="line">    This is used for various Clang-based tooling, allowing for the replay of</span><br><span class="line">    individual compilations independent of the build system.</span><br><span class="line">    e.g. &quot;foo&quot; will match:</span><br><span class="line">    - &quot;&#x2F;&#x2F;path&#x2F;to&#x2F;src:foo&quot;</span><br><span class="line">    - &quot;&#x2F;&#x2F;other&#x2F;path:foo&quot;</span><br><span class="line">    - &quot;&#x2F;&#x2F;foo:foo&quot;</span><br><span class="line">    and not match:</span><br><span class="line">    - &quot;&#x2F;&#x2F;foo:bar&quot;</span><br></pre></td></tr></table></figure>
<h3 id="gn-help-lt-anything-gt"><a href="#gn-help-lt-anything-gt" class="headerlink" title="gn help &lt;anything&gt;"></a><a name="cmd_help"></a><strong>gn help &lt;anything&gt;</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Yo dawg, I heard you like help on your help so I put help on the help in the</span><br><span class="line">help.</span><br><span class="line"></span><br><span class="line">You can also use &quot;all&quot; as the parameter to get all help at once.</span><br></pre></td></tr></table></figure>

<h4 id="Switches"><a href="#Switches" class="headerlink" title="Switches"></a><strong>Switches</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--markdown</span><br><span class="line">    Format output in markdown syntax.</span><br></pre></td></tr></table></figure>

<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gn help --markdown all</span><br><span class="line">    Dump all help to stdout in markdown format.</span><br></pre></td></tr></table></figure>
<h3 id="gn-ls-lt-out-dir-gt-lt-label-pattern-gt-default-toolchain-as-…"><a href="#gn-ls-lt-out-dir-gt-lt-label-pattern-gt-default-toolchain-as-…" class="headerlink" title="gn ls &lt;out_dir&gt; [&lt;label_pattern&gt;] [--default-toolchain] [--as=…]"></a><a name="cmd_ls"></a><strong>gn ls &lt;out_dir&gt; [&lt;label_pattern&gt;] [--default-toolchain] [--as=…]</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    [--type&#x3D;...] [--testonly&#x3D;...]</span><br><span class="line"></span><br><span class="line">Lists all targets matching the given pattern for the given build directory.</span><br><span class="line">By default, only targets in the default toolchain will be matched unless a</span><br><span class="line">toolchain is explicitly supplied.</span><br><span class="line"></span><br><span class="line">If the label pattern is unspecified, list all targets. The label pattern is</span><br><span class="line">not a general regular expression (see &quot;gn help label_pattern&quot;). If you need</span><br><span class="line">more complex expressions, pipe the result through grep.</span><br></pre></td></tr></table></figure>

<h4 id="Options-1"><a href="#Options-1" class="headerlink" title="Options"></a><strong>Options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">--as&#x3D;(buildfile|label|output)</span><br><span class="line">    How to print targets.</span><br><span class="line"></span><br><span class="line">    buildfile</span><br><span class="line">        Prints the build files where the given target was declared as</span><br><span class="line">        file names.</span><br><span class="line">    label  (default)</span><br><span class="line">        Prints the label of the target.</span><br><span class="line">    output</span><br><span class="line">        Prints the first output file for the target relative to the</span><br><span class="line">        root build directory.</span><br><span class="line"></span><br><span class="line">--default-toolchain</span><br><span class="line">    Normally wildcard targets are matched in all toolchains. This</span><br><span class="line">    switch makes wildcard labels with no explicit toolchain reference</span><br><span class="line">    only match targets in the default toolchain.</span><br><span class="line"></span><br><span class="line">    Non-wildcard inputs with no explicit toolchain specification will</span><br><span class="line">    always match only a target in the default toolchain if one exists.</span><br><span class="line"></span><br><span class="line">--testonly&#x3D;(true|false)</span><br><span class="line">    Restrict outputs to targets with the testonly flag set</span><br><span class="line">    accordingly. When unspecified, the target&#39;s testonly flags are</span><br><span class="line">    ignored.</span><br><span class="line"></span><br><span class="line">--type&#x3D;(action|copy|executable|group|loadable_module|shared_library|</span><br><span class="line">        source_set|static_library)</span><br><span class="line">    Restrict outputs to targets matching the given type. If</span><br><span class="line">    unspecified, no filtering will be performed.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-4"><a href="#Examples-4" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gn ls out&#x2F;Debug</span><br><span class="line">    Lists all targets in the default toolchain.</span><br><span class="line"></span><br><span class="line">gn ls out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;*&quot;</span><br><span class="line">    Lists all targets in the directory base and all subdirectories.</span><br><span class="line"></span><br><span class="line">gn ls out&#x2F;Debug &quot;&#x2F;&#x2F;base:*&quot;</span><br><span class="line">    Lists all targets defined in &#x2F;&#x2F;base&#x2F;BUILD.gn.</span><br><span class="line"></span><br><span class="line">gn ls out&#x2F;Debug &#x2F;&#x2F;base --as&#x3D;output</span><br><span class="line">    Lists the build output file for &#x2F;&#x2F;base:base</span><br><span class="line"></span><br><span class="line">gn ls out&#x2F;Debug --type&#x3D;executable</span><br><span class="line">    Lists all executables produced by the build.</span><br><span class="line"></span><br><span class="line">gn ls out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;*&quot; --as&#x3D;output | xargs ninja -C out&#x2F;Debug</span><br><span class="line">    Builds all targets in &#x2F;&#x2F;base and all subdirectories.</span><br></pre></td></tr></table></figure>
<h3 id="gn-meta"><a href="#gn-meta" class="headerlink" title="gn meta"></a><a name="cmd_meta"></a><strong>gn meta</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gn meta &lt;out_dir&gt; &lt;target&gt;* --data&#x3D;&lt;key&gt;[,&lt;key&gt;*]* [--walk&#x3D;&lt;key&gt;[,&lt;key&gt;*]*]</span><br><span class="line">        [--rebase&#x3D;&lt;dest dir&gt;]</span><br><span class="line"></span><br><span class="line">Lists collected metaresults of all given targets for the given data key(s),</span><br><span class="line">collecting metadata dependencies as specified by the given walk key(s).</span><br><span class="line"></span><br><span class="line">See &#96;gn help generated_file&#96; for more information on the walk.</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-1"><a href="#Arguments-1" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;target(s)&gt;</span><br><span class="line">  A list of target labels from which to initiate the walk.</span><br><span class="line"></span><br><span class="line">--data</span><br><span class="line">  A list of keys from which to extract data. In each target walked, its metadata</span><br><span class="line">  scope is checked for the presence of these keys. If present, the contents of</span><br><span class="line">  those variable in the scope are appended to the results list.</span><br><span class="line"></span><br><span class="line">--walk (optional)</span><br><span class="line">  A list of keys from which to control the walk. In each target walked, its</span><br><span class="line">  metadata scope is checked for the presence of any of these keys. If present,</span><br><span class="line">  the contents of those variables is checked to ensure that it is a label of</span><br><span class="line">  a valid dependency of the target and then added to the set of targets to walk.</span><br><span class="line">  If the empty string (&quot;&quot;) is present in any of these keys, all deps and data_deps</span><br><span class="line">  are added to the walk set.</span><br><span class="line"></span><br><span class="line">--rebase (optional)</span><br><span class="line">  A destination directory onto which to rebase any paths found. If set, all</span><br><span class="line">  collected metadata will be rebased onto this path. This option will throw errors</span><br><span class="line">  if collected metadata is not a list of strings.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-5"><a href="#Examples-5" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">gn meta out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;foo&quot; --data&#x3D;files</span><br><span class="line">    Lists collected metaresults for the &#96;files&#96; key in the &#x2F;&#x2F;base&#x2F;foo:foo</span><br><span class="line">    target and all of its dependency tree.</span><br><span class="line"></span><br><span class="line">gn meta out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;foo&quot; --data&#x3D;files --data&#x3D;other</span><br><span class="line">    Lists collected metaresults for the &#96;files&#96; and &#96;other&#96; keys in the</span><br><span class="line">    &#x2F;&#x2F;base&#x2F;foo:foo target and all of its dependency tree.</span><br><span class="line"></span><br><span class="line">gn meta out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;foo&quot; --data&#x3D;files --walk&#x3D;stop</span><br><span class="line">    Lists collected metaresults for the &#96;files&#96; key in the &#x2F;&#x2F;base&#x2F;foo:foo</span><br><span class="line">    target and all of the dependencies listed in the &#96;stop&#96; key (and so on).</span><br><span class="line"></span><br><span class="line">gn meta out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;foo&quot; --data&#x3D;files --rebase&#x3D;&quot;&#x2F;&quot;</span><br><span class="line">    Lists collected metaresults for the &#96;files&#96; key in the &#x2F;&#x2F;base&#x2F;foo:foo</span><br><span class="line">    target and all of its dependency tree, rebasing the strings in the &#96;files&#96;</span><br><span class="line">    key onto the source directory of the target&#39;s declaration relative to &quot;&#x2F;&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="gn-outputs-lt-out-dir-gt-lt-list-of-target-or-file-names…-gt"><a href="#gn-outputs-lt-out-dir-gt-lt-list-of-target-or-file-names…-gt" class="headerlink" title="gn outputs &lt;out_dir&gt; &lt;list of target or file names…&gt;"></a><a name="cmd_outputs"></a><strong>gn outputs &lt;out_dir&gt; &lt;list of target or file names…&gt;</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Lists the output files corresponding to the given target(s) or file name(s).</span><br><span class="line">There can be multiple outputs because there can be more than one output</span><br><span class="line">generated by a build step, and there can be more than one toolchain matched.</span><br><span class="line">You can also list multiple inputs which will generate a union of all the</span><br><span class="line">outputs from those inputs.</span><br><span class="line"></span><br><span class="line"> - The input target&#x2F;file names are relative to the current directory.</span><br><span class="line"></span><br><span class="line"> - The output file names are relative to the root build directory.</span><br><span class="line"></span><br><span class="line"> This command is useful for finding a ninja command that will build only a</span><br><span class="line"> portion of the build.</span><br></pre></td></tr></table></figure>

<h4 id="Target-outputs"><a href="#Target-outputs" class="headerlink" title="Target outputs"></a><strong>Target outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">If the parameter is a target name that includes a toolchain, it will match</span><br><span class="line">only that target in that toolchain. If no toolchain is specified, it will</span><br><span class="line">match all targets with that name in any toolchain.</span><br><span class="line"></span><br><span class="line">The result will be the outputs specified by that target which could be a</span><br><span class="line">library, executable, output of an action, a stamp file, etc.</span><br></pre></td></tr></table></figure>

<h4 id="File-outputs"><a href="#File-outputs" class="headerlink" title="File outputs"></a><strong>File outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">If the parameter is a file name it will compute the output for that compile</span><br><span class="line">step for all targets in all toolchains that contain that file as a source</span><br><span class="line">file.</span><br><span class="line"></span><br><span class="line">If the source is not compiled (e.g. a header or text file), the command will</span><br><span class="line">produce no output.</span><br><span class="line"></span><br><span class="line">If the source is listed as an &quot;input&quot; to a binary target or action will</span><br><span class="line">resolve to that target&#39;s outputs.</span><br></pre></td></tr></table></figure>

<h4 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gn outputs out&#x2F;debug some&#x2F;directory:some_target</span><br><span class="line">    Find the outputs of a given target.</span><br><span class="line"></span><br><span class="line">gn outputs out&#x2F;debug src&#x2F;project&#x2F;my_file.cc | xargs ninja -C out&#x2F;debug</span><br><span class="line">    Compiles just the given source file in all toolchains it&#39;s referenced in.</span><br><span class="line"></span><br><span class="line">git diff --name-only | xargs gn outputs out&#x2F;x64 | xargs ninja -C out&#x2F;x64</span><br><span class="line">    Compiles all files changed in git.</span><br></pre></td></tr></table></figure>
<h3 id="gn-path-lt-out-dir-gt-lt-target-one-gt-lt-target-two-gt"><a href="#gn-path-lt-out-dir-gt-lt-target-one-gt-lt-target-two-gt" class="headerlink" title="gn path &lt;out_dir&gt; &lt;target_one&gt; &lt;target_two&gt;"></a><a name="cmd_path"></a><strong>gn path &lt;out_dir&gt; &lt;target_one&gt; &lt;target_two&gt;</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Finds paths of dependencies between two targets. Each unique path will be</span><br><span class="line">printed in one group, and groups will be separate by newlines. The two</span><br><span class="line">targets can appear in either order (paths will be found going in either</span><br><span class="line">direction).</span><br><span class="line"></span><br><span class="line">By default, a single path will be printed. If there is a path with only</span><br><span class="line">public dependencies, the shortest public path will be printed. Otherwise, the</span><br><span class="line">shortest path using either public or private dependencies will be printed. If</span><br><span class="line">--with-data is specified, data deps will also be considered. If there are</span><br><span class="line">multiple shortest paths, an arbitrary one will be selected.</span><br></pre></td></tr></table></figure>

<h4 id="Interesting-paths"><a href="#Interesting-paths" class="headerlink" title="Interesting paths"></a><strong>Interesting paths</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In a large project, there can be 100&#39;s of millions of unique paths between a</span><br><span class="line">very high level and a common low-level target. To make the output more useful</span><br><span class="line">(and terminate in a reasonable time), GN will not revisit sub-paths</span><br><span class="line">previously known to lead to the target.</span><br></pre></td></tr></table></figure>

<h4 id="Options-2"><a href="#Options-2" class="headerlink" title="Options"></a><strong>Options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--all</span><br><span class="line">   Prints all &quot;interesting&quot; paths found rather than just the first one.</span><br><span class="line">   Public paths will be printed first in order of increasing length, followed</span><br><span class="line">   by non-public paths in order of increasing length.</span><br><span class="line"></span><br><span class="line">--public</span><br><span class="line">   Considers only public paths. Can&#39;t be used with --with-data.</span><br><span class="line"></span><br><span class="line">--with-data</span><br><span class="line">   Additionally follows data deps. Without this flag, only public and private</span><br><span class="line">   linked deps will be followed. Can&#39;t be used with --public.</span><br></pre></td></tr></table></figure>

<h4 id="Example-2"><a href="#Example-2" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gn path out&#x2F;Default &#x2F;&#x2F;base &#x2F;&#x2F;gn</span><br></pre></td></tr></table></figure>
<h3 id="gn-refs"><a href="#gn-refs" class="headerlink" title="gn refs"></a><a name="cmd_refs"></a><strong>gn refs</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">gn refs &lt;out_dir&gt; (&lt;label_pattern&gt;|&lt;label&gt;|&lt;file&gt;|@&lt;response_file&gt;)* [--all]</span><br><span class="line">        [--default-toolchain] [--as&#x3D;...] [--testonly&#x3D;...] [--type&#x3D;...]</span><br><span class="line"></span><br><span class="line">Finds reverse dependencies (which targets reference something). The input is</span><br><span class="line">a list containing:</span><br><span class="line"></span><br><span class="line"> - Target label: The result will be which targets depend on it.</span><br><span class="line"></span><br><span class="line"> - Config label: The result will be which targets list the given config in</span><br><span class="line">   its &quot;configs&quot; or &quot;public_configs&quot; list.</span><br><span class="line"></span><br><span class="line"> - Label pattern: The result will be which targets depend on any target</span><br><span class="line">   matching the given pattern. Patterns will not match configs. These are not</span><br><span class="line">   general regular expressions, see &quot;gn help label_pattern&quot; for details.</span><br><span class="line"></span><br><span class="line"> - File name: The result will be which targets list the given file in its</span><br><span class="line">   &quot;inputs&quot;, &quot;sources&quot;, &quot;public&quot;, &quot;data&quot;, or &quot;outputs&quot;. Any input that does</span><br><span class="line">   not contain wildcards and does not match a target or a config will be</span><br><span class="line">   treated as a file.</span><br><span class="line"></span><br><span class="line"> - Response file: If the input starts with an &quot;@&quot;, it will be interpreted as</span><br><span class="line">   a path to a file containing a list of labels or file names, one per line.</span><br><span class="line">   This allows us to handle long lists of inputs without worrying about</span><br><span class="line">   command line limits.</span><br></pre></td></tr></table></figure>

<h4 id="Options-3"><a href="#Options-3" class="headerlink" title="Options"></a><strong>Options</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">--all</span><br><span class="line">    When used without --tree, will recurse and display all unique</span><br><span class="line">    dependencies of the given targets. For example, if the input is a target,</span><br><span class="line">    this will output all targets that depend directly or indirectly on the</span><br><span class="line">    input. If the input is a file, this will output all targets that depend</span><br><span class="line">    directly or indirectly on that file.</span><br><span class="line"></span><br><span class="line">    When used with --tree, turns off eliding to show a complete tree.</span><br><span class="line"></span><br><span class="line">--as&#x3D;(buildfile|label|output)</span><br><span class="line">    How to print targets.</span><br><span class="line"></span><br><span class="line">    buildfile</span><br><span class="line">        Prints the build files where the given target was declared as</span><br><span class="line">        file names.</span><br><span class="line">    label  (default)</span><br><span class="line">        Prints the label of the target.</span><br><span class="line">    output</span><br><span class="line">        Prints the first output file for the target relative to the</span><br><span class="line">        root build directory.</span><br><span class="line"></span><br><span class="line">--default-toolchain</span><br><span class="line">    Normally wildcard targets are matched in all toolchains. This</span><br><span class="line">    switch makes wildcard labels with no explicit toolchain reference</span><br><span class="line">    only match targets in the default toolchain.</span><br><span class="line"></span><br><span class="line">    Non-wildcard inputs with no explicit toolchain specification will</span><br><span class="line">    always match only a target in the default toolchain if one exists.</span><br><span class="line"></span><br><span class="line">-q</span><br><span class="line">   Quiet. If nothing matches, don&#39;t print any output. Without this option, if</span><br><span class="line">   there are no matches there will be an informational message printed which</span><br><span class="line">   might interfere with scripts processing the output.</span><br><span class="line"></span><br><span class="line">--testonly&#x3D;(true|false)</span><br><span class="line">    Restrict outputs to targets with the testonly flag set</span><br><span class="line">    accordingly. When unspecified, the target&#39;s testonly flags are</span><br><span class="line">    ignored.</span><br><span class="line"></span><br><span class="line">--tree</span><br><span class="line">    Outputs a reverse dependency tree from the given target. Duplicates will</span><br><span class="line">    be elided. Combine with --all to see a full dependency tree.</span><br><span class="line"></span><br><span class="line">    Tree output can not be used with the filtering or output flags: --as,</span><br><span class="line">    --type, --testonly.</span><br><span class="line"></span><br><span class="line">--type&#x3D;(action|copy|executable|group|loadable_module|shared_library|</span><br><span class="line">        source_set|static_library)</span><br><span class="line">    Restrict outputs to targets matching the given type. If</span><br><span class="line">    unspecified, no filtering will be performed.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-target-input"><a href="#Examples-target-input" class="headerlink" title="Examples (target input)"></a><strong>Examples (target input)</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;gn:gn</span><br><span class="line">    Find all targets depending on the given exact target name.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base:i18n --as&#x3D;buildfiles | xargs gvim</span><br><span class="line">    Edit all .gn files containing references to &#x2F;&#x2F;base:i18n</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base --all</span><br><span class="line">    List all targets depending directly or indirectly on &#x2F;&#x2F;base:base.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &quot;&#x2F;&#x2F;base&#x2F;*&quot;</span><br><span class="line">    List all targets depending directly on any target in &#x2F;&#x2F;base or</span><br><span class="line">    its subdirectories.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &quot;&#x2F;&#x2F;base:*&quot;</span><br><span class="line">    List all targets depending directly on any target in</span><br><span class="line">    &#x2F;&#x2F;base&#x2F;BUILD.gn.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base --tree</span><br><span class="line">    Print a reverse dependency tree of &#x2F;&#x2F;base:base</span><br></pre></td></tr></table></figure>

<h4 id="Examples-file-input"><a href="#Examples-file-input" class="headerlink" title="Examples (file input)"></a><strong>Examples (file input)</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base&#x2F;macros.h</span><br><span class="line">    Print target(s) listing &#x2F;&#x2F;base&#x2F;macros.h as a source.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base&#x2F;macros.h --tree</span><br><span class="line">    Display a reverse dependency tree to get to the given file. This</span><br><span class="line">    will show how dependencies will reference that file.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base&#x2F;macros.h &#x2F;&#x2F;base&#x2F;at_exit.h --all</span><br><span class="line">    Display all unique targets with some dependency path to a target</span><br><span class="line">    containing either of the given files as a source.</span><br><span class="line"></span><br><span class="line">gn refs out&#x2F;Debug &#x2F;&#x2F;base&#x2F;macros.h --testonly&#x3D;true --type&#x3D;executable</span><br><span class="line">        --all --as&#x3D;output</span><br><span class="line">    Display the executable file names of all test executables</span><br><span class="line">    potentially affected by a change to the given file.</span><br></pre></td></tr></table></figure>
<h2 id="Target-declarations"><a href="#Target-declarations" class="headerlink" title="Target declarations"></a><a name="targets"></a>Target declarations</h2><h3 id="action-Declare-a-target-that-runs-a-script-a-single-time"><a href="#action-Declare-a-target-that-runs-a-script-a-single-time" class="headerlink" title="action: Declare a target that runs a script a single time."></a><a name="func_action"></a><strong>action</strong>: Declare a target that runs a script a single time.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This target type allows you to run a script a single time to produce one or</span><br><span class="line">more output files. If you want to run a script once for each of a set of</span><br><span class="line">input files, see &quot;gn help action_foreach&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Inputs"><a href="#Inputs" class="headerlink" title="Inputs"></a><strong>Inputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">In an action the &quot;sources&quot; and &quot;inputs&quot; are treated the same: they&#39;re both</span><br><span class="line">input dependencies on script execution with no special handling. If you want</span><br><span class="line">to pass the sources to your script, you must do so explicitly by including</span><br><span class="line">them in the &quot;args&quot;. Note also that this means there is no special handling of</span><br><span class="line">paths since GN doesn&#39;t know which of the args are paths and not. You will</span><br><span class="line">want to use rebase_path() to convert paths to be relative to the</span><br><span class="line">root_build_dir.</span><br><span class="line"></span><br><span class="line">You can dynamically write input dependencies (for incremental rebuilds if an</span><br><span class="line">input file changes) by writing a depfile when the script is run (see &quot;gn help</span><br><span class="line">depfile&quot;). This is more flexible than &quot;inputs&quot;.</span><br><span class="line"></span><br><span class="line">If the command line length is very long, you can use response files to pass</span><br><span class="line">args to your script. See &quot;gn help response_file_contents&quot;.</span><br><span class="line"></span><br><span class="line">It is recommended you put inputs to your script in the &quot;sources&quot; variable,</span><br><span class="line">and stuff like other Python files required to run your script in the &quot;inputs&quot;</span><br><span class="line">variable.</span><br><span class="line"></span><br><span class="line">The &quot;deps&quot; and &quot;public_deps&quot; for an action will always be</span><br><span class="line">completed before any part of the action is run so it can depend on</span><br><span class="line">the output of previous steps. The &quot;data_deps&quot; will be built if the</span><br><span class="line">action is built, but may not have completed before all steps of the</span><br><span class="line">action are started. This can give additional parallelism in the build</span><br><span class="line">for runtime-only dependencies.</span><br></pre></td></tr></table></figure>

<h4 id="Outputs"><a href="#Outputs" class="headerlink" title="Outputs"></a><strong>Outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">You should specify files created by your script by specifying them in the</span><br><span class="line">&quot;outputs&quot;.</span><br><span class="line"></span><br><span class="line">The script will be executed with the given arguments with the current</span><br><span class="line">directory being that of the root build directory. If you pass files</span><br><span class="line">to your script, see &quot;gn help rebase_path&quot; for how to convert</span><br><span class="line">file names to be relative to the build directory (file names in the</span><br><span class="line">sources, outputs, and inputs will be all treated as relative to the</span><br><span class="line">current build file and converted as needed automatically).</span><br><span class="line"></span><br><span class="line">GN sets Ninja&#39;s flag &#39;restat &#x3D; 1&#96; for all action commands. This means</span><br><span class="line">that Ninja will check the timestamp of the output after the action</span><br><span class="line">completes. If output timestamp is unchanged, the step will be treated</span><br><span class="line">as if it never needed to be rebuilt, potentially eliminating some</span><br><span class="line">downstream steps for incremental builds. Scripts can improve build</span><br><span class="line">performance by taking care not to change the timstamp of the output</span><br><span class="line">file(s) if the contents have not changed.</span><br></pre></td></tr></table></figure>

<h4 id="File-name-handling"><a href="#File-name-handling" class="headerlink" title="File name handling"></a><strong>File name handling</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">All output files must be inside the output directory of the build.</span><br><span class="line">You would generally use |$target_out_dir| or |$target_gen_dir| to</span><br><span class="line">reference the output or generated intermediate file directories,</span><br><span class="line">respectively.</span><br></pre></td></tr></table></figure>

<h4 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">args, data, data_deps, depfile, deps, inputs, metadata, outputs*, pool,</span><br><span class="line">response_file_contents, script*, sources</span><br><span class="line">* &#x3D; required</span><br></pre></td></tr></table></figure>

<h4 id="Example-3"><a href="#Example-3" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;run_this_guy_once&quot;) &#123;</span><br><span class="line">  script &#x3D; &quot;doprocessing.py&quot;</span><br><span class="line">  sources &#x3D; [ &quot;my_configuration.txt&quot; ]</span><br><span class="line">  outputs &#x3D; [ &quot;$target_gen_dir&#x2F;insightful_output.txt&quot; ]</span><br><span class="line"></span><br><span class="line">  # Our script imports this Python file so we want to rebuild if it changes.</span><br><span class="line">  inputs &#x3D; [ &quot;helper_library.py&quot; ]</span><br><span class="line"></span><br><span class="line">  # Note that we have to manually pass the sources to our script if the</span><br><span class="line">  # script needs them as inputs.</span><br><span class="line">  args &#x3D; [ &quot;--out&quot;, rebase_path(target_gen_dir, root_build_dir) ] +</span><br><span class="line">         rebase_path(sources, root_build_dir)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="action-foreach-Declare-a-target-that-runs-a-script-over-a-set-of-files"><a href="#action-foreach-Declare-a-target-that-runs-a-script-over-a-set-of-files" class="headerlink" title="action_foreach: Declare a target that runs a script over a set of files."></a><a name="func_action_foreach"></a><strong>action_foreach</strong>: Declare a target that runs a script over a set of files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This target type allows you to run a script once-per-file over a set of</span><br><span class="line">sources. If you want to run a script once that takes many files as input, see</span><br><span class="line">&quot;gn help action&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Inputs-1"><a href="#Inputs-1" class="headerlink" title="Inputs"></a><strong>Inputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">The script will be run once per file in the &quot;sources&quot; variable. The &quot;outputs&quot;</span><br><span class="line">variable should specify one or more files with a source expansion pattern in</span><br><span class="line">it (see &quot;gn help source_expansion&quot;). The output file(s) for each script</span><br><span class="line">invocation should be unique. Normally you use &quot;&#123;&#123;source_name_part&#125;&#125;&quot; in each</span><br><span class="line">output file.</span><br><span class="line"></span><br><span class="line">If your script takes additional data as input, such as a shared configuration</span><br><span class="line">file or a Python module it uses, those files should be listed in the &quot;inputs&quot;</span><br><span class="line">variable. These files are treated as dependencies of each script invocation.</span><br><span class="line"></span><br><span class="line">If the command line length is very long, you can use response files to pass</span><br><span class="line">args to your script. See &quot;gn help response_file_contents&quot;.</span><br><span class="line"></span><br><span class="line">You can dynamically write input dependencies (for incremental rebuilds if an</span><br><span class="line">input file changes) by writing a depfile when the script is run (see &quot;gn help</span><br><span class="line">depfile&quot;). This is more flexible than &quot;inputs&quot;.</span><br><span class="line"></span><br><span class="line">The &quot;deps&quot; and &quot;public_deps&quot; for an action will always be</span><br><span class="line">completed before any part of the action is run so it can depend on</span><br><span class="line">the output of previous steps. The &quot;data_deps&quot; will be built if the</span><br><span class="line">action is built, but may not have completed before all steps of the</span><br><span class="line">action are started. This can give additional parallelism in the build</span><br><span class="line">for runtime-only dependencies.</span><br></pre></td></tr></table></figure>

<h4 id="Outputs-1"><a href="#Outputs-1" class="headerlink" title="Outputs"></a><strong>Outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">The script will be executed with the given arguments with the current</span><br><span class="line">directory being that of the root build directory. If you pass files</span><br><span class="line">to your script, see &quot;gn help rebase_path&quot; for how to convert</span><br><span class="line">file names to be relative to the build directory (file names in the</span><br><span class="line">sources, outputs, and inputs will be all treated as relative to the</span><br><span class="line">current build file and converted as needed automatically).</span><br><span class="line"></span><br><span class="line">GN sets Ninja&#39;s flag &#39;restat &#x3D; 1&#96; for all action commands. This means</span><br><span class="line">that Ninja will check the timestamp of the output after the action</span><br><span class="line">completes. If output timestamp is unchanged, the step will be treated</span><br><span class="line">as if it never needed to be rebuilt, potentially eliminating some</span><br><span class="line">downstream steps for incremental builds. Scripts can improve build</span><br><span class="line">performance by taking care not to change the timstamp of the output</span><br><span class="line">file(s) if the contents have not changed.</span><br></pre></td></tr></table></figure>

<h4 id="File-name-handling-1"><a href="#File-name-handling-1" class="headerlink" title="File name handling"></a><strong>File name handling</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">All output files must be inside the output directory of the build.</span><br><span class="line">You would generally use |$target_out_dir| or |$target_gen_dir| to</span><br><span class="line">reference the output or generated intermediate file directories,</span><br><span class="line">respectively.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-1"><a href="#Variables-1" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">args, data, data_deps, depfile, deps, inputs, metadata, outputs*, pool,</span><br><span class="line">response_file_contents, script*, sources*</span><br><span class="line">* &#x3D; required</span><br></pre></td></tr></table></figure>

<h4 id="Example-4"><a href="#Example-4" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Runs the script over each IDL file. The IDL script will generate both a .cc</span><br><span class="line"># and a .h file for each input.</span><br><span class="line">action_foreach(&quot;my_idl&quot;) &#123;</span><br><span class="line">  script &#x3D; &quot;idl_processor.py&quot;</span><br><span class="line">  sources &#x3D; [ &quot;foo.idl&quot;, &quot;bar.idl&quot; ]</span><br><span class="line"></span><br><span class="line">  # Our script reads this file each time, so we need to list it as a</span><br><span class="line">  # dependency so we can rebuild if it changes.</span><br><span class="line">  inputs &#x3D; [ &quot;my_configuration.txt&quot; ]</span><br><span class="line"></span><br><span class="line">  # Transformation from source file name to output file names.</span><br><span class="line">  outputs &#x3D; [ &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.h&quot;,</span><br><span class="line">              &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.cc&quot; ]</span><br><span class="line"></span><br><span class="line">  # Note that since &quot;args&quot; is opaque to GN, if you specify paths here, you</span><br><span class="line">  # will need to convert it to be relative to the build directory using</span><br><span class="line">  # rebase_path().</span><br><span class="line">  args &#x3D; [</span><br><span class="line">    &quot;&#123;&#123;source&#125;&#125;&quot;,</span><br><span class="line">    &quot;-o&quot;,</span><br><span class="line">    rebase_path(target_gen_dir, root_build_dir) +</span><br><span class="line">      &quot;&#x2F;&#123;&#123;source_name_part&#125;&#125;.h&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bundle-data-iOS-macOS-Declare-a-target-without-output"><a href="#bundle-data-iOS-macOS-Declare-a-target-without-output" class="headerlink" title="bundle_data: [iOS/macOS] Declare a target without output."></a><a name="func_bundle_data"></a><strong>bundle_data</strong>: [iOS/macOS] Declare a target without output.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">This target type allows one to declare data that is required at runtime. It is</span><br><span class="line">used to inform &quot;create_bundle&quot; targets of the files to copy into generated</span><br><span class="line">bundle, see &quot;gn help create_bundle&quot; for help.</span><br><span class="line"></span><br><span class="line">The target must define a list of files as &quot;sources&quot; and a single &quot;outputs&quot;.</span><br><span class="line">If there are multiple files, source expansions must be used to express the</span><br><span class="line">output. The output must reference a file inside of &#123;&#123;bundle_root_dir&#125;&#125;.</span><br><span class="line"></span><br><span class="line">This target can be used on all platforms though it is designed only to</span><br><span class="line">generate iOS&#x2F;macOS bundle. In cross-platform projects, it is advised to put it</span><br><span class="line">behind iOS&#x2F;macOS conditionals.</span><br><span class="line"></span><br><span class="line">See &quot;gn help create_bundle&quot; for more information.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-2"><a href="#Variables-2" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sources*, outputs*, deps, data_deps, metadata, public_deps, visibility</span><br><span class="line">* &#x3D; required</span><br></pre></td></tr></table></figure>

<h4 id="Examples-6"><a href="#Examples-6" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">bundle_data(&quot;icudata&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;sources&#x2F;data&#x2F;in&#x2F;icudtl.dat&quot; ]</span><br><span class="line">  outputs &#x3D; [ &quot;&#123;&#123;bundle_resources_dir&#125;&#125;&#x2F;&#123;&#123;source_file_part&#125;&#125;&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bundle_data(&quot;base_unittests_bundle_data]&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;test&#x2F;data&quot; ]</span><br><span class="line">  outputs &#x3D; [</span><br><span class="line">    &quot;&#123;&#123;bundle_resources_dir&#125;&#125;&#x2F;&#123;&#123;source_root_relative_dir&#125;&#125;&#x2F;&quot; +</span><br><span class="line">        &quot;&#123;&#123;source_file_part&#125;&#125;&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bundle_data(&quot;material_typography_bundle_data&quot;) &#123;</span><br><span class="line">  sources &#x3D; [</span><br><span class="line">    &quot;src&#x2F;MaterialTypography.bundle&#x2F;Roboto-Bold.ttf&quot;,</span><br><span class="line">    &quot;src&#x2F;MaterialTypography.bundle&#x2F;Roboto-Italic.ttf&quot;,</span><br><span class="line">    &quot;src&#x2F;MaterialTypography.bundle&#x2F;Roboto-Regular.ttf&quot;,</span><br><span class="line">    &quot;src&#x2F;MaterialTypography.bundle&#x2F;Roboto-Thin.ttf&quot;,</span><br><span class="line">  ]</span><br><span class="line">  outputs &#x3D; [</span><br><span class="line">    &quot;&#123;&#123;bundle_resources_dir&#125;&#125;&#x2F;MaterialTypography.bundle&#x2F;&quot;</span><br><span class="line">        &quot;&#123;&#123;source_file_part&#125;&#125;&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="copy-Declare-a-target-that-copies-files"><a href="#copy-Declare-a-target-that-copies-files" class="headerlink" title="copy: Declare a target that copies files."></a><a name="func_copy"></a><strong>copy</strong>: Declare a target that copies files.</h3><h4 id="File-name-handling-2"><a href="#File-name-handling-2" class="headerlink" title="File name handling"></a><strong>File name handling</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">All output files must be inside the output directory of the build. You would</span><br><span class="line">generally use |$target_out_dir| or |$target_gen_dir| to reference the output</span><br><span class="line">or generated intermediate file directories, respectively.</span><br><span class="line"></span><br><span class="line">Both &quot;sources&quot; and &quot;outputs&quot; must be specified. Sources can include as many</span><br><span class="line">files as you want, but there can only be one item in the outputs list (plural</span><br><span class="line">is used for the name for consistency with other target types).</span><br><span class="line"></span><br><span class="line">If there is more than one source file, your output name should specify a</span><br><span class="line">mapping from each source file to an output file name using source expansion</span><br><span class="line">(see &quot;gn help source_expansion&quot;). The placeholders will look like</span><br><span class="line">&quot;&#123;&#123;source_name_part&#125;&#125;&quot;, for example.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-7"><a href="#Examples-7" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Write a rule that copies a checked-in DLL to the output directory.</span><br><span class="line">copy(&quot;mydll&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;mydll.dll&quot; ]</span><br><span class="line">  outputs &#x3D; [ &quot;$target_out_dir&#x2F;mydll.dll&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Write a rule to copy several files to the target generated files directory.</span><br><span class="line">copy(&quot;myfiles&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;data1.dat&quot;, &quot;data2.dat&quot;, &quot;data3.dat&quot; ]</span><br><span class="line"></span><br><span class="line">  # Use source expansion to generate output files with the corresponding file</span><br><span class="line">  # names in the gen dir. This will just copy each file.</span><br><span class="line">  outputs &#x3D; [ &quot;$target_gen_dir&#x2F;&#123;&#123;source_file_part&#125;&#125;&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="create-bundle-ios-macOS-Build-an-iOS-or-macOS-bundle"><a href="#create-bundle-ios-macOS-Build-an-iOS-or-macOS-bundle" class="headerlink" title="create_bundle: [ios/macOS] Build an iOS or macOS bundle."></a><a name="func_create_bundle"></a><strong>create_bundle</strong>: [ios/macOS] Build an iOS or macOS bundle.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">This target generates an iOS or macOS bundle (which is a directory with a</span><br><span class="line">well-know structure). This target does not define any sources, instead they</span><br><span class="line">are computed from all &quot;bundle_data&quot; target this one depends on transitively</span><br><span class="line">(the recursion stops at &quot;create_bundle&quot; targets).</span><br><span class="line"></span><br><span class="line">The &quot;bundle_*_dir&quot; are be used for the expansion of &#123;&#123;bundle_*_dir&#125;&#125; rules in</span><br><span class="line">&quot;bundle_data&quot; outputs. The properties are optional but must be defined if any</span><br><span class="line">of the &quot;bundle_data&quot; target use them.</span><br><span class="line"></span><br><span class="line">This target can be used on all platforms though it is designed only to</span><br><span class="line">generate iOS or macOS bundle. In cross-platform projects, it is advised to put</span><br><span class="line">it behind iOS&#x2F;macOS conditionals.</span><br><span class="line"></span><br><span class="line">If a create_bundle is specified as a data_deps for another target, the bundle</span><br><span class="line">is considered a leaf, and its public and private dependencies will not</span><br><span class="line">contribute to any data or data_deps. Required runtime dependencies should be</span><br><span class="line">placed in the bundle. A create_bundle can declare its own explicit data and</span><br><span class="line">data_deps, however.</span><br></pre></td></tr></table></figure>

<h4 id="Code-signing"><a href="#Code-signing" class="headerlink" title="Code signing"></a><strong>Code signing</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Some bundle needs to be code signed as part of the build (on iOS all</span><br><span class="line">application needs to be code signed to run on a device). The code signature</span><br><span class="line">can be configured via the code_signing_script variable.</span><br><span class="line"></span><br><span class="line">If set, code_signing_script is the path of a script that invoked after all</span><br><span class="line">files have been moved into the bundle. The script must not change any file in</span><br><span class="line">the bundle, but may add new files.</span><br><span class="line"></span><br><span class="line">If code_signing_script is defined, then code_signing_outputs must also be</span><br><span class="line">defined and non-empty to inform when the script needs to be re-run. The</span><br><span class="line">code_signing_args will be passed as is to the script (so path have to be</span><br><span class="line">rebased) and additional inputs may be listed with the variable</span><br><span class="line">code_signing_sources.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-3"><a href="#Variables-3" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bundle_root_dir, bundle_contents_dir, bundle_resources_dir,</span><br><span class="line">bundle_executable_dir, bundle_deps_filter, deps, data_deps, public_deps,</span><br><span class="line">visibility, product_type, code_signing_args, code_signing_script,</span><br><span class="line">code_signing_sources, code_signing_outputs, xcode_extra_attributes,</span><br><span class="line">xcode_test_application_name, partial_info_plist, metadata</span><br></pre></td></tr></table></figure>

<h4 id="Example-5"><a href="#Example-5" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"># Defines a template to create an application. On most platform, this is just</span><br><span class="line"># an alias for an &quot;executable&quot; target, but on iOS&#x2F;macOS, it builds an</span><br><span class="line"># application bundle.</span><br><span class="line">template(&quot;app&quot;) &#123;</span><br><span class="line">  if (!is_ios &amp;&amp; !is_mac) &#123;</span><br><span class="line">    executable(target_name) &#123;</span><br><span class="line">      forward_variables_from(invoker, &quot;*&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    app_name &#x3D; target_name</span><br><span class="line">    gen_path &#x3D; target_gen_dir</span><br><span class="line"></span><br><span class="line">    action(&quot;$&#123;app_name&#125;_generate_info_plist&quot;) &#123;</span><br><span class="line">      script &#x3D; [ &quot;&#x2F;&#x2F;build&#x2F;ios&#x2F;ios_gen_plist.py&quot; ]</span><br><span class="line">      sources &#x3D; [ &quot;templates&#x2F;Info.plist&quot; ]</span><br><span class="line">      outputs &#x3D; [ &quot;$gen_path&#x2F;Info.plist&quot; ]</span><br><span class="line">      args &#x3D; rebase_path(sources, root_build_dir) +</span><br><span class="line">             rebase_path(outputs, root_build_dir)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bundle_data(&quot;$&#123;app_name&#125;_bundle_info_plist&quot;) &#123;</span><br><span class="line">      public_deps &#x3D; [ &quot;:$&#123;app_name&#125;_generate_info_plist&quot; ]</span><br><span class="line">      sources &#x3D; [ &quot;$gen_path&#x2F;Info.plist&quot; ]</span><br><span class="line">      outputs &#x3D; [ &quot;&#123;&#123;bundle_contents_dir&#125;&#125;&#x2F;Info.plist&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    executable(&quot;$&#123;app_name&#125;_generate_executable&quot;) &#123;</span><br><span class="line">      forward_variables_from(invoker, &quot;*&quot;, [</span><br><span class="line">                                             &quot;output_name&quot;,</span><br><span class="line">                                             &quot;visibility&quot;,</span><br><span class="line">                                           ])</span><br><span class="line">      output_name &#x3D;</span><br><span class="line">          rebase_path(&quot;$gen_path&#x2F;$app_name&quot;, root_build_dir)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    code_signing &#x3D;</span><br><span class="line">        defined(invoker.code_signing) &amp;&amp; invoker.code_signing</span><br><span class="line"></span><br><span class="line">    if (!is_ios || !code_signing) &#123;</span><br><span class="line">      bundle_data(&quot;$&#123;app_name&#125;_bundle_executable&quot;) &#123;</span><br><span class="line">        public_deps &#x3D; [ &quot;:$&#123;app_name&#125;_generate_executable&quot; ]</span><br><span class="line">        sources &#x3D; [ &quot;$gen_path&#x2F;$app_name&quot; ]</span><br><span class="line">        outputs &#x3D; [ &quot;&#123;&#123;bundle_executable_dir&#125;&#125;&#x2F;$app_name&quot; ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    create_bundle(&quot;$app_name.app&quot;) &#123;</span><br><span class="line">      product_type &#x3D; &quot;com.apple.product-type.application&quot;</span><br><span class="line"></span><br><span class="line">      if (is_ios) &#123;</span><br><span class="line">        bundle_root_dir &#x3D; &quot;$root_build_dir&#x2F;$target_name&quot;</span><br><span class="line">        bundle_contents_dir &#x3D; bundle_root_dir</span><br><span class="line">        bundle_resources_dir &#x3D; bundle_contents_dir</span><br><span class="line">        bundle_executable_dir &#x3D; bundle_contents_dir</span><br><span class="line"></span><br><span class="line">        xcode_extra_attributes &#x3D; &#123;</span><br><span class="line">          ONLY_ACTIVE_ARCH &#x3D; &quot;YES&quot;</span><br><span class="line">          DEBUG_INFORMATION_FORMAT &#x3D; &quot;dwarf&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        bundle_root_dir &#x3D; &quot;$root_build_dir&#x2F;$target_name&quot;</span><br><span class="line">        bundle_contents_dir  &#x3D; &quot;$bundle_root_dir&#x2F;Contents&quot;</span><br><span class="line">        bundle_resources_dir &#x3D; &quot;$bundle_contents_dir&#x2F;Resources&quot;</span><br><span class="line">        bundle_executable_dir &#x3D; &quot;$bundle_contents_dir&#x2F;MacOS&quot;</span><br><span class="line">      &#125;</span><br><span class="line">      deps &#x3D; [ &quot;:$&#123;app_name&#125;_bundle_info_plist&quot; ]</span><br><span class="line">      if (is_ios &amp;&amp; code_signing) &#123;</span><br><span class="line">        deps +&#x3D; [ &quot;:$&#123;app_name&#125;_generate_executable&quot; ]</span><br><span class="line">        code_signing_script &#x3D; &quot;&#x2F;&#x2F;build&#x2F;config&#x2F;ios&#x2F;codesign.py&quot;</span><br><span class="line">        code_signing_sources &#x3D; [</span><br><span class="line">          invoker.entitlements_path,</span><br><span class="line">          &quot;$target_gen_dir&#x2F;$app_name&quot;,</span><br><span class="line">        ]</span><br><span class="line">        code_signing_outputs &#x3D; [</span><br><span class="line">          &quot;$bundle_root_dir&#x2F;$app_name&quot;,</span><br><span class="line">          &quot;$bundle_root_dir&#x2F;_CodeSignature&#x2F;CodeResources&quot;,</span><br><span class="line">          &quot;$bundle_root_dir&#x2F;embedded.mobileprovision&quot;,</span><br><span class="line">          &quot;$target_gen_dir&#x2F;$app_name.xcent&quot;,</span><br><span class="line">        ]</span><br><span class="line">        code_signing_args &#x3D; [</span><br><span class="line">          &quot;-i&#x3D;&quot; + ios_code_signing_identity,</span><br><span class="line">          &quot;-b&#x3D;&quot; + rebase_path(</span><br><span class="line">              &quot;$target_gen_dir&#x2F;$app_name&quot;, root_build_dir),</span><br><span class="line">          &quot;-e&#x3D;&quot; + rebase_path(</span><br><span class="line">              invoker.entitlements_path, root_build_dir),</span><br><span class="line">          &quot;-e&#x3D;&quot; + rebase_path(</span><br><span class="line">              &quot;$target_gen_dir&#x2F;$app_name.xcent&quot;, root_build_dir),</span><br><span class="line">          rebase_path(bundle_root_dir, root_build_dir),</span><br><span class="line">        ]</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        deps +&#x3D; [ &quot;:$&#123;app_name&#125;_bundle_executable&quot; ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="executable-Declare-an-executable-target"><a href="#executable-Declare-an-executable-target" class="headerlink" title="executable: Declare an executable target."></a><a name="func_executable"></a><strong>executable</strong>: Declare an executable target.</h3><h4 id="Language-and-compilation"><a href="#Language-and-compilation" class="headerlink" title="Language and compilation"></a><strong>Language and compilation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>

<h4 id="Variables-4"><a href="#Variables-4" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name</span><br></pre></td></tr></table></figure>
<h3 id="generated-file-Declare-a-generated-file-target"><a href="#generated-file-Declare-a-generated-file-target" class="headerlink" title="generated_file: Declare a generated_file target."></a><a name="func_generated_file"></a><strong>generated_file</strong>: Declare a generated_file target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Writes data value(s) to disk on resolution. This target type mirrors some</span><br><span class="line">functionality of the write_file() function, but also provides the ability to</span><br><span class="line">collect metadata from its dependencies on resolution rather than writing out</span><br><span class="line">at parse time.</span><br><span class="line"></span><br><span class="line">The &#96;outputs&#96; variable is required to be a list with a single element,</span><br><span class="line">specifying the intended location of the output file.</span><br><span class="line"></span><br><span class="line">The &#96;output_conversion&#96; variable specified the format to write the</span><br><span class="line">value. See &#96;gn help io_conversion&#96;.</span><br><span class="line"></span><br><span class="line">One of &#96;contents&#96; or &#96;data_keys&#96; must be specified; use of &#96;data&#96; will write</span><br><span class="line">the contents of that value to file, while use of &#96;data_keys&#96; will trigger a</span><br><span class="line">metadata collection walk based on the dependencies of the target and the</span><br><span class="line">optional values of the &#96;rebase&#96; and &#96;walk_keys&#96; variables. See</span><br><span class="line">&#96;gn help metadata&#96;.</span><br><span class="line"></span><br><span class="line">Collected metadata, if specified, will be returned in postorder of</span><br><span class="line">dependencies. See the example for details.</span><br></pre></td></tr></table></figure>

<h4 id="Example-metadata-collection"><a href="#Example-metadata-collection" class="headerlink" title="Example (metadata collection)"></a><strong>Example (metadata collection)</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">Given the following targets defined in &#x2F;&#x2F;base&#x2F;BUILD.gn, where A depends on B</span><br><span class="line">and B depends on C and D:</span><br><span class="line"></span><br><span class="line">  group(&quot;a&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      doom_melon &#x3D; [ &quot;enable&quot; ]</span><br><span class="line">      my_files &#x3D; [ &quot;foo.cpp&quot; ]</span><br><span class="line"></span><br><span class="line">      # Note: this is functionally equivalent to not defining &#96;my_barrier&#96;</span><br><span class="line">      # at all in this target&#39;s metadata.</span><br><span class="line">      my_barrier &#x3D; [ &quot;&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:b&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;b&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;bar.cpp&quot; ]</span><br><span class="line">      my_barrier &#x3D; [ &quot;:c&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:c&quot;, &quot;:d&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;c&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      doom_melon &#x3D; [ &quot;disable&quot; ]</span><br><span class="line">      my_files &#x3D; [ &quot;baz.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;d&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;missing.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">If the following generated_file target is defined:</span><br><span class="line"></span><br><span class="line">  generated_file(&quot;my_files_metadata&quot;) &#123;</span><br><span class="line">    outputs &#x3D; [ &quot;$root_build_dir&#x2F;my_files.json&quot; ]</span><br><span class="line">    data_keys &#x3D; [ &quot;my_files&quot; ]</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;&#x2F;&#x2F;base:a&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">The following will be written to &quot;$root_build_dir&#x2F;my_files.json&quot; (less the</span><br><span class="line">comments):</span><br><span class="line">  [</span><br><span class="line">    &quot;baz.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:c via &#x2F;&#x2F;base:b</span><br><span class="line">    &quot;missing.cpp&quot;  &#x2F;&#x2F; from &#x2F;&#x2F;base:d via &#x2F;&#x2F;base:b</span><br><span class="line">    &quot;bar.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:b via &#x2F;&#x2F;base:a</span><br><span class="line">    &quot;foo.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:a</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">Alternatively, as an example of using walk_keys, if the following</span><br><span class="line">generated_file target is defined:</span><br><span class="line"></span><br><span class="line">generated_file(&quot;my_files_metadata&quot;) &#123;</span><br><span class="line">  outputs &#x3D; [ &quot;$root_build_dir&#x2F;my_files.json&quot; ]</span><br><span class="line">  data_keys &#x3D; [ &quot;my_files&quot; ]</span><br><span class="line">  walk_keys &#x3D; [ &quot;my_barrier&quot; ]</span><br><span class="line"></span><br><span class="line">  deps &#x3D; [ &quot;&#x2F;&#x2F;base:a&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">The following will be written to &quot;$root_build_dir&#x2F;my_files.json&quot; (again less</span><br><span class="line">the comments):</span><br><span class="line">  [</span><br><span class="line">    &quot;baz.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:c via &#x2F;&#x2F;base:b</span><br><span class="line">    &quot;bar.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:b via &#x2F;&#x2F;base:a</span><br><span class="line">    &quot;foo.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:a</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">If &#96;rebase&#96; is used in the following generated_file target:</span><br><span class="line"></span><br><span class="line">generated_file(&quot;my_files_metadata&quot;) &#123;</span><br><span class="line">  outputs &#x3D; [ &quot;$root_build_dir&#x2F;my_files.json&quot; ]</span><br><span class="line">  data_keys &#x3D; [ &quot;my_files&quot; ]</span><br><span class="line">  walk_keys &#x3D; [ &quot;my_barrier&quot; ]</span><br><span class="line">  rebase &#x3D; root_build_dir</span><br><span class="line"></span><br><span class="line">  deps &#x3D; [ &quot;&#x2F;&#x2F;base:a&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">The following will be written to &quot;$root_build_dir&#x2F;my_files.json&quot; (again less</span><br><span class="line">the comments) (assuming root_build_dir &#x3D; &quot;&#x2F;&#x2F;out&quot;):</span><br><span class="line">  [</span><br><span class="line">    &quot;..&#x2F;base&#x2F;baz.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:c via &#x2F;&#x2F;base:b</span><br><span class="line">    &quot;..&#x2F;base&#x2F;bar.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:b via &#x2F;&#x2F;base:a</span><br><span class="line">    &quot;..&#x2F;base&#x2F;foo.cpp&quot;,  &#x2F;&#x2F; from &#x2F;&#x2F;base:a</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<h4 id="Variables-5"><a href="#Variables-5" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">contents</span><br><span class="line">data_keys</span><br><span class="line">rebase</span><br><span class="line">walk_keys</span><br><span class="line">output_conversion</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br></pre></td></tr></table></figure>
<h3 id="group-Declare-a-named-group-of-targets"><a href="#group-Declare-a-named-group-of-targets" class="headerlink" title="group: Declare a named group of targets."></a><a name="func_group"></a><strong>group</strong>: Declare a named group of targets.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This target type allows you to create meta-targets that just collect a set of</span><br><span class="line">dependencies into one named target. Groups can additionally specify configs</span><br><span class="line">that apply to their dependents.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-6"><a href="#Variables-6" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br></pre></td></tr></table></figure>

<h4 id="Example-6"><a href="#Example-6" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">group(&quot;all&quot;) &#123;</span><br><span class="line">  deps &#x3D; [</span><br><span class="line">    &quot;&#x2F;&#x2F;project:runner&quot;,</span><br><span class="line">    &quot;&#x2F;&#x2F;project:unit_tests&quot;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="loadable-module-Declare-a-loadable-module-target"><a href="#loadable-module-Declare-a-loadable-module-target" class="headerlink" title="loadable_module: Declare a loadable module target."></a><a name="func_loadable_module"></a><strong>loadable_module</strong>: Declare a loadable module target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">This target type allows you to create an object file that is (and can only</span><br><span class="line">be) loaded and unloaded at runtime.</span><br><span class="line"></span><br><span class="line">A loadable module will be specified on the linker line for targets listing</span><br><span class="line">the loadable module in its &quot;deps&quot;. If you don&#39;t want this (if you don&#39;t need</span><br><span class="line">to dynamically load the library at runtime), then you should use a</span><br><span class="line">&quot;shared_library&quot; target type instead.</span><br></pre></td></tr></table></figure>

<h4 id="Language-and-compilation-1"><a href="#Language-and-compilation-1" class="headerlink" title="Language and compilation"></a><strong>Language and compilation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>

<h4 id="Variables-7"><a href="#Variables-7" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name, crate_type</span><br></pre></td></tr></table></figure>
<h3 id="rust-library-Declare-a-Rust-library-target"><a href="#rust-library-Declare-a-Rust-library-target" class="headerlink" title="rust_library: Declare a Rust library target."></a><a name="func_rust_library"></a><strong>rust_library</strong>: Declare a Rust library target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A Rust library is an archive containing additional rust-c provided metadata.</span><br><span class="line">These are the files produced by the rustc compiler with the &#96;.rlib&#96;</span><br><span class="line">extension, and are the intermediate step for most Rust-based binaries.</span><br></pre></td></tr></table></figure>

<h4 id="Language-and-compilation-2"><a href="#Language-and-compilation-2" class="headerlink" title="Language and compilation"></a><strong>Language and compilation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>

<h4 id="Variables-8"><a href="#Variables-8" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name</span><br></pre></td></tr></table></figure>
<h3 id="rust-proc-macro-Declare-a-Rust-procedural-macro-target"><a href="#rust-proc-macro-Declare-a-Rust-procedural-macro-target" class="headerlink" title="rust_proc_macro: Declare a Rust procedural macro target."></a><a name="func_rust_proc_macro"></a><strong>rust_proc_macro</strong>: Declare a Rust procedural macro target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A Rust procedural macro allows creating syntax extensions as execution of a</span><br><span class="line">function. They are compiled as dynamic libraries and used by the compiler at</span><br><span class="line">runtime.</span><br><span class="line"></span><br><span class="line">Their use is the same as of other Rust libraries, but their build has some</span><br><span class="line">additional restrictions in terms of supported flags.</span><br></pre></td></tr></table></figure>

<h4 id="Language-and-compilation-3"><a href="#Language-and-compilation-3" class="headerlink" title="Language and compilation"></a><strong>Language and compilation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>

<h4 id="Variables-9"><a href="#Variables-9" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name</span><br></pre></td></tr></table></figure>
<h3 id="shared-library-Declare-a-shared-library-target"><a href="#shared-library-Declare-a-shared-library-target" class="headerlink" title="shared_library: Declare a shared library target."></a><a name="func_shared_library"></a><strong>shared_library</strong>: Declare a shared library target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A shared library will be specified on the linker line for targets listing the</span><br><span class="line">shared library in its &quot;deps&quot;. If you don&#39;t want this (say you dynamically</span><br><span class="line">load the library at runtime), then you should depend on the shared library</span><br><span class="line">via &quot;data_deps&quot; or, on Darwin platforms, use a &quot;loadable_module&quot; target type</span><br><span class="line">instead.</span><br></pre></td></tr></table></figure>

<h4 id="Language-and-compilation-4"><a href="#Language-and-compilation-4" class="headerlink" title="Language and compilation"></a><strong>Language and compilation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>

<h4 id="Variables-10"><a href="#Variables-10" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name, crate_type</span><br></pre></td></tr></table></figure>
<h3 id="source-set-Declare-a-source-set-target"><a href="#source-set-Declare-a-source-set-target" class="headerlink" title="source_set: Declare a source set target."></a><a name="func_source_set"></a><strong>source_set</strong>: Declare a source set target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Only C-language source sets are supported at the moment.</span><br></pre></td></tr></table></figure>

<h4 id="C-language-source-sets"><a href="#C-language-source-sets" class="headerlink" title="C-language source_sets"></a><strong>C-language source_sets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">A source set is a collection of sources that get compiled, but are not linked</span><br><span class="line">to produce any kind of library. Instead, the resulting object files are</span><br><span class="line">implicitly added to the linker line of all targets that depend on the source</span><br><span class="line">set.</span><br><span class="line"></span><br><span class="line">In most cases, a source set will behave like a static library, except no</span><br><span class="line">actual library file will be produced. This will make the build go a little</span><br><span class="line">faster by skipping creation of a large static library, while maintaining the</span><br><span class="line">organizational benefits of focused build targets.</span><br><span class="line"></span><br><span class="line">The main difference between a source set and a static library is around</span><br><span class="line">handling of exported symbols. Most linkers assume declaring a function</span><br><span class="line">exported means exported from the static library. The linker can then do dead</span><br><span class="line">code elimination to delete code not reachable from exported functions.</span><br><span class="line"></span><br><span class="line">A source set will not do this code elimination since there is no link step.</span><br><span class="line">This allows you to link many source sets into a shared library and have the</span><br><span class="line">&quot;exported symbol&quot; notation indicate &quot;export from the final shared library and</span><br><span class="line">not from the intermediate targets.&quot; There is no way to express this concept</span><br><span class="line">when linking multiple static libraries into a shared library.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-11"><a href="#Variables-11" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br></pre></td></tr></table></figure>
<h3 id="static-library-Declare-a-static-library-target"><a href="#static-library-Declare-a-static-library-target" class="headerlink" title="static_library: Declare a static library target."></a><a name="func_static_library"></a><strong>static_library</strong>: Declare a static library target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Make a &quot;.a&quot; &#x2F; &quot;.lib&quot; file.</span><br><span class="line"></span><br><span class="line">If you only need the static library for intermediate results in the build,</span><br><span class="line">you should consider a source_set instead since it will skip the (potentially</span><br><span class="line">slow) step of creating the intermediate library file.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-12"><a href="#Variables-12" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">complete_static_lib</span><br><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Deps: data_deps, deps, public_deps</span><br><span class="line">Dependent configs: all_dependent_configs, public_configs</span><br><span class="line">General: check_includes, configs, data, friend, inputs, metadata,</span><br><span class="line">         output_name, output_extension, public, sources, testonly,</span><br><span class="line">         visibility</span><br><span class="line">Rust variables: aliased_deps, crate_root, crate_name</span><br><span class="line"></span><br><span class="line">The tools and commands used to create this target type will be</span><br><span class="line">determined by the source files in its sources. Targets containing</span><br><span class="line">multiple compiler-incompatible languages are not allowed (e.g. a</span><br><span class="line">target containing both C and C++ sources is acceptable, but a</span><br><span class="line">target containing C and Rust sources is not).</span><br></pre></td></tr></table></figure>
<h3 id="target-Declare-an-target-with-the-given-programmatic-type"><a href="#target-Declare-an-target-with-the-given-programmatic-type" class="headerlink" title="target: Declare an target with the given programmatic type."></a><a name="func_target"></a><strong>target</strong>: Declare an target with the given programmatic type.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">target(target_type_string, target_name_string) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">The target() function is a way to invoke a built-in target or template with a</span><br><span class="line">type determined at runtime. This is useful for cases where the type of a</span><br><span class="line">target might not be known statically.</span><br><span class="line"></span><br><span class="line">Only templates and built-in target functions are supported for the</span><br><span class="line">target_type_string parameter. Arbitrary functions, configs, and toolchains</span><br><span class="line">are not supported.</span><br><span class="line"></span><br><span class="line">The call:</span><br><span class="line">  target(&quot;source_set&quot;, &quot;doom_melon&quot;) &#123;</span><br><span class="line">Is equivalent to:</span><br><span class="line">  source_set(&quot;doom_melon&quot;) &#123;</span><br></pre></td></tr></table></figure>

<h4 id="Example-7"><a href="#Example-7" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if (foo_build_as_shared) &#123;</span><br><span class="line">  my_type &#x3D; &quot;shared_library&quot;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  my_type &#x3D; &quot;source_set&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target(my_type, &quot;foo&quot;) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Buildfile-functions"><a href="#Buildfile-functions" class="headerlink" title="Buildfile functions"></a><a name="functions"></a>Buildfile functions</h2><h3 id="assert-Assert-an-expression-is-true-at-generation-time"><a href="#assert-Assert-an-expression-is-true-at-generation-time" class="headerlink" title="assert: Assert an expression is true at generation time."></a><a name="func_assert"></a><strong>assert</strong>: Assert an expression is true at generation time.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">assert(&lt;condition&gt; [, &lt;error string&gt;])</span><br><span class="line"></span><br><span class="line">If the condition is false, the build will fail with an error. If the</span><br><span class="line">optional second argument is provided, that string will be printed</span><br><span class="line">with the error message.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-8"><a href="#Examples-8" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assert(is_win)</span><br><span class="line">assert(defined(sources), &quot;Sources must be defined&quot;);</span><br></pre></td></tr></table></figure>
<h3 id="config-Defines-a-configuration-object"><a href="#config-Defines-a-configuration-object" class="headerlink" title="config: Defines a configuration object."></a><a name="func_config"></a><strong>config</strong>: Defines a configuration object.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Configuration objects can be applied to targets and specify sets of compiler</span><br><span class="line">flags, includes, defines, etc. They provide a way to conveniently group sets</span><br><span class="line">of this configuration information.</span><br><span class="line"></span><br><span class="line">A config is referenced by its label just like a target.</span><br><span class="line"></span><br><span class="line">The values in a config are additive only. If you want to remove a flag you</span><br><span class="line">need to remove the corresponding config that sets it. The final set of flags,</span><br><span class="line">defines, etc. for a target is generated in this order:</span><br><span class="line"></span><br><span class="line"> 1. The values specified directly on the target (rather than using a config.</span><br><span class="line"> 2. The configs specified in the target&#39;s &quot;configs&quot; list, in order.</span><br><span class="line"> 3. Public_configs from a breadth-first traversal of the dependency tree in</span><br><span class="line">    the order that the targets appear in &quot;deps&quot;.</span><br><span class="line"> 4. All dependent configs from a breadth-first traversal of the dependency</span><br><span class="line">    tree in the order that the targets appear in &quot;deps&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="More-background"><a href="#More-background" class="headerlink" title="More background"></a><strong>More background</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Configs solve a problem where the build system needs to have a higher-level</span><br><span class="line">understanding of various compiler settings. For example, some compiler flags</span><br><span class="line">have to appear in a certain order relative to each other, some settings like</span><br><span class="line">defines and flags logically go together, and the build system needs to</span><br><span class="line">de-duplicate flags even though raw command-line parameters can&#39;t always be</span><br><span class="line">operated on in that way.</span><br><span class="line"></span><br><span class="line">The config gives a name to a group of settings that can then be reasoned</span><br><span class="line">about by GN. GN can know that configs with the same label are the same thing</span><br><span class="line">so can be de-duplicated. It allows related settings to be grouped so they</span><br><span class="line">are added or removed as a unit. And it allows targets to refer to settings</span><br><span class="line">with conceptual names (&quot;no_rtti&quot;, &quot;enable_exceptions&quot;, etc.) rather than</span><br><span class="line">having to hard-coding every compiler&#39;s flags each time they are referred to.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-valid-in-a-config-definition"><a href="#Variables-valid-in-a-config-definition" class="headerlink" title="Variables valid in a config definition"></a><strong>Variables valid in a config definition</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flags: cflags, cflags_c, cflags_cc, cflags_objc, cflags_objcc,</span><br><span class="line">       asmflags, defines, include_dirs, inputs, ldflags, lib_dirs,</span><br><span class="line">       libs, precompiled_header, precompiled_source, rustflags,</span><br><span class="line">       rustenv, swiftflags</span><br><span class="line">Nested configs: configs</span><br></pre></td></tr></table></figure>

<h4 id="Variables-on-a-target-used-to-apply-configs"><a href="#Variables-on-a-target-used-to-apply-configs" class="headerlink" title="Variables on a target used to apply configs"></a><strong>Variables on a target used to apply configs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">all_dependent_configs, configs, public_configs</span><br></pre></td></tr></table></figure>

<h4 id="Example-8"><a href="#Example-8" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">config(&quot;myconfig&quot;) &#123;</span><br><span class="line">  include_dirs &#x3D; [ &quot;include&#x2F;common&quot; ]</span><br><span class="line">  defines &#x3D; [ &quot;ENABLE_DOOM_MELON&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">executable(&quot;mything&quot;) &#123;</span><br><span class="line">  configs &#x3D; [ &quot;:myconfig&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="declare-args-Declare-build-arguments"><a href="#declare-args-Declare-build-arguments" class="headerlink" title="declare_args: Declare build arguments."></a><a name="func_declare_args"></a><strong>declare_args</strong>: Declare build arguments.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Introduces the given arguments into the current scope. If they are not</span><br><span class="line">specified on the command line or in a toolchain&#39;s arguments, the default</span><br><span class="line">values given in the declare_args block will be used. However, these defaults</span><br><span class="line">will not override command-line values.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help buildargs&quot; for an overview.</span><br><span class="line"></span><br><span class="line">The precise behavior of declare args is:</span><br><span class="line"></span><br><span class="line"> 1. The declare_args() block executes. Any variable defined in the enclosing</span><br><span class="line">    scope is available for reading, but any variable defined earlier in</span><br><span class="line">    the current scope is not (since the overrides haven&#39;t been applied yet).</span><br><span class="line"></span><br><span class="line"> 2. At the end of executing the block, any variables set within that scope</span><br><span class="line">    are saved, with the values specified in the block used as the &quot;default value&quot;</span><br><span class="line">    for that argument. Once saved, these variables are available for override</span><br><span class="line">    via args.gn.</span><br><span class="line"></span><br><span class="line"> 3. User-defined overrides are applied. Anything set in &quot;gn args&quot; now</span><br><span class="line">    overrides any default values. The resulting set of variables is promoted</span><br><span class="line">    to be readable from the following code in the file.</span><br><span class="line"></span><br><span class="line">This has some ramifications that may not be obvious:</span><br><span class="line"></span><br><span class="line">  - You should not perform difficult work inside a declare_args block since</span><br><span class="line">    this only sets a default value that may be discarded. In particular,</span><br><span class="line">    don&#39;t use the result of exec_script() to set the default value. If you</span><br><span class="line">    want to have a script-defined default, set some default &quot;undefined&quot; value</span><br><span class="line">    like [], &quot;&quot;, or -1, and after the declare_args block, call exec_script if</span><br><span class="line">    the value is unset by the user.</span><br><span class="line"></span><br><span class="line">  - Because you cannot read the value of a variable defined in the same</span><br><span class="line">    block, if you need to make the default value of one arg depend</span><br><span class="line">    on the possibly-overridden value of another, write two separate</span><br><span class="line">    declare_args() blocks:</span><br><span class="line"></span><br><span class="line">      declare_args() &#123;</span><br><span class="line">        enable_foo &#x3D; true</span><br><span class="line">      &#125;</span><br><span class="line">      declare_args() &#123;</span><br><span class="line">        # Bar defaults to same user-overridden state as foo.</span><br><span class="line">        enable_bar &#x3D; enable_foo</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Example-9"><a href="#Example-9" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">declare_args() &#123;</span><br><span class="line">  enable_teleporter &#x3D; true</span><br><span class="line">  enable_doom_melon &#x3D; false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">If you want to override the (default disabled) Doom Melon:</span><br><span class="line">  gn --args&#x3D;&quot;enable_doom_melon&#x3D;true enable_teleporter&#x3D;true&quot;</span><br><span class="line">This also sets the teleporter, but it&#39;s already defaulted to on so it will</span><br><span class="line">have no effect.</span><br></pre></td></tr></table></figure>
<h3 id="defined-Returns-whether-an-identifier-is-defined"><a href="#defined-Returns-whether-an-identifier-is-defined" class="headerlink" title="defined: Returns whether an identifier is defined."></a><a name="func_defined"></a><strong>defined</strong>: Returns whether an identifier is defined.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Returns true if the given argument is defined. This is most useful in</span><br><span class="line">templates to assert that the caller set things up properly.</span><br><span class="line"></span><br><span class="line">You can pass an identifier:</span><br><span class="line">  defined(foo)</span><br><span class="line">which will return true or false depending on whether foo is defined in the</span><br><span class="line">current scope.</span><br><span class="line"></span><br><span class="line">You can also check a named scope:</span><br><span class="line">  defined(foo.bar)</span><br><span class="line">which will return true or false depending on whether bar is defined in the</span><br><span class="line">named scope foo. It will throw an error if foo is not defined or is not a</span><br><span class="line">scope.</span><br></pre></td></tr></table></figure>

<h4 id="Example-10"><a href="#Example-10" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">template(&quot;mytemplate&quot;) &#123;</span><br><span class="line">  # To help users call this template properly...</span><br><span class="line">  assert(defined(invoker.sources), &quot;Sources must be defined&quot;)</span><br><span class="line"></span><br><span class="line">  # If we want to accept an optional &quot;values&quot; argument, we don&#39;t</span><br><span class="line">  # want to dereference something that may not be defined.</span><br><span class="line">  if (defined(invoker.values)) &#123;</span><br><span class="line">    values &#x3D; invoker.values</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    values &#x3D; &quot;some default value&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="exec-script-Synchronously-run-a-script-and-return-the-output"><a href="#exec-script-Synchronously-run-a-script-and-return-the-output" class="headerlink" title="exec_script: Synchronously run a script and return the output."></a><a name="func_exec_script"></a><strong>exec_script</strong>: Synchronously run a script and return the output.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">exec_script(filename,</span><br><span class="line">            arguments &#x3D; [],</span><br><span class="line">            input_conversion &#x3D; &quot;&quot;,</span><br><span class="line">            file_dependencies &#x3D; [])</span><br><span class="line"></span><br><span class="line">Runs the given script, returning the stdout of the script. The build</span><br><span class="line">generation will fail if the script does not exist or returns a nonzero exit</span><br><span class="line">code.</span><br><span class="line"></span><br><span class="line">The current directory when executing the script will be the root build</span><br><span class="line">directory. If you are passing file names, you will want to use the</span><br><span class="line">rebase_path() function to make file names relative to this path (see &quot;gn help</span><br><span class="line">rebase_path&quot;).</span><br><span class="line"></span><br><span class="line">The default script interpreter is Python (&quot;python&quot; on POSIX, &quot;python.exe&quot; or</span><br><span class="line">&quot;python.bat&quot; on Windows). This can be configured by the script_executable</span><br><span class="line">variable, see &quot;gn help dotfile&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-2"><a href="#Arguments-2" class="headerlink" title="Arguments:"></a><strong>Arguments</strong>:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">filename:</span><br><span class="line">    File name of script to execute. Non-absolute names will be treated as</span><br><span class="line">    relative to the current build file.</span><br><span class="line"></span><br><span class="line">arguments:</span><br><span class="line">    A list of strings to be passed to the script as arguments. May be</span><br><span class="line">    unspecified or the empty list which means no arguments.</span><br><span class="line"></span><br><span class="line">input_conversion:</span><br><span class="line">    Controls how the file is read and parsed. See &#96;gn help io_conversion&#96;.</span><br><span class="line"></span><br><span class="line">    If unspecified, defaults to the empty string which causes the script</span><br><span class="line">    result to be discarded. exec script will return None.</span><br><span class="line"></span><br><span class="line">dependencies:</span><br><span class="line">    (Optional) A list of files that this script reads or otherwise depends</span><br><span class="line">    on. These dependencies will be added to the build result such that if any</span><br><span class="line">    of them change, the build will be regenerated and the script will be</span><br><span class="line">    re-run.</span><br><span class="line"></span><br><span class="line">    The script itself will be an implicit dependency so you do not need to</span><br><span class="line">    list it.</span><br></pre></td></tr></table></figure>

<h4 id="Example-11"><a href="#Example-11" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">all_lines &#x3D; exec_script(</span><br><span class="line">    &quot;myscript.py&quot;, [some_input], &quot;list lines&quot;,</span><br><span class="line">    [ rebase_path(&quot;data_file.txt&quot;, root_build_dir) ])</span><br><span class="line"></span><br><span class="line"># This example just calls the script with no arguments and discards the</span><br><span class="line"># result.</span><br><span class="line">exec_script(&quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;myscript.py&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="filter-exclude-Remove-values-that-match-a-set-of-patterns"><a href="#filter-exclude-Remove-values-that-match-a-set-of-patterns" class="headerlink" title="filter_exclude: Remove values that match a set of patterns."></a><a name="func_filter_exclude"></a><strong>filter_exclude</strong>: Remove values that match a set of patterns.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">filter_exclude(values, exclude_patterns)</span><br><span class="line"></span><br><span class="line">The argument values must be a list of strings.</span><br><span class="line"></span><br><span class="line">The argument exclude_patterns must be a list of file patterns (see</span><br><span class="line">&quot;gn help file_pattern&quot;). Any elements in values matching at least one</span><br><span class="line">of those patterns will be excluded.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-9"><a href="#Examples-9" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">values &#x3D; [ &quot;foo.cc&quot;, &quot;foo.h&quot;, &quot;foo.proto&quot; ]</span><br><span class="line">result &#x3D; filter_exclude(values, [ &quot;*.proto&quot; ])</span><br><span class="line"># result will be [ &quot;foo.cc&quot;, &quot;foo.h&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="filter-include-Remove-values-that-do-not-match-a-set-of-patterns"><a href="#filter-include-Remove-values-that-do-not-match-a-set-of-patterns" class="headerlink" title="filter_include: Remove values that do not match a set of patterns."></a><a name="func_filter_include"></a><strong>filter_include</strong>: Remove values that do not match a set of patterns.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">filter_include(values, include_patterns)</span><br><span class="line"></span><br><span class="line">The argument values must be a list of strings.</span><br><span class="line"></span><br><span class="line">The argument include_patterns must be a list of file patterns (see</span><br><span class="line">&quot;gn help file_pattern&quot;). Only elements from values matching at least</span><br><span class="line">one of the pattern will be included.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-10"><a href="#Examples-10" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">values &#x3D; [ &quot;foo.cc&quot;, &quot;foo.h&quot;, &quot;foo.proto&quot; ]</span><br><span class="line">result &#x3D; filter_include(values, [ &quot;*.proto&quot; ])</span><br><span class="line"># result will be [ &quot;foo.proto&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="foreach-Iterate-over-a-list"><a href="#foreach-Iterate-over-a-list" class="headerlink" title="foreach: Iterate over a list."></a><a name="func_foreach"></a><strong>foreach</strong>: Iterate over a list.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  foreach(&lt;loop_var&gt;, &lt;list&gt;) &#123;</span><br><span class="line">    &lt;loop contents&gt;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">Executes the loop contents block over each item in the list, assigning the</span><br><span class="line">loop_var to each item in sequence. The &lt;loop_var&gt; will be a copy so assigning</span><br><span class="line">to it will not mutate the list. The loop will iterate over a copy of &lt;list&gt;</span><br><span class="line">so mutating it inside the loop will not affect iteration.</span><br><span class="line"></span><br><span class="line">The block does not introduce a new scope, so that variable assignments inside</span><br><span class="line">the loop will be visible once the loop terminates.</span><br><span class="line"></span><br><span class="line">The loop variable will temporarily shadow any existing variables with the</span><br><span class="line">same name for the duration of the loop. After the loop terminates the loop</span><br><span class="line">variable will no longer be in scope, and the previous value (if any) will be</span><br><span class="line">restored.</span><br></pre></td></tr></table></figure>

<h4 id="Example-12"><a href="#Example-12" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mylist &#x3D; [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ]</span><br><span class="line">foreach(i, mylist) &#123;</span><br><span class="line">  print(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Prints:</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>
<h3 id="forward-variables-from-Copies-variables-from-a-different-scope"><a href="#forward-variables-from-Copies-variables-from-a-different-scope" class="headerlink" title="forward_variables_from: Copies variables from a different scope."></a><a name="func_forward_variables_from"></a><strong>forward_variables_from</strong>: Copies variables from a different scope.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">forward_variables_from(from_scope, variable_list_or_star,</span><br><span class="line">                       variable_to_not_forward_list &#x3D; [])</span><br><span class="line"></span><br><span class="line">Copies the given variables from the given scope to the local scope if they</span><br><span class="line">exist. This is normally used in the context of templates to use the values of</span><br><span class="line">variables defined in the template invocation to a template-defined target.</span><br><span class="line"></span><br><span class="line">The variables in the given variable_list will be copied if they exist in the</span><br><span class="line">given scope or any enclosing scope. If they do not exist, nothing will happen</span><br><span class="line">and they be left undefined in the current scope.</span><br><span class="line"></span><br><span class="line">As a special case, if the variable_list is a string with the value of &quot;*&quot;,</span><br><span class="line">all variables from the given scope will be copied. &quot;*&quot; only copies variables</span><br><span class="line">set directly on the from_scope, not enclosing ones. Otherwise it would</span><br><span class="line">duplicate all global variables.</span><br><span class="line"></span><br><span class="line">When an explicit list of variables is supplied, if the variable exists in the</span><br><span class="line">current (destination) scope already, an error will be thrown. If &quot;*&quot; is</span><br><span class="line">specified, variables in the current scope will be clobbered (the latter is</span><br><span class="line">important because most targets have an implicit configs list, which means it</span><br><span class="line">wouldn&#39;t work at all if it didn&#39;t clobber).</span><br><span class="line"></span><br><span class="line">If variables_to_not_forward_list is non-empty, then it must contains a list</span><br><span class="line">of variable names that will not be forwarded. This is mostly useful when</span><br><span class="line">variable_list_or_star has a value of &quot;*&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-11"><a href="#Examples-11" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"># forward_variables_from(invoker, [&quot;foo&quot;])</span><br><span class="line"># is equivalent to:</span><br><span class="line">assert(!defined(foo))</span><br><span class="line">if (defined(invoker.foo)) &#123;</span><br><span class="line">  foo &#x3D; invoker.foo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># This is a common action template. It would invoke a script with some given</span><br><span class="line"># parameters, and wants to use the various types of deps and the visibility</span><br><span class="line"># from the invoker if it&#39;s defined. It also injects an additional dependency</span><br><span class="line"># to all targets.</span><br><span class="line">template(&quot;my_test&quot;) &#123;</span><br><span class="line">  action(target_name) &#123;</span><br><span class="line">    forward_variables_from(invoker, [ &quot;data_deps&quot;, &quot;deps&quot;,</span><br><span class="line">                                      &quot;public_deps&quot;, &quot;visibility&quot;])</span><br><span class="line">    # Add our test code to the dependencies.</span><br><span class="line">    # &quot;deps&quot; may or may not be defined at this point.</span><br><span class="line">    if (defined(deps)) &#123;</span><br><span class="line">      deps +&#x3D; [ &quot;&#x2F;&#x2F;tools&#x2F;doom_melon&quot; ]</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      deps &#x3D; [ &quot;&#x2F;&#x2F;tools&#x2F;doom_melon&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># This is a template around a target whose type depends on a global variable.</span><br><span class="line"># It forwards all values from the invoker.</span><br><span class="line">template(&quot;my_wrapper&quot;) &#123;</span><br><span class="line">  target(my_wrapper_target_type, target_name) &#123;</span><br><span class="line">    forward_variables_from(invoker, &quot;*&quot;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># A template that wraps another. It adds behavior based on one</span><br><span class="line"># variable, and forwards all others to the nested target.</span><br><span class="line">template(&quot;my_ios_test_app&quot;) &#123;</span><br><span class="line">  ios_test_app(target_name) &#123;</span><br><span class="line">    forward_variables_from(invoker, &quot;*&quot;, [&quot;test_bundle_name&quot;])</span><br><span class="line">    if (!defined(extra_substitutions)) &#123;</span><br><span class="line">      extra_substitutions &#x3D; []</span><br><span class="line">    &#125;</span><br><span class="line">    extra_substitutions +&#x3D; [ &quot;BUNDLE_ID_TEST_NAME&#x3D;$test_bundle_name&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="get-label-info-Get-an-attribute-from-a-target’s-label"><a href="#get-label-info-Get-an-attribute-from-a-target’s-label" class="headerlink" title="get_label_info: Get an attribute from a target’s label."></a><a name="func_get_label_info"></a><strong>get_label_info</strong>: Get an attribute from a target’s label.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">get_label_info(target_label, what)</span><br><span class="line"></span><br><span class="line">Given the label of a target, returns some attribute of that target. The</span><br><span class="line">target need not have been previously defined in the same file, since none of</span><br><span class="line">the attributes depend on the actual target definition, only the label itself.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help get_target_outputs&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Possible-values-for-the-“what”-parameter"><a href="#Possible-values-for-the-“what”-parameter" class="headerlink" title="Possible values for the “what” parameter"></a><strong>Possible values for the “what” parameter</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&quot;name&quot;</span><br><span class="line">    The short name of the target. This will match the value of the</span><br><span class="line">    &quot;target_name&quot; variable inside that target&#39;s declaration. For the label</span><br><span class="line">    &quot;&#x2F;&#x2F;foo&#x2F;bar:baz&quot; this will return &quot;baz&quot;.</span><br><span class="line"></span><br><span class="line">&quot;dir&quot;</span><br><span class="line">    The directory containing the target&#39;s definition, with no slash at the</span><br><span class="line">    end. For the label &quot;&#x2F;&#x2F;foo&#x2F;bar:baz&quot; this will return &quot;&#x2F;&#x2F;foo&#x2F;bar&quot;.</span><br><span class="line"></span><br><span class="line">&quot;target_gen_dir&quot;</span><br><span class="line">    The generated file directory for the target. This will match the value of</span><br><span class="line">    the &quot;target_gen_dir&quot; variable when inside that target&#39;s declaration.</span><br><span class="line"></span><br><span class="line">&quot;root_gen_dir&quot;</span><br><span class="line">    The root of the generated file tree for the target. This will match the</span><br><span class="line">    value of the &quot;root_gen_dir&quot; variable when inside that target&#39;s</span><br><span class="line">    declaration.</span><br><span class="line"></span><br><span class="line">&quot;target_out_dir</span><br><span class="line">    The output directory for the target. This will match the value of the</span><br><span class="line">    &quot;target_out_dir&quot; variable when inside that target&#39;s declaration.</span><br><span class="line"></span><br><span class="line">&quot;root_out_dir&quot;</span><br><span class="line">    The root of the output file tree for the target. This will match the</span><br><span class="line">    value of the &quot;root_out_dir&quot; variable when inside that target&#39;s</span><br><span class="line">    declaration.</span><br><span class="line"></span><br><span class="line">&quot;label_no_toolchain&quot;</span><br><span class="line">    The fully qualified version of this label, not including the toolchain.</span><br><span class="line">    For the input &quot;:bar&quot; it might return &quot;&#x2F;&#x2F;foo:bar&quot;.</span><br><span class="line"></span><br><span class="line">&quot;label_with_toolchain&quot;</span><br><span class="line">    The fully qualified version of this label, including the toolchain. For</span><br><span class="line">    the input &quot;:bar&quot; it might return &quot;&#x2F;&#x2F;foo:bar(&#x2F;&#x2F;toolchain:x64)&quot;.</span><br><span class="line"></span><br><span class="line">&quot;toolchain&quot;</span><br><span class="line">    The label of the toolchain. This will match the value of the</span><br><span class="line">    &quot;current_toolchain&quot; variable when inside that target&#39;s declaration.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-12"><a href="#Examples-12" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">get_label_info(&quot;:foo&quot;, &quot;name&quot;)</span><br><span class="line"># Returns string &quot;foo&quot;.</span><br><span class="line"></span><br><span class="line">get_label_info(&quot;&#x2F;&#x2F;foo&#x2F;bar:baz&quot;, &quot;target_gen_dir&quot;)</span><br><span class="line"># Returns string &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;gen&#x2F;foo&#x2F;bar&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="get-path-info-Extract-parts-of-a-file-or-directory-name"><a href="#get-path-info-Extract-parts-of-a-file-or-directory-name" class="headerlink" title="get_path_info: Extract parts of a file or directory name."></a><a name="func_get_path_info"></a><strong>get_path_info</strong>: Extract parts of a file or directory name.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">get_path_info(input, what)</span><br><span class="line"></span><br><span class="line">The first argument is either a string representing a file or directory name,</span><br><span class="line">or a list of such strings. If the input is a list the return value will be a</span><br><span class="line">list containing the result of applying the rule to each item in the input.</span><br></pre></td></tr></table></figure>

<h4 id="Possible-values-for-the-“what”-parameter-1"><a href="#Possible-values-for-the-“what”-parameter-1" class="headerlink" title="Possible values for the “what” parameter"></a><strong>Possible values for the “what” parameter</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&quot;file&quot;</span><br><span class="line">    The substring after the last slash in the path, including the name and</span><br><span class="line">    extension. If the input ends in a slash, the empty string will be</span><br><span class="line">    returned.</span><br><span class="line">      &quot;foo&#x2F;bar.txt&quot; &#x3D;&gt; &quot;bar.txt&quot;</span><br><span class="line">      &quot;bar.txt&quot; &#x3D;&gt; &quot;bar.txt&quot;</span><br><span class="line">      &quot;foo&#x2F;&quot; &#x3D;&gt; &quot;&quot;</span><br><span class="line">      &quot;&quot; &#x3D;&gt; &quot;&quot;</span><br><span class="line"></span><br><span class="line">&quot;name&quot;</span><br><span class="line">   The substring of the file name not including the extension.</span><br><span class="line">      &quot;foo&#x2F;bar.txt&quot; &#x3D;&gt; &quot;bar&quot;</span><br><span class="line">      &quot;foo&#x2F;bar&quot; &#x3D;&gt; &quot;bar&quot;</span><br><span class="line">      &quot;foo&#x2F;&quot; &#x3D;&gt; &quot;&quot;</span><br><span class="line"></span><br><span class="line">&quot;extension&quot;</span><br><span class="line">    The substring following the last period following the last slash, or the</span><br><span class="line">    empty string if not found. The period is not included.</span><br><span class="line">      &quot;foo&#x2F;bar.txt&quot; &#x3D;&gt; &quot;txt&quot;</span><br><span class="line">      &quot;foo&#x2F;bar&quot; &#x3D;&gt; &quot;&quot;</span><br><span class="line"></span><br><span class="line">&quot;dir&quot;</span><br><span class="line">    The directory portion of the name, not including the slash.</span><br><span class="line">      &quot;foo&#x2F;bar.txt&quot; &#x3D;&gt; &quot;foo&quot;</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;foo&quot;</span><br><span class="line">      &quot;foo&quot; &#x3D;&gt; &quot;.&quot;</span><br><span class="line"></span><br><span class="line">    The result will never end in a slash, so if the resulting is empty, the</span><br><span class="line">    system (&quot;&#x2F;&quot;) or source (&quot;&#x2F;&#x2F;&quot;) roots, a &quot;.&quot; will be appended such that it</span><br><span class="line">    is always legal to append a slash and a filename and get a valid path.</span><br><span class="line"></span><br><span class="line">&quot;out_dir&quot;</span><br><span class="line">    The output file directory corresponding to the path of the given file,</span><br><span class="line">    not including a trailing slash.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;out&#x2F;Default&#x2F;obj&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&quot;gen_dir&quot;</span><br><span class="line">    The generated file directory corresponding to the path of the given file,</span><br><span class="line">    not including a trailing slash.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;out&#x2F;Default&#x2F;gen&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&quot;abspath&quot;</span><br><span class="line">    The full absolute path name to the file or directory. It will be resolved</span><br><span class="line">    relative to the current directory, and then the source- absolute version</span><br><span class="line">    will be returned. If the input is system- absolute, the same input will</span><br><span class="line">    be returned.</span><br><span class="line">      &quot;foo&#x2F;bar.txt&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;mydir&#x2F;foo&#x2F;bar.txt&quot;</span><br><span class="line">      &quot;foo&#x2F;&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;mydir&#x2F;foo&#x2F;&quot;</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&quot; &#x3D;&gt; &quot;&#x2F;&#x2F;foo&#x2F;bar&quot;  (already absolute)</span><br><span class="line">      &quot;&#x2F;usr&#x2F;include&quot; &#x3D;&gt; &quot;&#x2F;usr&#x2F;include&quot;  (already absolute)</span><br><span class="line"></span><br><span class="line">    If you want to make the path relative to another directory, or to be</span><br><span class="line">    system-absolute, see rebase_path().</span><br></pre></td></tr></table></figure>

<h4 id="Examples-13"><a href="#Examples-13" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sources &#x3D; [ &quot;foo.cc&quot;, &quot;foo.h&quot; ]</span><br><span class="line">result &#x3D; get_path_info(source, &quot;abspath&quot;)</span><br><span class="line"># result will be [ &quot;&#x2F;&#x2F;mydir&#x2F;foo.cc&quot;, &quot;&#x2F;&#x2F;mydir&#x2F;foo.h&quot; ]</span><br><span class="line"></span><br><span class="line">result &#x3D; get_path_info(&quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.cc&quot;, &quot;dir&quot;)</span><br><span class="line"># result will be &quot;&#x2F;&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line"># Extract the source-absolute directory name,</span><br><span class="line">result &#x3D; get_path_info(get_path_info(path, &quot;dir&quot;), &quot;abspath&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="get-target-outputs-file-list-Get-the-list-of-outputs-from-a-target"><a href="#get-target-outputs-file-list-Get-the-list-of-outputs-from-a-target" class="headerlink" title="get_target_outputs: [file list] Get the list of outputs from a target."></a><a name="func_get_target_outputs"></a><strong>get_target_outputs</strong>: [file list] Get the list of outputs from a target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">get_target_outputs(target_label)</span><br><span class="line"></span><br><span class="line">Returns a list of output files for the named target. The named target must</span><br><span class="line">have been previously defined in the current file before this function is</span><br><span class="line">called (it can&#39;t reference targets in other files because there isn&#39;t a</span><br><span class="line">defined execution order, and it obviously can&#39;t reference targets that are</span><br><span class="line">defined after the function call).</span><br><span class="line"></span><br><span class="line">Only copy, generated_file, and action targets are supported. The outputs from</span><br><span class="line">binary targets will depend on the toolchain definition which won&#39;t</span><br><span class="line">necessarily have been loaded by the time a given line of code has run, and</span><br><span class="line">source sets and groups have no useful output file.</span><br></pre></td></tr></table></figure>

<h4 id="Return-value"><a href="#Return-value" class="headerlink" title="Return value"></a><strong>Return value</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">The names in the resulting list will be absolute file paths (normally like</span><br><span class="line">&quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;bar.exe&quot;, depending on the build directory).</span><br><span class="line"></span><br><span class="line">action, copy, and generated_file targets: this will just return the files</span><br><span class="line">specified in the &quot;outputs&quot; variable of the target.</span><br><span class="line"></span><br><span class="line">action_foreach targets: this will return the result of applying the output</span><br><span class="line">template to the sources (see &quot;gn help source_expansion&quot;). This will be the</span><br><span class="line">same result (though with guaranteed absolute file paths), as</span><br><span class="line">process_file_template will return for those inputs (see &quot;gn help</span><br><span class="line">process_file_template&quot;).</span><br><span class="line"></span><br><span class="line">source sets and groups: this will return a list containing the path of the</span><br><span class="line">&quot;stamp&quot; file that Ninja will produce once all outputs are generated. This</span><br><span class="line">probably isn&#39;t very useful.</span><br></pre></td></tr></table></figure>

<h4 id="Example-13"><a href="#Example-13" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Say this action generates a bunch of C source files.</span><br><span class="line">action_foreach(&quot;my_action&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ ... ]</span><br><span class="line">  outputs &#x3D; [ ... ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Compile the resulting source files into a source set.</span><br><span class="line">source_set(&quot;my_lib&quot;) &#123;</span><br><span class="line">  sources &#x3D; get_target_outputs(&quot;:my_action&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="getenv-Get-an-environment-variable"><a href="#getenv-Get-an-environment-variable" class="headerlink" title="getenv: Get an environment variable."></a><a name="func_getenv"></a><strong>getenv</strong>: Get an environment variable.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">value &#x3D; getenv(env_var_name)</span><br><span class="line"></span><br><span class="line">Returns the value of the given environment variable. If the value is not</span><br><span class="line">found, it will try to look up the variable with the &quot;opposite&quot; case (based on</span><br><span class="line">the case of the first letter of the variable), but is otherwise</span><br><span class="line">case-sensitive.</span><br><span class="line"></span><br><span class="line">If the environment variable is not found, the empty string will be returned.</span><br><span class="line">Note: it might be nice to extend this if we had the concept of &quot;none&quot; in the</span><br><span class="line">language to indicate lookup failure.</span><br></pre></td></tr></table></figure>

<h4 id="Example-14"><a href="#Example-14" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">home_dir &#x3D; getenv(&quot;HOME&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="import-Import-a-file-into-the-current-scope"><a href="#import-Import-a-file-into-the-current-scope" class="headerlink" title="import: Import a file into the current scope."></a><a name="func_import"></a><strong>import</strong>: Import a file into the current scope.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">The import command loads the rules and variables resulting from executing the</span><br><span class="line">given file into the current scope.</span><br><span class="line"></span><br><span class="line">By convention, imported files are named with a .gni extension.</span><br><span class="line"></span><br><span class="line">An import is different than a C++ &quot;include&quot;. The imported file is executed in</span><br><span class="line">a standalone environment from the caller of the import command. The results</span><br><span class="line">of this execution are cached for other files that import the same .gni file.</span><br><span class="line"></span><br><span class="line">Note that you can not import a BUILD.gn file that&#39;s otherwise used in the</span><br><span class="line">build. Files must either be imported or implicitly loaded as a result of deps</span><br><span class="line">rules, but not both.</span><br><span class="line"></span><br><span class="line">The imported file&#39;s scope will be merged with the scope at the point import</span><br><span class="line">was called. If there is a conflict (both the current scope and the imported</span><br><span class="line">file define some variable or rule with the same name but different value), a</span><br><span class="line">runtime error will be thrown. Therefore, it&#39;s good practice to minimize the</span><br><span class="line">stuff that an imported file defines.</span><br><span class="line"></span><br><span class="line">Variables and templates beginning with an underscore &#39;_&#39; are considered</span><br><span class="line">private and will not be imported. Imported files can use such variables for</span><br><span class="line">internal computation without affecting other files.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-14"><a href="#Examples-14" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import(&quot;&#x2F;&#x2F;build&#x2F;rules&#x2F;idl_compilation_rule.gni&quot;)</span><br><span class="line"></span><br><span class="line"># Looks in the current directory.</span><br><span class="line">import(&quot;my_vars.gni&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="not-needed-Mark-variables-from-scope-as-not-needed"><a href="#not-needed-Mark-variables-from-scope-as-not-needed" class="headerlink" title="not_needed: Mark variables from scope as not needed."></a><a name="func_not_needed"></a><strong>not_needed</strong>: Mark variables from scope as not needed.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">not_needed(variable_list_or_star, variable_to_ignore_list &#x3D; [])</span><br><span class="line">not_needed(from_scope, variable_list_or_star,</span><br><span class="line">           variable_to_ignore_list &#x3D; [])</span><br><span class="line"></span><br><span class="line">Mark the variables in the current or given scope as not needed, which means</span><br><span class="line">you will not get an error about unused variables for these. The</span><br><span class="line">variable_to_ignore_list allows excluding variables from &quot;all matches&quot; if</span><br><span class="line">variable_list_or_star is &quot;*&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-15"><a href="#Example-15" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">not_needed(&quot;*&quot;, [ &quot;config&quot; ])</span><br><span class="line">not_needed([ &quot;data_deps&quot;, &quot;deps&quot; ])</span><br><span class="line">not_needed(invoker, &quot;*&quot;, [ &quot;config&quot; ])</span><br><span class="line">not_needed(invoker, [ &quot;data_deps&quot;, &quot;deps&quot; ])</span><br></pre></td></tr></table></figure>
<h3 id="pool-Defines-a-pool-object"><a href="#pool-Defines-a-pool-object" class="headerlink" title="pool: Defines a pool object."></a><a name="func_pool"></a><strong>pool</strong>: Defines a pool object.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Pool objects can be applied to a tool to limit the parallelism of the</span><br><span class="line">build. This object has a single property &quot;depth&quot; corresponding to</span><br><span class="line">the number of tasks that may run simultaneously.</span><br><span class="line"></span><br><span class="line">As the file containing the pool definition may be executed in the</span><br><span class="line">context of more than one toolchain it is recommended to specify an</span><br><span class="line">explicit toolchain when defining and referencing a pool.</span><br><span class="line"></span><br><span class="line">A pool named &quot;console&quot; defined in the root build file represents Ninja&#39;s</span><br><span class="line">console pool. Targets using this pool will have access to the console&#39;s</span><br><span class="line">stdin and stdout, and output will not be buffered. This special pool must</span><br><span class="line">have a depth of 1. Pools not defined in the root must not be named &quot;console&quot;.</span><br><span class="line">The console pool can only be defined for the default toolchain.</span><br><span class="line">Refer to the Ninja documentation on the console pool for more info.</span><br><span class="line"></span><br><span class="line">A pool is referenced by its label just like a target.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-13"><a href="#Variables-13" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">depth*</span><br><span class="line">* &#x3D; required</span><br></pre></td></tr></table></figure>

<h4 id="Example-16"><a href="#Example-16" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if (current_toolchain &#x3D;&#x3D; default_toolchain) &#123;</span><br><span class="line">  pool(&quot;link_pool&quot;) &#123;</span><br><span class="line">    depth &#x3D; 1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">toolchain(&quot;toolchain&quot;) &#123;</span><br><span class="line">  tool(&quot;link&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;...&quot;</span><br><span class="line">    pool &#x3D; &quot;:link_pool($default_toolchain)&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="print-Prints-to-the-console"><a href="#print-Prints-to-the-console" class="headerlink" title="print: Prints to the console."></a><a name="func_print"></a><strong>print</strong>: Prints to the console.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Prints all arguments to the console separated by spaces. A newline is</span><br><span class="line">automatically appended to the end.</span><br><span class="line"></span><br><span class="line">This function is intended for debugging. Note that build files are run in</span><br><span class="line">parallel so you may get interleaved prints. A buildfile may also be executed</span><br><span class="line">more than once in parallel in the context of different toolchains so the</span><br><span class="line">prints from one file may be duplicated or</span><br><span class="line">interleaved with itself.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-15"><a href="#Examples-15" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;Hello world&quot;)</span><br><span class="line"></span><br><span class="line">print(sources, deps)</span><br></pre></td></tr></table></figure>
<h3 id="process-file-template-Do-template-expansion-over-a-list-of-files"><a href="#process-file-template-Do-template-expansion-over-a-list-of-files" class="headerlink" title="process_file_template: Do template expansion over a list of files."></a><a name="func_process_file_template"></a><strong>process_file_template</strong>: Do template expansion over a list of files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">process_file_template(source_list, template)</span><br><span class="line"></span><br><span class="line">process_file_template applies a template list to a source file list,</span><br><span class="line">returning the result of applying each template to each source. This is</span><br><span class="line">typically used for computing output file names from input files.</span><br><span class="line"></span><br><span class="line">In most cases, get_target_outputs() will give the same result with shorter,</span><br><span class="line">more maintainable code. This function should only be used when that function</span><br><span class="line">can&#39;t be used (like there&#39;s no target or the target is defined in another</span><br><span class="line">build file).</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-3"><a href="#Arguments-3" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">The source_list is a list of file names.</span><br><span class="line"></span><br><span class="line">The template can be a string or a list. If it is a list, multiple output</span><br><span class="line">strings are generated for each input.</span><br><span class="line"></span><br><span class="line">The template should contain source expansions to which each name in the</span><br><span class="line">source list is applied. See &quot;gn help source_expansion&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-17"><a href="#Example-17" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> sources &#x3D; [</span><br><span class="line">   &quot;foo.idl&quot;,</span><br><span class="line">   &quot;bar.idl&quot;,</span><br><span class="line"> ]</span><br><span class="line"> myoutputs &#x3D; process_file_template(</span><br><span class="line">     sources,</span><br><span class="line">     [ &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.cc&quot;,</span><br><span class="line">       &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.h&quot; ])</span><br><span class="line"></span><br><span class="line">The result in this case will be:</span><br><span class="line">   [ &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;foo.cc&quot;</span><br><span class="line">     &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;foo.h&quot;</span><br><span class="line">     &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;bar.cc&quot;</span><br><span class="line">     &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;bar.h&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="read-file-Read-a-file-into-a-variable"><a href="#read-file-Read-a-file-into-a-variable" class="headerlink" title="read_file: Read a file into a variable."></a><a name="func_read_file"></a><strong>read_file</strong>: Read a file into a variable.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">read_file(filename, input_conversion)</span><br><span class="line"></span><br><span class="line">Whitespace will be trimmed from the end of the file. Throws an error if the</span><br><span class="line">file can not be opened.</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-4"><a href="#Arguments-4" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">filename</span><br><span class="line">    Filename to read, relative to the build file.</span><br><span class="line"></span><br><span class="line">input_conversion</span><br><span class="line">    Controls how the file is read and parsed. See &#96;gn help io_conversion&#96;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-18"><a href="#Example-18" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lines &#x3D; read_file(&quot;foo.txt&quot;, &quot;list lines&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="rebase-path-Rebase-a-file-or-directory-to-another-location"><a href="#rebase-path-Rebase-a-file-or-directory-to-another-location" class="headerlink" title="rebase_path: Rebase a file or directory to another location."></a><a name="func_rebase_path"></a><strong>rebase_path</strong>: Rebase a file or directory to another location.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">converted &#x3D; rebase_path(input,</span><br><span class="line">                        new_base &#x3D; &quot;&quot;,</span><br><span class="line">                        current_base &#x3D; &quot;.&quot;)</span><br><span class="line"></span><br><span class="line">Takes a string argument representing a file name, or a list of such strings</span><br><span class="line">and converts it&#x2F;them to be relative to a different base directory.</span><br><span class="line"></span><br><span class="line">When invoking the compiler or scripts, GN will automatically convert sources</span><br><span class="line">and include directories to be relative to the build directory. However, if</span><br><span class="line">you&#39;re passing files directly in the &quot;args&quot; array or doing other manual</span><br><span class="line">manipulations where GN doesn&#39;t know something is a file name, you will need</span><br><span class="line">to convert paths to be relative to what your tool is expecting.</span><br><span class="line"></span><br><span class="line">The common case is to use this to convert paths relative to the current</span><br><span class="line">directory to be relative to the build directory (which will be the current</span><br><span class="line">directory when executing scripts).</span><br><span class="line"></span><br><span class="line">If you want to convert a file path to be source-absolute (that is, beginning</span><br><span class="line">with a double slash like &quot;&#x2F;&#x2F;foo&#x2F;bar&quot;), you should use the get_path_info()</span><br><span class="line">function. This function won&#39;t work because it will always make relative</span><br><span class="line">paths, and it needs to support making paths relative to the source root, so</span><br><span class="line">it can&#39;t also generate source-absolute paths without more special-cases.</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-5"><a href="#Arguments-5" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">input</span><br><span class="line">    A string or list of strings representing file or directory names. These</span><br><span class="line">    can be relative paths (&quot;foo&#x2F;bar.txt&quot;), system absolute paths</span><br><span class="line">    (&quot;&#x2F;foo&#x2F;bar.txt&quot;), or source absolute paths (&quot;&#x2F;&#x2F;foo&#x2F;bar.txt&quot;).</span><br><span class="line"></span><br><span class="line">new_base</span><br><span class="line">    The directory to convert the paths to be relative to. This can be an</span><br><span class="line">    absolute path or a relative path (which will be treated as being relative</span><br><span class="line">    to the current BUILD-file&#39;s directory).</span><br><span class="line"></span><br><span class="line">    As a special case, if new_base is the empty string (the default), all</span><br><span class="line">    paths will be converted to system-absolute native style paths with system</span><br><span class="line">    path separators. This is useful for invoking external programs.</span><br><span class="line"></span><br><span class="line">current_base</span><br><span class="line">    Directory representing the base for relative paths in the input. If this</span><br><span class="line">    is not an absolute path, it will be treated as being relative to the</span><br><span class="line">    current build file. Use &quot;.&quot; (the default) to convert paths from the</span><br><span class="line">    current BUILD-file&#39;s directory.</span><br></pre></td></tr></table></figure>

<h4 id="Return-value-1"><a href="#Return-value-1" class="headerlink" title="Return value"></a><strong>Return value</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">The return value will be the same type as the input value (either a string or</span><br><span class="line">a list of strings). All relative and source-absolute file names will be</span><br><span class="line">converted to be relative to the requested output System-absolute paths will</span><br><span class="line">be unchanged.</span><br><span class="line"></span><br><span class="line">Whether an output path will end in a slash will match whether the</span><br><span class="line">corresponding input path ends in a slash. It will return &quot;.&quot; or &quot;.&#x2F;&quot;</span><br><span class="line">(depending on whether the input ends in a slash) to avoid returning empty</span><br><span class="line">strings. This means if you want a root path (&quot;&#x2F;&#x2F;&quot; or &quot;&#x2F;&quot;) not ending in a</span><br><span class="line">slash, you can add a dot (&quot;&#x2F;&#x2F;.&quot;).</span><br></pre></td></tr></table></figure>

<h4 id="Example-19"><a href="#Example-19" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Convert a file in the current directory to be relative to the build</span><br><span class="line"># directory (the current dir when executing compilers and scripts).</span><br><span class="line">foo &#x3D; rebase_path(&quot;myfile.txt&quot;, root_build_dir)</span><br><span class="line"># might produce &quot;..&#x2F;..&#x2F;project&#x2F;myfile.txt&quot;.</span><br><span class="line"></span><br><span class="line"># Convert a file to be system absolute:</span><br><span class="line">foo &#x3D; rebase_path(&quot;myfile.txt&quot;)</span><br><span class="line"># Might produce &quot;D:\\source\\project\\myfile.txt&quot; on Windows or</span><br><span class="line"># &quot;&#x2F;home&#x2F;you&#x2F;source&#x2F;project&#x2F;myfile.txt&quot; on Linux.</span><br><span class="line"></span><br><span class="line"># Typical usage for converting to the build directory for a script.</span><br><span class="line">action(&quot;myscript&quot;) &#123;</span><br><span class="line">  # Don&#39;t convert sources, GN will automatically convert these to be relative</span><br><span class="line">  # to the build directory when it constructs the command line for your</span><br><span class="line">  # script.</span><br><span class="line">  sources &#x3D; [ &quot;foo.txt&quot;, &quot;bar.txt&quot; ]</span><br><span class="line"></span><br><span class="line">  # Extra file args passed manually need to be explicitly converted</span><br><span class="line">  # to be relative to the build directory:</span><br><span class="line">  args &#x3D; [</span><br><span class="line">    &quot;--data&quot;,</span><br><span class="line">    rebase_path(&quot;&#x2F;&#x2F;mything&#x2F;data&#x2F;input.dat&quot;, root_build_dir),</span><br><span class="line">    &quot;--rel&quot;,</span><br><span class="line">    rebase_path(&quot;relative_path.txt&quot;, root_build_dir)</span><br><span class="line">  ] + rebase_path(sources, root_build_dir)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="set-default-toolchain-Sets-the-default-toolchain-name"><a href="#set-default-toolchain-Sets-the-default-toolchain-name" class="headerlink" title="set_default_toolchain: Sets the default toolchain name."></a><a name="func_set_default_toolchain"></a><strong>set_default_toolchain</strong>: Sets the default toolchain name.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">set_default_toolchain(toolchain_label)</span><br><span class="line"></span><br><span class="line">The given label should identify a toolchain definition (see &quot;gn help</span><br><span class="line">toolchain&quot;). This toolchain will be used for all targets unless otherwise</span><br><span class="line">specified.</span><br><span class="line"></span><br><span class="line">This function is only valid to call during the processing of the build</span><br><span class="line">configuration file. Since the build configuration file is processed</span><br><span class="line">separately for each toolchain, this function will be a no-op when called</span><br><span class="line">under any non-default toolchains.</span><br><span class="line"></span><br><span class="line">For example, the default toolchain should be appropriate for the current</span><br><span class="line">environment. If the current environment is 32-bit and somebody references a</span><br><span class="line">target with a 64-bit toolchain, we wouldn&#39;t want processing of the build</span><br><span class="line">config file for the 64-bit toolchain to reset the default toolchain to</span><br><span class="line">64-bit, we want to keep it 32-bits.</span><br></pre></td></tr></table></figure>

<h4 id="Argument"><a href="#Argument" class="headerlink" title="Argument"></a><strong>Argument</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toolchain_label</span><br><span class="line">    Toolchain name.</span><br></pre></td></tr></table></figure>

<h4 id="Example-20"><a href="#Example-20" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Set default toolchain only has an effect when run in the context of the</span><br><span class="line"># default toolchain. Pick the right one according to the current CPU</span><br><span class="line"># architecture.</span><br><span class="line">if (target_cpu &#x3D;&#x3D; &quot;x64&quot;) &#123;</span><br><span class="line">  set_default_toolchain(&quot;&#x2F;&#x2F;toolchains:64&quot;)</span><br><span class="line">&#125; else if (target_cpu &#x3D;&#x3D; &quot;x86&quot;) &#123;</span><br><span class="line">  set_default_toolchain(&quot;&#x2F;&#x2F;toolchains:32&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="set-defaults-Set-default-values-for-a-target-type"><a href="#set-defaults-Set-default-values-for-a-target-type" class="headerlink" title="set_defaults: Set default values for a target type."></a><a name="func_set_defaults"></a><strong>set_defaults</strong>: Set default values for a target type.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">set_defaults(&lt;target_type_name&gt;) &#123; &lt;values...&gt; &#125;</span><br><span class="line"></span><br><span class="line">Sets the default values for a given target type. Whenever target_type_name is</span><br><span class="line">seen in the future, the values specified in set_default&#39;s block will be</span><br><span class="line">copied into the current scope.</span><br><span class="line"></span><br><span class="line">When the target type is used, the variable copying is very strict. If a</span><br><span class="line">variable with that name is already in scope, the build will fail with an</span><br><span class="line">error.</span><br><span class="line"></span><br><span class="line">set_defaults can be used for built-in target types (&quot;executable&quot;,</span><br><span class="line">&quot;shared_library&quot;, etc.) and custom ones defined via the &quot;template&quot; command.</span><br><span class="line">It can be called more than once and the most recent call in any scope will</span><br><span class="line">apply, but there is no way to refer to the previous defaults and modify them</span><br><span class="line">(each call to set_defaults must supply a complete list of all defaults it</span><br><span class="line">wants). If you want to share defaults, store them in a separate variable.</span><br></pre></td></tr></table></figure>

<h4 id="Example-21"><a href="#Example-21" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">set_defaults(&quot;static_library&quot;) &#123;</span><br><span class="line">  configs &#x3D; [ &quot;&#x2F;&#x2F;tools&#x2F;mything:settings&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static_library(&quot;mylib&quot;) &#123;</span><br><span class="line">  # The configs will be auto-populated as above. You can remove it if</span><br><span class="line">  # you don&#39;t want the default for a particular default:</span><br><span class="line">  configs -&#x3D; [ &quot;&#x2F;&#x2F;tools&#x2F;mything:settings&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="split-list-Splits-a-list-into-N-different-sub-lists"><a href="#split-list-Splits-a-list-into-N-different-sub-lists" class="headerlink" title="split_list: Splits a list into N different sub-lists."></a><a name="func_split_list"></a><strong>split_list</strong>: Splits a list into N different sub-lists.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">result &#x3D; split_list(input, n)</span><br><span class="line"></span><br><span class="line">Given a list and a number N, splits the list into N sub-lists of</span><br><span class="line">approximately equal size. The return value is a list of the sub-lists. The</span><br><span class="line">result will always be a list of size N. If N is greater than the number of</span><br><span class="line">elements in the input, it will be padded with empty lists.</span><br><span class="line"></span><br><span class="line">The expected use is to divide source files into smaller uniform chunks.</span><br></pre></td></tr></table></figure>

<h4 id="Example-22"><a href="#Example-22" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The code:</span><br><span class="line">  mylist &#x3D; [1, 2, 3, 4, 5, 6]</span><br><span class="line">  print(split_list(mylist, 3))</span><br><span class="line"></span><br><span class="line">Will print:</span><br><span class="line">  [[1, 2], [3, 4], [5, 6]</span><br></pre></td></tr></table></figure>
<h3 id="string-join-Concatenates-a-list-of-strings-with-a-separator"><a href="#string-join-Concatenates-a-list-of-strings-with-a-separator" class="headerlink" title="string_join: Concatenates a list of strings with a separator."></a><a name="func_string_join"></a><strong>string_join</strong>: Concatenates a list of strings with a separator.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result &#x3D; string_join(separator, strings)</span><br><span class="line"></span><br><span class="line">Concatenate a list of strings with intervening occurrences of separator.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-16"><a href="#Examples-16" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string_join(&quot;&quot;, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])    --&gt; &quot;abc&quot;</span><br><span class="line">string_join(&quot;|&quot;, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])   --&gt; &quot;a|b|c&quot;</span><br><span class="line">string_join(&quot;, &quot;, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])  --&gt; &quot;a, b, c&quot;</span><br><span class="line">string_join(&quot;s&quot;, [&quot;&quot;, &quot;&quot;])          --&gt; &quot;s&quot;</span><br></pre></td></tr></table></figure>
<h3 id="string-replace-Replaces-substring-in-the-given-string"><a href="#string-replace-Replaces-substring-in-the-given-string" class="headerlink" title="string_replace: Replaces substring in the given string."></a><a name="func_string_replace"></a><strong>string_replace</strong>: Replaces substring in the given string.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">result &#x3D; string_replace(str, old, new[, max])</span><br><span class="line"></span><br><span class="line">Returns a copy of the string str in which the occurrences of old have been</span><br><span class="line">replaced with new, optionally restricting the number of replacements. The</span><br><span class="line">replacement is performed sequentially, so if new contains old, it won&#39;t be</span><br><span class="line">replaced.</span><br></pre></td></tr></table></figure>

<h4 id="Example-23"><a href="#Example-23" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The code:</span><br><span class="line">  mystr &#x3D; &quot;Hello, world!&quot;</span><br><span class="line">  print(string_replace(mystr, &quot;world&quot;, &quot;GN&quot;))</span><br><span class="line"></span><br><span class="line">Will print:</span><br><span class="line">  Hello, GN!</span><br></pre></td></tr></table></figure>
<h3 id="string-split-Split-string-into-a-list-of-strings"><a href="#string-split-Split-string-into-a-list-of-strings" class="headerlink" title="string_split: Split string into a list of strings."></a><a name="func_string_split"></a><strong>string_split</strong>: Split string into a list of strings.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">result &#x3D; string_split(str[, sep])</span><br><span class="line"></span><br><span class="line">Split string into all substrings separated by separator and returns a list</span><br><span class="line">of the substrings between those separators.</span><br><span class="line"></span><br><span class="line">If the separator argument is omitted, the split is by any whitespace, and</span><br><span class="line">any leading&#x2F;trailing whitespace is ignored; similar to Python&#39;s str.split().</span><br></pre></td></tr></table></figure>

<h4 id="Examples-without-a-separator-split-on-whitespace"><a href="#Examples-without-a-separator-split-on-whitespace" class="headerlink" title="Examples without a separator (split on whitespace):"></a><strong>Examples without a separator (split on whitespace)</strong>:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string_split(&quot;&quot;)          --&gt; []</span><br><span class="line">string_split(&quot;a&quot;)         --&gt; [&quot;a&quot;]</span><br><span class="line">string_split(&quot; aa  bb&quot;)   --&gt; [&quot;aa&quot;, &quot;bb&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="Examples-with-a-separator-split-on-separators"><a href="#Examples-with-a-separator-split-on-separators" class="headerlink" title="Examples with a separator (split on separators):"></a><strong>Examples with a separator (split on separators)</strong>:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string_split(&quot;&quot;, &quot;|&quot;)           --&gt; [&quot;&quot;]</span><br><span class="line">string_split(&quot;  a b  &quot;, &quot; &quot;)    --&gt; [&quot;&quot;, &quot;&quot;, &quot;a&quot;, &quot;b&quot;, &quot;&quot;, &quot;&quot;]</span><br><span class="line">string_split(&quot;aa+-bb+-c&quot;, &quot;+-&quot;) --&gt; [&quot;aa&quot;, &quot;bb&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="template-Define-a-template-rule"><a href="#template-Define-a-template-rule" class="headerlink" title="template: Define a template rule."></a><a name="func_template"></a><strong>template</strong>: Define a template rule.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">A template defines a custom name that acts like a function. It provides a way</span><br><span class="line">to add to the built-in target types.</span><br><span class="line"></span><br><span class="line">The template() function is used to declare a template. To invoke the</span><br><span class="line">template, just use the name of the template like any other target type.</span><br><span class="line"></span><br><span class="line">Often you will want to declare your template in a special file that other</span><br><span class="line">files will import (see &quot;gn help import&quot;) so your template rule can be shared</span><br><span class="line">across build files.</span><br></pre></td></tr></table></figure>

<h4 id="Variables-and-templates"><a href="#Variables-and-templates" class="headerlink" title="Variables and templates:"></a><strong>Variables and templates</strong>:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">When you call template() it creates a closure around all variables currently</span><br><span class="line">in scope with the code in the template block. When the template is invoked,</span><br><span class="line">the closure will be executed.</span><br><span class="line"></span><br><span class="line">When the template is invoked, the code in the caller is executed and passed</span><br><span class="line">to the template code as an implicit &quot;invoker&quot; variable. The template uses</span><br><span class="line">this to read state out of the invoking code.</span><br><span class="line"></span><br><span class="line">One thing explicitly excluded from the closure is the &quot;current directory&quot;</span><br><span class="line">against which relative file names are resolved. The current directory will be</span><br><span class="line">that of the invoking code, since typically that code specifies the file</span><br><span class="line">names. This means all files internal to the template should use absolute</span><br><span class="line">names.</span><br><span class="line"></span><br><span class="line">A template will typically forward some or all variables from the invoking</span><br><span class="line">scope to a target that it defines. Often, such variables might be optional.</span><br><span class="line">Use the pattern:</span><br><span class="line"></span><br><span class="line">  if (defined(invoker.deps)) &#123;</span><br><span class="line">    deps &#x3D; invoker.deps</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">The function forward_variables_from() provides a shortcut to forward one or</span><br><span class="line">more or possibly all variables in this manner:</span><br><span class="line"></span><br><span class="line">  forward_variables_from(invoker, [&quot;deps&quot;, &quot;public_deps&quot;])</span><br></pre></td></tr></table></figure>

<h4 id="Target-naming"><a href="#Target-naming" class="headerlink" title="Target naming"></a><strong>Target naming</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Your template should almost always define a built-in target with the name the</span><br><span class="line">template invoker specified. For example, if you have an IDL template and</span><br><span class="line">somebody does:</span><br><span class="line">  idl(&quot;foo&quot;) &#123;...</span><br><span class="line">you will normally want this to expand to something defining a source_set or</span><br><span class="line">static_library named &quot;foo&quot; (among other things you may need). This way, when</span><br><span class="line">another target specifies a dependency on &quot;foo&quot;, the static_library or</span><br><span class="line">source_set will be linked.</span><br><span class="line"></span><br><span class="line">It is also important that any other targets your template expands to have</span><br><span class="line">unique names, or you will get collisions.</span><br><span class="line"></span><br><span class="line">Access the invoking name in your template via the implicit &quot;target_name&quot;</span><br><span class="line">variable. This should also be the basis for how other targets that a template</span><br><span class="line">expands to ensure uniqueness.</span><br><span class="line"></span><br><span class="line">A typical example would be a template that defines an action to generate some</span><br><span class="line">source files, and a source_set to compile that source. Your template would</span><br><span class="line">name the source_set &quot;target_name&quot; because that&#39;s what you want external</span><br><span class="line">targets to depend on to link your code. And you would name the action</span><br><span class="line">something like &quot;$&#123;target_name&#125;_action&quot; to make it unique. The source set</span><br><span class="line">would have a dependency on the action to make it run.</span><br></pre></td></tr></table></figure>

<h4 id="Overriding-builtin-targets"><a href="#Overriding-builtin-targets" class="headerlink" title="Overriding builtin targets"></a><strong>Overriding builtin targets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">You can use template to redefine a built-in target in which case your template</span><br><span class="line">takes a precedence over the built-in one. All uses of the target from within</span><br><span class="line">the template definition will refer to the built-in target which makes it</span><br><span class="line">possible to extend the behavior of the built-in target:</span><br><span class="line"></span><br><span class="line">  template(&quot;shared_library&quot;) &#123;</span><br><span class="line">    shared_library(shlib) &#123;</span><br><span class="line">      forward_variables_from(invoker, &quot;*&quot;)</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Example-of-defining-a-template"><a href="#Example-of-defining-a-template" class="headerlink" title="Example of defining a template"></a><strong>Example of defining a template</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">template(&quot;my_idl&quot;) &#123;</span><br><span class="line">  # Be nice and help callers debug problems by checking that the variables</span><br><span class="line">  # the template requires are defined. This gives a nice message rather than</span><br><span class="line">  # giving the user an error about an undefined variable in the file defining</span><br><span class="line">  # the template</span><br><span class="line">  #</span><br><span class="line">  # You can also use defined() to give default values to variables</span><br><span class="line">  # unspecified by the invoker.</span><br><span class="line">  assert(defined(invoker.sources),</span><br><span class="line">         &quot;Need sources in $target_name listing the idl files.&quot;)</span><br><span class="line"></span><br><span class="line">  # Name of the intermediate target that does the code gen. This must</span><br><span class="line">  # incorporate the target name so it&#39;s unique across template</span><br><span class="line">  # instantiations.</span><br><span class="line">  code_gen_target_name &#x3D; target_name + &quot;_code_gen&quot;</span><br><span class="line"></span><br><span class="line">  # Intermediate target to convert IDL to C source. Note that the name is</span><br><span class="line">  # based on the name the invoker of the template specified. This way, each</span><br><span class="line">  # time the template is invoked we get a unique intermediate action name</span><br><span class="line">  # (since all target names are in the global scope).</span><br><span class="line">  action_foreach(code_gen_target_name) &#123;</span><br><span class="line">    # Access the scope defined by the invoker via the implicit &quot;invoker&quot;</span><br><span class="line">    # variable.</span><br><span class="line">    sources &#x3D; invoker.sources</span><br><span class="line"></span><br><span class="line">    # Note that we need an absolute path for our script file name. The</span><br><span class="line">    # current directory when executing this code will be that of the invoker</span><br><span class="line">    # (this is why we can use the &quot;sources&quot; directly above without having to</span><br><span class="line">    # rebase all of the paths). But if we need to reference a script relative</span><br><span class="line">    # to the template file, we&#39;ll need to use an absolute path instead.</span><br><span class="line">    script &#x3D; &quot;&#x2F;&#x2F;tools&#x2F;idl&#x2F;idl_code_generator.py&quot;</span><br><span class="line"></span><br><span class="line">    # Tell GN how to expand output names given the sources.</span><br><span class="line">    # See &quot;gn help source_expansion&quot; for more.</span><br><span class="line">    outputs &#x3D; [ &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.cc&quot;,</span><br><span class="line">                &quot;$target_gen_dir&#x2F;&#123;&#123;source_name_part&#125;&#125;.h&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Name the source set the same as the template invocation so instancing</span><br><span class="line">  # this template produces something that other targets can link to in their</span><br><span class="line">  # deps.</span><br><span class="line">  source_set(target_name) &#123;</span><br><span class="line">    # Generates the list of sources, we get these from the action_foreach</span><br><span class="line">    # above.</span><br><span class="line">    sources &#x3D; get_target_outputs(&quot;:$code_gen_target_name&quot;)</span><br><span class="line"></span><br><span class="line">    # This target depends on the files produced by the above code gen target.</span><br><span class="line">    deps &#x3D; [ &quot;:$code_gen_target_name&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Example-of-invoking-the-resulting-template"><a href="#Example-of-invoking-the-resulting-template" class="headerlink" title="Example of invoking the resulting template"></a><strong>Example of invoking the resulting template</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># This calls the template code above, defining target_name to be</span><br><span class="line"># &quot;foo_idl_files&quot; and &quot;invoker&quot; to be the set of stuff defined in the curly</span><br><span class="line"># brackets.</span><br><span class="line">my_idl(&quot;foo_idl_files&quot;) &#123;</span><br><span class="line">  # Goes into the template as &quot;invoker.sources&quot;.</span><br><span class="line">  sources &#x3D; [ &quot;foo.idl&quot;, &quot;bar.idl&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Here is a target that depends on our template.</span><br><span class="line">executable(&quot;my_exe&quot;) &#123;</span><br><span class="line">  # Depend on the name we gave the template call above. Internally, this will</span><br><span class="line">  # produce a dependency from executable to the source_set inside the</span><br><span class="line">  # template (since it has this name), which will in turn depend on the code</span><br><span class="line">  # gen action.</span><br><span class="line">  deps &#x3D; [ &quot;:foo_idl_files&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tool-Specify-arguments-to-a-toolchain-tool"><a href="#tool-Specify-arguments-to-a-toolchain-tool" class="headerlink" title="tool: Specify arguments to a toolchain tool."></a><a name="func_tool"></a><strong>tool</strong>: Specify arguments to a toolchain tool.</h3><h4 id="Usage-1"><a href="#Usage-1" class="headerlink" title="Usage"></a><strong>Usage</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tool(&lt;tool type&gt;) &#123;</span><br><span class="line">  &lt;tool variables...&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Tool-types"><a href="#Tool-types" class="headerlink" title="Tool types"></a><strong>Tool types</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Compiler tools:</span><br><span class="line">  &quot;cc&quot;: C compiler</span><br><span class="line">  &quot;cxx&quot;: C++ compiler</span><br><span class="line">  &quot;cxx_module&quot;: C++ compiler used for Clang .modulemap files</span><br><span class="line">  &quot;objc&quot;: Objective C compiler</span><br><span class="line">  &quot;objcxx&quot;: Objective C++ compiler</span><br><span class="line">  &quot;rc&quot;: Resource compiler (Windows .rc files)</span><br><span class="line">  &quot;asm&quot;: Assembler</span><br><span class="line">  &quot;swift&quot;: Swift compiler driver</span><br><span class="line"></span><br><span class="line">Linker tools:</span><br><span class="line">  &quot;alink&quot;: Linker for static libraries (archives)</span><br><span class="line">  &quot;solink&quot;: Linker for shared libraries</span><br><span class="line">  &quot;link&quot;: Linker for executables</span><br><span class="line"></span><br><span class="line">Other tools:</span><br><span class="line">  &quot;stamp&quot;: Tool for creating stamp files</span><br><span class="line">  &quot;copy&quot;: Tool to copy files.</span><br><span class="line">  &quot;action&quot;: Defaults for actions</span><br><span class="line"></span><br><span class="line">Platform specific tools:</span><br><span class="line">  &quot;copy_bundle_data&quot;: [iOS, macOS] Tool to copy files in a bundle.</span><br><span class="line">  &quot;compile_xcassets&quot;: [iOS, macOS] Tool to compile asset catalogs.</span><br><span class="line"></span><br><span class="line">Rust tools:</span><br><span class="line">  &quot;rust_bin&quot;: Tool for compiling Rust binaries</span><br><span class="line">  &quot;rust_cdylib&quot;: Tool for compiling C-compatible dynamic libraries.</span><br><span class="line">  &quot;rust_dylib&quot;: Tool for compiling Rust dynamic libraries.</span><br><span class="line">  &quot;rust_macro&quot;: Tool for compiling Rust procedural macros.</span><br><span class="line">  &quot;rust_rlib&quot;: Tool for compiling Rust libraries.</span><br><span class="line">  &quot;rust_staticlib&quot;: Tool for compiling Rust static libraries.</span><br></pre></td></tr></table></figure>

<h4 id="Tool-variables"><a href="#Tool-variables" class="headerlink" title="Tool variables"></a><strong>Tool variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br></pre></td><td class="code"><pre><span class="line">command  [string with substitutions]</span><br><span class="line">    Valid for: all tools except &quot;action&quot; (required)</span><br><span class="line"></span><br><span class="line">    The command to run.</span><br><span class="line"></span><br><span class="line">command_launcher  [string]</span><br><span class="line">    Valid for: all tools except &quot;action&quot; (optional)</span><br><span class="line"></span><br><span class="line">    The prefix with which to launch the command (e.g. the path to a Goma or</span><br><span class="line">    CCache compiler launcher).</span><br><span class="line"></span><br><span class="line">    Note that this prefix will not be included in the compilation database or</span><br><span class="line">    IDE files generated from the build.</span><br><span class="line"></span><br><span class="line">default_output_dir  [string with substitutions]</span><br><span class="line">    Valid for: linker tools</span><br><span class="line"></span><br><span class="line">    Default directory name for the output file relative to the</span><br><span class="line">    root_build_dir. It can contain other substitution patterns. This will</span><br><span class="line">    be the default value for the &#123;&#123;output_dir&#125;&#125; expansion (discussed below)</span><br><span class="line">    but will be overridden by the &quot;output_dir&quot; variable in a target, if one</span><br><span class="line">    is specified.</span><br><span class="line"></span><br><span class="line">    GN doesn&#39;t do anything with this string other than pass it along,</span><br><span class="line">    potentially with target-specific overrides. It is the tool&#39;s job to use</span><br><span class="line">    the expansion so that the files will be in the right place.</span><br><span class="line"></span><br><span class="line">default_output_extension  [string]</span><br><span class="line">    Valid for: linker tools</span><br><span class="line"></span><br><span class="line">    Extension for the main output of a linkable tool. It includes the</span><br><span class="line">    leading dot. This will be the default value for the</span><br><span class="line">    &#123;&#123;output_extension&#125;&#125; expansion (discussed below) but will be overridden</span><br><span class="line">    by by the &quot;output extension&quot; variable in a target, if one is specified.</span><br><span class="line">    Empty string means no extension.</span><br><span class="line"></span><br><span class="line">    GN doesn&#39;t actually do anything with this extension other than pass it</span><br><span class="line">    along, potentially with target-specific overrides. One would typically</span><br><span class="line">    use the &#123;&#123;output_extension&#125;&#125; value in the &quot;outputs&quot; to read this value.</span><br><span class="line"></span><br><span class="line">    Example: default_output_extension &#x3D; &quot;.exe&quot;</span><br><span class="line"></span><br><span class="line">depfile  [string with substitutions]</span><br><span class="line">    Valid for: compiler tools (optional)</span><br><span class="line"></span><br><span class="line">    If the tool can write &quot;.d&quot; files, this specifies the name of the</span><br><span class="line">    resulting file. These files are used to list header file dependencies</span><br><span class="line">    (or other implicit input dependencies) that are discovered at build</span><br><span class="line">    time. See also &quot;depsformat&quot;.</span><br><span class="line"></span><br><span class="line">    Example: depfile &#x3D; &quot;&#123;&#123;output&#125;&#125;.d&quot;</span><br><span class="line"></span><br><span class="line">depsformat  [string]</span><br><span class="line">    Valid for: compiler tools (when depfile is specified)</span><br><span class="line"></span><br><span class="line">    Format for the deps outputs. This is either &quot;gcc&quot; or &quot;msvc&quot;. See the</span><br><span class="line">    ninja documentation for &quot;deps&quot; for more information.</span><br><span class="line"></span><br><span class="line">    Example: depsformat &#x3D; &quot;gcc&quot;</span><br><span class="line"></span><br><span class="line">description  [string with substitutions, optional]</span><br><span class="line">    Valid for: all tools</span><br><span class="line"></span><br><span class="line">    What to print when the command is run.</span><br><span class="line"></span><br><span class="line">    Example: description &#x3D; &quot;Compiling &#123;&#123;source&#125;&#125;&quot;</span><br><span class="line"></span><br><span class="line">exe_output_extension [string, optional, rust tools only]</span><br><span class="line">rlib_output_extension [string, optional, rust tools only]</span><br><span class="line">dylib_output_extension [string, optional, rust tools only]</span><br><span class="line">cdylib_output_extension [string, optional, rust tools only]</span><br><span class="line">rust_proc_macro_output_extension [string, optional, rust tools only]</span><br><span class="line">    Valid for: Rust tools</span><br><span class="line"></span><br><span class="line">    These specify the default tool output for each of the crate types.</span><br><span class="line">    The default is empty for executables, shared, and static libraries and</span><br><span class="line">    &quot;.rlib&quot; for rlibs. Note that the Rust compiler complains with an error</span><br><span class="line">    if external crates do not take the form &#96;lib&lt;name&gt;.rlib&#96; or</span><br><span class="line">    &#96;lib&lt;name&gt;.&lt;shared_extension&gt;&#96;, where &#96;&lt;shared_extension&gt;&#96; is &#96;.so&#96;,</span><br><span class="line">    &#96;.dylib&#96;, or &#96;.dll&#96; as appropriate for the platform.</span><br><span class="line"></span><br><span class="line">lib_switch  [string, optional, link tools only]</span><br><span class="line">lib_dir_switch  [string, optional, link tools only]</span><br><span class="line">    Valid for: Linker tools except &quot;alink&quot;</span><br><span class="line"></span><br><span class="line">    These strings will be prepended to the libraries and library search</span><br><span class="line">    directories, respectively, because linkers differ on how to specify</span><br><span class="line">    them.</span><br><span class="line"></span><br><span class="line">    If you specified:</span><br><span class="line">      lib_switch &#x3D; &quot;-l&quot;</span><br><span class="line">      lib_dir_switch &#x3D; &quot;-L&quot;</span><br><span class="line">    then the &quot;&#123;&#123;libs&#125;&#125;&quot; expansion for</span><br><span class="line">      [ &quot;freetype&quot;, &quot;expat&quot; ]</span><br><span class="line">    would be</span><br><span class="line">      &quot;-lfreetype -lexpat&quot;.</span><br><span class="line"></span><br><span class="line">framework_switch [string, optional, link tools only]</span><br><span class="line">weak_framework_switch [string, optional, link tools only]</span><br><span class="line">framework_dir_switch [string, optional, link tools only]</span><br><span class="line">    Valid for: Linker tools</span><br><span class="line"></span><br><span class="line">    These strings will be prepended to the frameworks and framework search</span><br><span class="line">    path directories, respectively, because linkers differ on how to specify</span><br><span class="line">    them.</span><br><span class="line"></span><br><span class="line">    If you specified:</span><br><span class="line">      framework_switch &#x3D; &quot;-framework &quot;</span><br><span class="line">      weak_framework_switch &#x3D; &quot;-weak_framework &quot;</span><br><span class="line">      framework_dir_switch &#x3D; &quot;-F&quot;</span><br><span class="line">    and:</span><br><span class="line">      framework_dirs &#x3D; [ &quot;$root_out_dir&quot; ]</span><br><span class="line">      frameworks &#x3D; [ &quot;UIKit.framework&quot;, &quot;Foo.framework&quot; ]</span><br><span class="line">      weak_frameworks &#x3D; [ &quot;MediaPlayer.framework&quot; ]</span><br><span class="line">    would be:</span><br><span class="line">      &quot;-F. -framework UIKit -framework Foo -weak_framework MediaPlayer&quot;</span><br><span class="line"></span><br><span class="line">swiftmodule_switch [string, optional, link tools only]</span><br><span class="line">    Valid for: Linker tools except &quot;alink&quot;</span><br><span class="line"></span><br><span class="line">    The string will be prependend to the path to the .swiftmodule files</span><br><span class="line">    that are embedded in the linker output.</span><br><span class="line"></span><br><span class="line">    If you specified:</span><br><span class="line">      swiftmodule_swift &#x3D; &quot;-Wl,-add_ast_path,&quot;</span><br><span class="line">    then the &quot;&#123;&#123;swiftmodules&#125;&#125;&quot; expansion for</span><br><span class="line">      [ &quot;obj&#x2F;foo&#x2F;Foo.swiftmodule&quot; ]</span><br><span class="line">    would be</span><br><span class="line">      &quot;-Wl,-add_ast_path,obj&#x2F;foo&#x2F;Foo.swiftmodule&quot;</span><br><span class="line"></span><br><span class="line">outputs  [list of strings with substitutions]</span><br><span class="line">    Valid for: Linker and compiler tools (required)</span><br><span class="line"></span><br><span class="line">    An array of names for the output files the tool produces. These are</span><br><span class="line">    relative to the build output directory. There must always be at least</span><br><span class="line">    one output file. There can be more than one output (a linker might</span><br><span class="line">    produce a library and an import library, for example).</span><br><span class="line"></span><br><span class="line">    This array just declares to GN what files the tool will produce. It is</span><br><span class="line">    your responsibility to specify the tool command that actually produces</span><br><span class="line">    these files.</span><br><span class="line"></span><br><span class="line">    If you specify more than one output for shared library links, you</span><br><span class="line">    should consider setting link_output, depend_output, and</span><br><span class="line">    runtime_outputs.</span><br><span class="line"></span><br><span class="line">    Example for a compiler tool that produces .obj files:</span><br><span class="line">      outputs &#x3D; [</span><br><span class="line">        &quot;&#123;&#123;source_out_dir&#125;&#125;&#x2F;&#123;&#123;source_name_part&#125;&#125;.obj&quot;</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">    Example for a linker tool that produces a .dll and a .lib. The use of</span><br><span class="line">    &#123;&#123;target_output_name&#125;&#125;, &#123;&#123;output_extension&#125;&#125; and &#123;&#123;output_dir&#125;&#125; allows</span><br><span class="line">    the target to override these values.</span><br><span class="line">      outputs &#x3D; [</span><br><span class="line">        &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;&#123;&#123;output_extension&#125;&#125;&quot;,</span><br><span class="line">        &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;.lib&quot;,</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">partial_outputs  [list of strings with substitutions]</span><br><span class="line">    Valid for: &quot;swift&quot; only</span><br><span class="line"></span><br><span class="line">    An array of names for the partial outputs the tool produces. These</span><br><span class="line">    are relative to the build output directory. The expansion will be</span><br><span class="line">    evaluated for each file listed in the &quot;sources&quot; of the target.</span><br><span class="line"></span><br><span class="line">    This is used to deal with whole module optimization, allowing to</span><br><span class="line">    list one object file per source file when whole module optimization</span><br><span class="line">    is disabled.</span><br><span class="line"></span><br><span class="line">pool [label, optional]</span><br><span class="line">    Valid for: all tools (optional)</span><br><span class="line"></span><br><span class="line">    Label of the pool to use for the tool. Pools are used to limit the</span><br><span class="line">    number of tasks that can execute concurrently during the build.</span><br><span class="line"></span><br><span class="line">    See also &quot;gn help pool&quot;.</span><br><span class="line"></span><br><span class="line">link_output  [string with substitutions]</span><br><span class="line">depend_output  [string with substitutions]</span><br><span class="line">    Valid for: &quot;solink&quot; only (optional)</span><br><span class="line"></span><br><span class="line">    These two files specify which of the outputs from the solink tool</span><br><span class="line">    should be used for linking and dependency tracking. These should match</span><br><span class="line">    entries in the &quot;outputs&quot;. If unspecified, the first item in the</span><br><span class="line">    &quot;outputs&quot; array will be used for all. See &quot;Separate linking and</span><br><span class="line">    dependencies for shared libraries&quot; below for more.</span><br><span class="line"></span><br><span class="line">    On Windows, where the tools produce a .dll shared library and a .lib</span><br><span class="line">    import library, you will want the first two to be the import library</span><br><span class="line">    and the third one to be the .dll file. On Linux, if you&#39;re not doing</span><br><span class="line">    the separate linking&#x2F;dependency optimization, all of these should be</span><br><span class="line">    the .so output.</span><br><span class="line"></span><br><span class="line">output_prefix  [string]</span><br><span class="line">    Valid for: Linker tools (optional)</span><br><span class="line"></span><br><span class="line">    Prefix to use for the output name. Defaults to empty. This prefix will</span><br><span class="line">    be prepended to the name of the target (or the output_name if one is</span><br><span class="line">    manually specified for it) if the prefix is not already there. The</span><br><span class="line">    result will show up in the &#123;&#123;output_name&#125;&#125; substitution pattern.</span><br><span class="line"></span><br><span class="line">    Individual targets can opt-out of the output prefix by setting:</span><br><span class="line">      output_prefix_override &#x3D; true</span><br><span class="line">    (see &quot;gn help output_prefix_override&quot;).</span><br><span class="line"></span><br><span class="line">    This is typically used to prepend &quot;lib&quot; to libraries on</span><br><span class="line">    Posix systems:</span><br><span class="line">      output_prefix &#x3D; &quot;lib&quot;</span><br><span class="line"></span><br><span class="line">precompiled_header_type  [string]</span><br><span class="line">    Valid for: &quot;cc&quot;, &quot;cxx&quot;, &quot;objc&quot;, &quot;objcxx&quot;</span><br><span class="line"></span><br><span class="line">    Type of precompiled headers. If undefined or the empty string,</span><br><span class="line">    precompiled headers will not be used for this tool. Otherwise use &quot;gcc&quot;</span><br><span class="line">    or &quot;msvc&quot;.</span><br><span class="line"></span><br><span class="line">    For precompiled headers to be used for a given target, the target (or a</span><br><span class="line">    config applied to it) must also specify a &quot;precompiled_header&quot; and, for</span><br><span class="line">    &quot;msvc&quot;-style headers, a &quot;precompiled_source&quot; value. If the type is</span><br><span class="line">    &quot;gcc&quot;, then both &quot;precompiled_header&quot; and &quot;precompiled_source&quot; must</span><br><span class="line">    resolve to the same file, despite the different formats required for</span><br><span class="line">    each.&quot;</span><br><span class="line"></span><br><span class="line">    See &quot;gn help precompiled_header&quot; for more.</span><br><span class="line"></span><br><span class="line">restat  [boolean]</span><br><span class="line">    Valid for: all tools (optional, defaults to false)</span><br><span class="line"></span><br><span class="line">    Requests that Ninja check the file timestamp after this tool has run to</span><br><span class="line">    determine if anything changed. Set this if your tool has the ability to</span><br><span class="line">    skip writing output if the output file has not changed.</span><br><span class="line"></span><br><span class="line">    Normally, Ninja will assume that when a tool runs the output be new and</span><br><span class="line">    downstream dependents must be rebuild. When this is set to trye, Ninja</span><br><span class="line">    can skip rebuilding downstream dependents for input changes that don&#39;t</span><br><span class="line">    actually affect the output.</span><br><span class="line"></span><br><span class="line">    Example:</span><br><span class="line">      restat &#x3D; true</span><br><span class="line"></span><br><span class="line">rspfile  [string with substitutions]</span><br><span class="line">    Valid for: all tools except &quot;action&quot; (optional)</span><br><span class="line"></span><br><span class="line">    Name of the response file. If empty, no response file will be</span><br><span class="line">    used. See &quot;rspfile_content&quot;.</span><br><span class="line"></span><br><span class="line">rspfile_content  [string with substitutions]</span><br><span class="line">    Valid for: all tools except &quot;action&quot; (required when &quot;rspfile&quot; is used)</span><br><span class="line"></span><br><span class="line">    The contents to be written to the response file. This may include all</span><br><span class="line">    or part of the command to send to the tool which allows you to get</span><br><span class="line">    around OS command-line length limits.</span><br><span class="line"></span><br><span class="line">    This example adds the inputs and libraries to a response file, but</span><br><span class="line">    passes the linker flags directly on the command line:</span><br><span class="line">      tool(&quot;link&quot;) &#123;</span><br><span class="line">        command &#x3D; &quot;link -o &#123;&#123;output&#125;&#125; &#123;&#123;ldflags&#125;&#125; @&#123;&#123;output&#125;&#125;.rsp&quot;</span><br><span class="line">        rspfile &#x3D; &quot;&#123;&#123;output&#125;&#125;.rsp&quot;</span><br><span class="line">        rspfile_content &#x3D; &quot;&#123;&#123;inputs&#125;&#125; &#123;&#123;solibs&#125;&#125; &#123;&#123;libs&#125;&#125; &#123;&#123;rlibs&#125;&#125;&quot;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">runtime_outputs  [string list with substitutions]</span><br><span class="line">    Valid for: linker tools</span><br><span class="line"></span><br><span class="line">    If specified, this list is the subset of the outputs that should be</span><br><span class="line">    added to runtime deps (see &quot;gn help runtime_deps&quot;). By default (if</span><br><span class="line">    runtime_outputs is empty or unspecified), it will be the link_output.</span><br></pre></td></tr></table></figure>

<h4 id="Expansions-for-tool-variables"><a href="#Expansions-for-tool-variables" class="headerlink" title="Expansions for tool variables"></a><strong>Expansions for tool variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line">All paths are relative to the root build directory, which is the current</span><br><span class="line">directory for running all tools. These expansions are available to all tools:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;label&#125;&#125;</span><br><span class="line">      The label of the current target. This is typically used in the</span><br><span class="line">      &quot;description&quot; field for link tools. The toolchain will be omitted from</span><br><span class="line">      the label for targets in the default toolchain, and will be included</span><br><span class="line">      for targets in other toolchains.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;label_name&#125;&#125;</span><br><span class="line">      The short name of the label of the target. This is the part after the</span><br><span class="line">      colon. For &quot;&#x2F;&#x2F;foo&#x2F;bar:baz&quot; this will be &quot;baz&quot;. Unlike</span><br><span class="line">      &#123;&#123;target_output_name&#125;&#125;, this is not affected by the &quot;output_prefix&quot; in</span><br><span class="line">      the tool or the &quot;output_name&quot; set on the target.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;label_no_toolchain&#125;&#125;</span><br><span class="line">      The label of the current target, never including the toolchain</span><br><span class="line">      (otherwise, this is identical to &#123;&#123;label&#125;&#125;). This is used as the module</span><br><span class="line">      name when using .modulemap files.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;output&#125;&#125;</span><br><span class="line">      The relative path and name of the output(s) of the current build step.</span><br><span class="line">      If there is more than one output, this will expand to a list of all of</span><br><span class="line">      them. Example: &quot;out&#x2F;base&#x2F;my_file.o&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;target_gen_dir&#125;&#125;</span><br><span class="line">  &#123;&#123;target_out_dir&#125;&#125;</span><br><span class="line">      The directory of the generated file and output directories,</span><br><span class="line">      respectively, for the current target. There is no trailing slash. See</span><br><span class="line">      also &#123;&#123;output_dir&#125;&#125; for linker tools. Example: &quot;out&#x2F;base&#x2F;test&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;target_output_name&#125;&#125;</span><br><span class="line">      The short name of the current target with no path information, or the</span><br><span class="line">      value of the &quot;output_name&quot; variable if one is specified in the target.</span><br><span class="line">      This will include the &quot;output_prefix&quot; if any. See also &#123;&#123;label_name&#125;&#125;.</span><br><span class="line"></span><br><span class="line">      Example: &quot;libfoo&quot; for the target named &quot;foo&quot; and an output prefix for</span><br><span class="line">      the linker tool of &quot;lib&quot;.</span><br><span class="line"></span><br><span class="line">Compiler tools have the notion of a single input and a single output, along</span><br><span class="line">with a set of compiler-specific flags. The following expansions are</span><br><span class="line">available:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;asmflags&#125;&#125;</span><br><span class="line">  &#123;&#123;cflags&#125;&#125;</span><br><span class="line">  &#123;&#123;cflags_c&#125;&#125;</span><br><span class="line">  &#123;&#123;cflags_cc&#125;&#125;</span><br><span class="line">  &#123;&#123;cflags_objc&#125;&#125;</span><br><span class="line">  &#123;&#123;cflags_objcc&#125;&#125;</span><br><span class="line">  &#123;&#123;defines&#125;&#125;</span><br><span class="line">  &#123;&#123;include_dirs&#125;&#125;</span><br><span class="line">      Strings correspond that to the processed flags&#x2F;defines&#x2F;include</span><br><span class="line">      directories specified for the target.</span><br><span class="line">      Example: &quot;--enable-foo --enable-bar&quot;</span><br><span class="line"></span><br><span class="line">      Defines will be prefixed by &quot;-D&quot; and include directories will be</span><br><span class="line">      prefixed by &quot;-I&quot; (these work with Posix tools as well as Microsoft</span><br><span class="line">      ones).</span><br><span class="line"></span><br><span class="line">  &#123;&#123;module_deps&#125;&#125;</span><br><span class="line">  &#123;&#123;module_deps_no_self&#125;&#125;</span><br><span class="line">      Strings that correspond to the flags necessary to depend upon the Clang</span><br><span class="line">      modules referenced by the current target. The &quot;_no_self&quot; version doesn&#39;t</span><br><span class="line">      include the module for the current target, and can be used to compile</span><br><span class="line">      the pcm itself.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;source&#125;&#125;</span><br><span class="line">      The relative path and name of the current input file.</span><br><span class="line">      Example: &quot;..&#x2F;..&#x2F;base&#x2F;my_file.cc&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;source_file_part&#125;&#125;</span><br><span class="line">      The file part of the source including the extension (with no directory</span><br><span class="line">      information).</span><br><span class="line">      Example: &quot;foo.cc&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;source_name_part&#125;&#125;</span><br><span class="line">      The filename part of the source file with no directory or extension.</span><br><span class="line">      Example: &quot;foo&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;source_gen_dir&#125;&#125;</span><br><span class="line">  &#123;&#123;source_out_dir&#125;&#125;</span><br><span class="line">      The directory in the generated file and output directories,</span><br><span class="line">      respectively, for the current input file. If the source file is in the</span><br><span class="line">      same directory as the target is declared in, they will will be the same</span><br><span class="line">      as the &quot;target&quot; versions above. Example: &quot;gen&#x2F;base&#x2F;test&quot;</span><br><span class="line"></span><br><span class="line">Linker tools have multiple inputs and (potentially) multiple outputs. The</span><br><span class="line">static library tool (&quot;alink&quot;) is not considered a linker tool. The following</span><br><span class="line">expansions are available:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;inputs&#125;&#125;</span><br><span class="line">  &#123;&#123;inputs_newline&#125;&#125;</span><br><span class="line">      Expands to the inputs to the link step. This will be a list of object</span><br><span class="line">      files and static libraries.</span><br><span class="line">      Example: &quot;obj&#x2F;foo.o obj&#x2F;bar.o obj&#x2F;somelibrary.a&quot;</span><br><span class="line"></span><br><span class="line">      The &quot;_newline&quot; version will separate the input files with newlines</span><br><span class="line">      instead of spaces. This is useful in response files: some linkers can</span><br><span class="line">      take a &quot;-filelist&quot; flag which expects newline separated files, and some</span><br><span class="line">      Microsoft tools have a fixed-sized buffer for parsing each line of a</span><br><span class="line">      response file.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;ldflags&#125;&#125;</span><br><span class="line">      Expands to the processed set of ldflags and library search paths</span><br><span class="line">      specified for the target.</span><br><span class="line">      Example: &quot;-m64 -fPIC -pthread -L&#x2F;usr&#x2F;local&#x2F;mylib&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;libs&#125;&#125;</span><br><span class="line">      Expands to the list of system libraries to link to. Each will be</span><br><span class="line">      prefixed by the &quot;lib_switch&quot;.</span><br><span class="line"></span><br><span class="line">      Example: &quot;-lfoo -lbar&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;output_dir&#125;&#125;</span><br><span class="line">      The value of the &quot;output_dir&quot; variable in the target, or the the value</span><br><span class="line">      of the &quot;default_output_dir&quot; value in the tool if the target does not</span><br><span class="line">      override the output directory. This will be relative to the</span><br><span class="line">      root_build_dir and will not end in a slash. Will be &quot;.&quot; for output to</span><br><span class="line">      the root_build_dir.</span><br><span class="line"></span><br><span class="line">      This is subtly different than &#123;&#123;target_out_dir&#125;&#125; which is defined by GN</span><br><span class="line">      based on the target&#39;s path and not overridable. &#123;&#123;output_dir&#125;&#125; is for</span><br><span class="line">      the final output, &#123;&#123;target_out_dir&#125;&#125; is generally for object files and</span><br><span class="line">      other outputs.</span><br><span class="line"></span><br><span class="line">      Usually &#123;&#123;output_dir&#125;&#125; would be defined in terms of either</span><br><span class="line">      &#123;&#123;target_out_dir&#125;&#125; or &#123;&#123;root_out_dir&#125;&#125;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;output_extension&#125;&#125;</span><br><span class="line">      The value of the &quot;output_extension&quot; variable in the target, or the</span><br><span class="line">      value of the &quot;default_output_extension&quot; value in the tool if the target</span><br><span class="line">      does not specify an output extension.</span><br><span class="line">      Example: &quot;.so&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;solibs&#125;&#125;</span><br><span class="line">      Extra libraries from shared library dependencies not specified in the</span><br><span class="line">      &#123;&#123;inputs&#125;&#125;. This is the list of link_output files from shared libraries</span><br><span class="line">      (if the solink tool specifies a &quot;link_output&quot; variable separate from</span><br><span class="line">      the &quot;depend_output&quot;).</span><br><span class="line"></span><br><span class="line">      These should generally be treated the same as libs by your tool.</span><br><span class="line"></span><br><span class="line">      Example: &quot;libfoo.so libbar.so&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;rlibs&#125;&#125;</span><br><span class="line">      Any Rust .rlibs which need to be linked into a final C++ target.</span><br><span class="line">      These should be treated as &#123;&#123;inputs&#125;&#125; except that sometimes</span><br><span class="line">      they might have different linker directives applied.</span><br><span class="line"></span><br><span class="line">      Example: &quot;obj&#x2F;foo&#x2F;libfoo.rlib&quot;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;frameworks&#125;&#125;</span><br><span class="line">      Shared libraries packaged as framework bundle. This is principally</span><br><span class="line">      used on Apple&#39;s platforms (macOS and iOS). All name must be ending</span><br><span class="line">      with &quot;.framework&quot; suffix; the suffix will be stripped when expanding</span><br><span class="line">      &#123;&#123;frameworks&#125;&#125; and each item will be preceded by &quot;-framework&quot; or</span><br><span class="line">      &quot;-weak_framework&quot;.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;swiftmodules&#125;&#125;</span><br><span class="line">      Swift .swiftmodule files that needs to be embedded into the binary.</span><br><span class="line">      This is necessary to correctly link with object generated by the</span><br><span class="line">      Swift compiler (the .swiftmodule file cannot be embedded in object</span><br><span class="line">      files directly). Those will be prefixed with &quot;swiftmodule_switch&quot;</span><br><span class="line">      value.</span><br><span class="line"></span><br><span class="line">The static library (&quot;alink&quot;) tool allows &#123;&#123;arflags&#125;&#125; plus the common tool</span><br><span class="line">substitutions.</span><br><span class="line"></span><br><span class="line">The copy tool allows the common compiler&#x2F;linker substitutions, plus</span><br><span class="line">&#123;&#123;source&#125;&#125; which is the source of the copy. The stamp tool allows only the</span><br><span class="line">common tool substitutions.</span><br><span class="line"></span><br><span class="line">The copy_bundle_data and compile_xcassets tools only allows the common tool</span><br><span class="line">substitutions. Both tools are required to create iOS&#x2F;macOS bundles and need</span><br><span class="line">only be defined on those platforms.</span><br><span class="line"></span><br><span class="line">The copy_bundle_data tool will be called with one source and needs to copy</span><br><span class="line">(optionally optimizing the data representation) to its output. It may be</span><br><span class="line">called with a directory as input and it needs to be recursively copied.</span><br><span class="line"></span><br><span class="line">The compile_xcassets tool will be called with one or more source (each an</span><br><span class="line">asset catalog) that needs to be compiled to a single output. The following</span><br><span class="line">substitutions are available:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;inputs&#125;&#125;</span><br><span class="line">      Expands to the list of .xcassets to use as input to compile the asset</span><br><span class="line">      catalog.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;bundle_product_type&#125;&#125;</span><br><span class="line">      Expands to the product_type of the bundle that will contain the</span><br><span class="line">      compiled asset catalog. Usually corresponds to the product_type</span><br><span class="line">      property of the corresponding create_bundle target.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;bundle_partial_info_plist&#125;&#125;</span><br><span class="line">      Expands to the path to the partial Info.plist generated by the</span><br><span class="line">      assets catalog compiler. Usually based on the target_name of</span><br><span class="line">      the create_bundle target.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;xcasset_compiler_flags&#125;&#125;</span><br><span class="line">      Expands to the list of flags specified in corresponding</span><br><span class="line">      create_bundle target.</span><br><span class="line"></span><br><span class="line">The Swift tool has multiple input and outputs. It must have exactly one</span><br><span class="line">output of .swiftmodule type, but can have one or more object file outputs,</span><br><span class="line">in addition to other type of outputs. The following expansions are available:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;module_name&#125;&#125;</span><br><span class="line">      Expands to the string representing the module name of target under</span><br><span class="line">      compilation (see &quot;module_name&quot; variable).</span><br><span class="line"></span><br><span class="line">  &#123;&#123;module_dirs&#125;&#125;</span><br><span class="line">      Expands to the list of -I&lt;path&gt; for the target Swift module search</span><br><span class="line">      path computed from target dependencies.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;swiftflags&#125;&#125;</span><br><span class="line">      Expands to the list of strings representing Swift compiler flags.</span><br><span class="line"></span><br><span class="line">Rust tools have the notion of a single input and a single output, along</span><br><span class="line">with a set of compiler-specific flags. The following expansions are</span><br><span class="line">available:</span><br><span class="line"></span><br><span class="line">  &#123;&#123;crate_name&#125;&#125;</span><br><span class="line">      Expands to the string representing the crate name of target under</span><br><span class="line">      compilation.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;crate_type&#125;&#125;</span><br><span class="line">      Expands to the string representing the type of crate for the target</span><br><span class="line">      under compilation.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;externs&#125;&#125;</span><br><span class="line">      Expands to the list of --extern flags needed to include addition Rust</span><br><span class="line">      libraries in this target. Includes any specified renamed dependencies.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;rustdeps&#125;&#125;</span><br><span class="line">      Expands to the list of -Ldependency&#x3D;&lt;path&gt; strings needed to compile</span><br><span class="line">      this target.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;rustenv&#125;&#125;</span><br><span class="line">      Expands to the list of environment variables.</span><br><span class="line"></span><br><span class="line">  &#123;&#123;rustflags&#125;&#125;</span><br><span class="line">      Expands to the list of strings representing Rust compiler flags.</span><br></pre></td></tr></table></figure>

<h4 id="Separate-linking-and-dependencies-for-shared-libraries"><a href="#Separate-linking-and-dependencies-for-shared-libraries" class="headerlink" title="Separate linking and dependencies for shared libraries"></a><strong>Separate linking and dependencies for shared libraries</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Shared libraries are special in that not all changes to them require that</span><br><span class="line">dependent targets be re-linked. If the shared library is changed but no</span><br><span class="line">imports or exports are different, dependent code needn&#39;t be relinked, which</span><br><span class="line">can speed up the build.</span><br><span class="line"></span><br><span class="line">If your link step can output a list of exports from a shared library and</span><br><span class="line">writes the file only if the new one is different, the timestamp of this file</span><br><span class="line">can be used for triggering re-links, while the actual shared library would be</span><br><span class="line">used for linking.</span><br><span class="line"></span><br><span class="line">You will need to specify</span><br><span class="line">  restat &#x3D; true</span><br><span class="line">in the linker tool to make this work, so Ninja will detect if the timestamp</span><br><span class="line">of the dependency file has changed after linking (otherwise it will always</span><br><span class="line">assume that running a command updates the output):</span><br><span class="line"></span><br><span class="line">  tool(&quot;solink&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;...&quot;</span><br><span class="line">    outputs &#x3D; [</span><br><span class="line">      &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;&#123;&#123;output_extension&#125;&#125;&quot;,</span><br><span class="line">      &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;&#123;&#123;output_extension&#125;&#125;.TOC&quot;,</span><br><span class="line">    ]</span><br><span class="line">    link_output &#x3D;</span><br><span class="line">      &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;&#123;&#123;output_extension&#125;&#125;&quot;</span><br><span class="line">    depend_output &#x3D;</span><br><span class="line">      &quot;&#123;&#123;output_dir&#125;&#125;&#x2F;&#123;&#123;target_output_name&#125;&#125;&#123;&#123;output_extension&#125;&#125;.TOC&quot;</span><br><span class="line">    restat &#x3D; true</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Example-24"><a href="#Example-24" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">toolchain(&quot;my_toolchain&quot;) &#123;</span><br><span class="line">  # Put these at the top to apply to all tools below.</span><br><span class="line">  lib_switch &#x3D; &quot;-l&quot;</span><br><span class="line">  lib_dir_switch &#x3D; &quot;-L&quot;</span><br><span class="line"></span><br><span class="line">  tool(&quot;cc&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;gcc &#123;&#123;source&#125;&#125; -o &#123;&#123;output&#125;&#125;&quot;</span><br><span class="line">    outputs &#x3D; [ &quot;&#123;&#123;source_out_dir&#125;&#125;&#x2F;&#123;&#123;source_name_part&#125;&#125;.o&quot; ]</span><br><span class="line">    description &#x3D; &quot;GCC &#123;&#123;source&#125;&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  tool(&quot;cxx&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;g++ &#123;&#123;source&#125;&#125; -o &#123;&#123;output&#125;&#125;&quot;</span><br><span class="line">    outputs &#x3D; [ &quot;&#123;&#123;source_out_dir&#125;&#125;&#x2F;&#123;&#123;source_name_part&#125;&#125;.o&quot; ]</span><br><span class="line">    description &#x3D; &quot;G++ &#123;&#123;source&#125;&#125;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="toolchain-Defines-a-toolchain"><a href="#toolchain-Defines-a-toolchain" class="headerlink" title="toolchain: Defines a toolchain."></a><a name="func_toolchain"></a><strong>toolchain</strong>: Defines a toolchain.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A toolchain is a set of commands and build flags used to compile the source</span><br><span class="line">code. The toolchain() function defines these commands.</span><br></pre></td></tr></table></figure>

<h4 id="Toolchain-overview"><a href="#Toolchain-overview" class="headerlink" title="Toolchain overview"></a><strong>Toolchain overview</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">You can have more than one toolchain in use at once in a build and a target</span><br><span class="line">can exist simultaneously in multiple toolchains. A build file is executed</span><br><span class="line">once for each toolchain it is referenced in so the GN code can vary all</span><br><span class="line">parameters of each target (or which targets exist) on a per-toolchain basis.</span><br><span class="line"></span><br><span class="line">When you have a simple build with only one toolchain, the build config file</span><br><span class="line">is loaded only once at the beginning of the build. It must call</span><br><span class="line">set_default_toolchain() (see &quot;gn help set_default_toolchain&quot;) to tell GN the</span><br><span class="line">label of the toolchain definition to use. The &quot;toolchain_args&quot; section of the</span><br><span class="line">toolchain definition is ignored.</span><br><span class="line"></span><br><span class="line">When a target has a dependency on a target using different toolchain (see &quot;gn</span><br><span class="line">help labels&quot; for how to specify this), GN will start a build using that</span><br><span class="line">secondary toolchain to resolve the target. GN will load the build config file</span><br><span class="line">with the build arguments overridden as specified in the toolchain_args.</span><br><span class="line">Because the default toolchain is already known, calls to</span><br><span class="line">set_default_toolchain() are ignored.</span><br><span class="line"></span><br><span class="line">To load a file in an alternate toolchain, GN does the following:</span><br><span class="line"></span><br><span class="line">  1. Loads the file with the toolchain definition in it (as determined by the</span><br><span class="line">     toolchain label).</span><br><span class="line">  2. Re-runs the master build configuration file, applying the arguments</span><br><span class="line">     specified by the toolchain_args section of the toolchain definition.</span><br><span class="line">  3. Loads the destination build file in the context of the configuration file</span><br><span class="line">     in the previous step.</span><br><span class="line"></span><br><span class="line">The toolchain configuration is two-way. In the default toolchain (i.e. the</span><br><span class="line">main build target) the configuration flows from the build config file to the</span><br><span class="line">toolchain. The build config file looks at the state of the build (OS type,</span><br><span class="line">CPU architecture, etc.) and decides which toolchain to use (via</span><br><span class="line">set_default_toolchain()). In secondary toolchains, the configuration flows</span><br><span class="line">from the toolchain to the build config file: the &quot;toolchain_args&quot; in the</span><br><span class="line">toolchain definition specifies the arguments to re-invoke the build.</span><br></pre></td></tr></table></figure>

<h4 id="Functions-and-variables"><a href="#Functions-and-variables" class="headerlink" title="Functions and variables"></a><strong>Functions and variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">tool()</span><br><span class="line">  The tool() function call specifies the commands to run for a given step. See</span><br><span class="line">  &quot;gn help tool&quot;.</span><br><span class="line"></span><br><span class="line">toolchain_args [scope]</span><br><span class="line">  Overrides for build arguments to pass to the toolchain when invoking it.</span><br><span class="line">  This is a variable of type &quot;scope&quot; where the variable names correspond to</span><br><span class="line">  variables in declare_args() blocks.</span><br><span class="line"></span><br><span class="line">  When you specify a target using an alternate toolchain, the master build</span><br><span class="line">  configuration file is re-interpreted in the context of that toolchain.</span><br><span class="line">  toolchain_args allows you to control the arguments passed into this</span><br><span class="line">  alternate invocation of the build.</span><br><span class="line"></span><br><span class="line">  Any default system arguments or arguments passed in via &quot;gn args&quot; will also</span><br><span class="line">  be passed to the alternate invocation unless explicitly overridden by</span><br><span class="line">  toolchain_args.</span><br><span class="line"></span><br><span class="line">  The toolchain_args will be ignored when the toolchain being defined is the</span><br><span class="line">  default. In this case, it&#39;s expected you want the default argument values.</span><br><span class="line"></span><br><span class="line">  See also &quot;gn help buildargs&quot; for an overview of these arguments.</span><br><span class="line"></span><br><span class="line">propagates_configs [boolean, default&#x3D;false]</span><br><span class="line">  Determines whether public_configs and all_dependent_configs in this</span><br><span class="line">  toolchain propagate to targets in other toolchains.</span><br><span class="line"></span><br><span class="line">  When false (the default), this toolchain will not propagate any configs to</span><br><span class="line">  targets in other toolchains that depend on it targets inside this</span><br><span class="line">  toolchain. This matches the most common usage of toolchains where they</span><br><span class="line">  represent different architectures or compilers and the settings that apply</span><br><span class="line">  to one won&#39;t necessarily apply to others.</span><br><span class="line"></span><br><span class="line">  When true, configs (public and all-dependent) will cross the boundary out</span><br><span class="line">  of this toolchain as if the toolchain boundary wasn&#39;t there. This only</span><br><span class="line">  affects one direction of dependencies: a toolchain can&#39;t control whether</span><br><span class="line">  it accepts such configs, only whether it pushes them. The build is</span><br><span class="line">  responsible for ensuring that any external targets depending on targets in</span><br><span class="line">  this toolchain are compatible with the compiler flags, etc. that may be</span><br><span class="line">  propagated.</span><br><span class="line"></span><br><span class="line">deps [string list]</span><br><span class="line">  Dependencies of this toolchain. These dependencies will be resolved before</span><br><span class="line">  any target in the toolchain is compiled. To avoid circular dependencies</span><br><span class="line">  these must be targets defined in another toolchain.</span><br><span class="line"></span><br><span class="line">  This is expressed as a list of targets, and generally these targets will</span><br><span class="line">  always specify a toolchain:</span><br><span class="line">    deps &#x3D; [ &quot;&#x2F;&#x2F;foo&#x2F;bar:baz(&#x2F;&#x2F;build&#x2F;toolchain:bootstrap)&quot; ]</span><br><span class="line"></span><br><span class="line">  This concept is somewhat inefficient to express in Ninja (it requires a lot</span><br><span class="line">  of duplicate of rules) so should only be used when absolutely necessary.</span><br></pre></td></tr></table></figure>

<h4 id="Example-of-defining-a-toolchain"><a href="#Example-of-defining-a-toolchain" class="headerlink" title="Example of defining a toolchain"></a><strong>Example of defining a toolchain</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">toolchain(&quot;32&quot;) &#123;</span><br><span class="line">  tool(&quot;cc&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;gcc &#123;&#123;source&#125;&#125;&quot;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toolchain_args &#x3D; &#123;</span><br><span class="line">    use_doom_melon &#x3D; true  # Doom melon always required for 32-bit builds.</span><br><span class="line">    current_cpu &#x3D; &quot;x86&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">toolchain(&quot;64&quot;) &#123;</span><br><span class="line">  tool(&quot;cc&quot;) &#123;</span><br><span class="line">    command &#x3D; &quot;gcc &#123;&#123;source&#125;&#125;&quot;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toolchain_args &#x3D; &#123;</span><br><span class="line">    # use_doom_melon is not overridden here, it will take the default.</span><br><span class="line">    current_cpu &#x3D; &quot;x64&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Example-of-cross-toolchain-dependencies"><a href="#Example-of-cross-toolchain-dependencies" class="headerlink" title="Example of cross-toolchain dependencies"></a><strong>Example of cross-toolchain dependencies</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">If a 64-bit target wants to depend on a 32-bit binary, it would specify a</span><br><span class="line">dependency using data_deps (data deps are like deps that are only needed at</span><br><span class="line">runtime and aren&#39;t linked, since you can&#39;t link a 32-bit and a 64-bit</span><br><span class="line">library).</span><br><span class="line"></span><br><span class="line">  executable(&quot;my_program&quot;) &#123;</span><br><span class="line">    ...</span><br><span class="line">    if (target_cpu &#x3D;&#x3D; &quot;x64&quot;) &#123;</span><br><span class="line">      # The 64-bit build needs this 32-bit helper.</span><br><span class="line">      data_deps &#x3D; [ &quot;:helper(&#x2F;&#x2F;toolchains:32)&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (target_cpu &#x3D;&#x3D; &quot;x86&quot;) &#123;</span><br><span class="line">    # Our helper library is only compiled in 32-bits.</span><br><span class="line">    shared_library(&quot;helper&quot;) &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="write-file-Write-a-file-to-disk"><a href="#write-file-Write-a-file-to-disk" class="headerlink" title="write_file: Write a file to disk."></a><a name="func_write_file"></a><strong>write_file</strong>: Write a file to disk.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">write_file(filename, data, output_conversion &#x3D; &quot;&quot;)</span><br><span class="line"></span><br><span class="line">If data is a list, the list will be written one-item-per-line with no quoting</span><br><span class="line">or brackets.</span><br><span class="line"></span><br><span class="line">If the file exists and the contents are identical to that being written, the</span><br><span class="line">file will not be updated. This will prevent unnecessary rebuilds of targets</span><br><span class="line">that depend on this file.</span><br><span class="line"></span><br><span class="line">One use for write_file is to write a list of inputs to an script that might</span><br><span class="line">be too long for the command line. However, it is preferable to use response</span><br><span class="line">files for this purpose. See &quot;gn help response_file_contents&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Arguments-6"><a href="#Arguments-6" class="headerlink" title="Arguments"></a><strong>Arguments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">filename</span><br><span class="line">    Filename to write. This must be within the output directory.</span><br><span class="line"></span><br><span class="line">data</span><br><span class="line">    The list or string to write.</span><br><span class="line"></span><br><span class="line">output_conversion</span><br><span class="line">  Controls how the output is written. See &#96;gn help io_conversion&#96;.</span><br></pre></td></tr></table></figure>
<h2 id="Built-in-predefined-variables"><a href="#Built-in-predefined-variables" class="headerlink" title="Built-in predefined variables"></a><a name="predefined_variables"></a>Built-in predefined variables</h2><h3 id="current-cpu-The-processor-architecture-of-the-current-toolchain"><a href="#current-cpu-The-processor-architecture-of-the-current-toolchain" class="headerlink" title="current_cpu: The processor architecture of the current toolchain."></a><a name="var_current_cpu"></a><strong>current_cpu</strong>: The processor architecture of the current toolchain.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">The build configuration usually sets this value based on the value of</span><br><span class="line">&quot;host_cpu&quot; (see &quot;gn help host_cpu&quot;) and then threads this through the</span><br><span class="line">toolchain definitions to ensure that it always reflects the appropriate</span><br><span class="line">value.</span><br><span class="line"></span><br><span class="line">This value is not used internally by GN for any purpose. It is set to the</span><br><span class="line">empty string (&quot;&quot;) by default but is declared so that it can be overridden on</span><br><span class="line">the command line if so desired.</span><br><span class="line"></span><br><span class="line">See &quot;gn help target_cpu&quot; for a list of common values returned.</span><br></pre></td></tr></table></figure>
<h3 id="current-os-The-operating-system-of-the-current-toolchain"><a href="#current-os-The-operating-system-of-the-current-toolchain" class="headerlink" title="current_os: The operating system of the current toolchain."></a><a name="var_current_os"></a><strong>current_os</strong>: The operating system of the current toolchain.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">The build configuration usually sets this value based on the value of</span><br><span class="line">&quot;target_os&quot; (see &quot;gn help target_os&quot;), and then threads this through the</span><br><span class="line">toolchain definitions to ensure that it always reflects the appropriate</span><br><span class="line">value.</span><br><span class="line"></span><br><span class="line">This value is not used internally by GN for any purpose. It is set to the</span><br><span class="line">empty string (&quot;&quot;) by default but is declared so that it can be overridden on</span><br><span class="line">the command line if so desired.</span><br><span class="line"></span><br><span class="line">See &quot;gn help target_os&quot; for a list of common values returned.</span><br></pre></td></tr></table></figure>
<h3 id="current-toolchain-Label-of-the-current-toolchain"><a href="#current-toolchain-Label-of-the-current-toolchain" class="headerlink" title="current_toolchain: Label of the current toolchain."></a><a name="var_current_toolchain"></a><strong>current_toolchain</strong>: Label of the current toolchain.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A fully-qualified label representing the current toolchain. You can use this</span><br><span class="line">to make toolchain-related decisions in the build. See also</span><br><span class="line">&quot;default_toolchain&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-25"><a href="#Example-25" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (current_toolchain &#x3D;&#x3D; &quot;&#x2F;&#x2F;build:64_bit_toolchain&quot;) &#123;</span><br><span class="line">  executable(&quot;output_thats_64_bit_only&quot;) &#123;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h3 id="default-toolchain-string-Label-of-the-default-toolchain"><a href="#default-toolchain-string-Label-of-the-default-toolchain" class="headerlink" title="default_toolchain: [string] Label of the default toolchain."></a><a name="var_default_toolchain"></a><strong>default_toolchain</strong>: [string] Label of the default toolchain.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A fully-qualified label representing the default toolchain, which may not</span><br><span class="line">necessarily be the current one (see &quot;current_toolchain&quot;).</span><br></pre></td></tr></table></figure>
<h3 id="gn-version-number-The-version-of-gn"><a href="#gn-version-number-The-version-of-gn" class="headerlink" title="gn_version: [number] The version of gn."></a><a name="var_gn_version"></a><strong>gn_version</strong>: [number] The version of gn.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Corresponds to the number printed by &#96;gn --version&#96;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-26"><a href="#Example-26" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert(gn_version &gt;&#x3D; 1700, &quot;need GN version 1700 for the frobulate feature&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="host-cpu-The-processor-architecture-that-GN-is-running-on"><a href="#host-cpu-The-processor-architecture-that-GN-is-running-on" class="headerlink" title="host_cpu: The processor architecture that GN is running on."></a><a name="var_host_cpu"></a><strong>host_cpu</strong>: The processor architecture that GN is running on.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">This is value is exposed so that cross-compile toolchains can access the host</span><br><span class="line">architecture when needed.</span><br><span class="line"></span><br><span class="line">The value should generally be considered read-only, but it can be overridden</span><br><span class="line">in order to handle unusual cases where there might be multiple plausible</span><br><span class="line">values for the host architecture (e.g., if you can do either 32-bit or 64-bit</span><br><span class="line">builds). The value is not used internally by GN for any purpose.</span><br></pre></td></tr></table></figure>

<h4 id="Some-possible-values"><a href="#Some-possible-values" class="headerlink" title="Some possible values"></a><strong>Some possible values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- &quot;x64&quot;</span><br><span class="line">- &quot;x86&quot;</span><br></pre></td></tr></table></figure>
<h3 id="host-os-string-The-operating-system-that-GN-is-running-on"><a href="#host-os-string-The-operating-system-that-GN-is-running-on" class="headerlink" title="host_os: [string] The operating system that GN is running on."></a><a name="var_host_os"></a><strong>host_os</strong>: [string] The operating system that GN is running on.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This value is exposed so that cross-compiles can access the host build</span><br><span class="line">system&#39;s settings.</span><br><span class="line"></span><br><span class="line">This value should generally be treated as read-only. It, however, is not used</span><br><span class="line">internally by GN for any purpose.</span><br></pre></td></tr></table></figure>

<h4 id="Some-possible-values-1"><a href="#Some-possible-values-1" class="headerlink" title="Some possible values"></a><strong>Some possible values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- &quot;linux&quot;</span><br><span class="line">- &quot;mac&quot;</span><br><span class="line">- &quot;win&quot;</span><br></pre></td></tr></table></figure>
<h3 id="invoker-string-The-invoking-scope-inside-a-template"><a href="#invoker-string-The-invoking-scope-inside-a-template" class="headerlink" title="invoker: [string] The invoking scope inside a template."></a><a name="var_invoker"></a><strong>invoker</strong>: [string] The invoking scope inside a template.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Inside a template invocation, this variable refers to the scope of the</span><br><span class="line">invoker of the template. Outside of template invocations, this variable is</span><br><span class="line">undefined.</span><br><span class="line"></span><br><span class="line">All of the variables defined inside the template invocation are accessible as</span><br><span class="line">members of the &quot;invoker&quot; scope. This is the way that templates read values</span><br><span class="line">set by the callers.</span><br><span class="line"></span><br><span class="line">This is often used with &quot;defined&quot; to see if a value is set on the invoking</span><br><span class="line">scope.</span><br><span class="line"></span><br><span class="line">See &quot;gn help template&quot; for more examples.</span><br></pre></td></tr></table></figure>

<h4 id="Example-27"><a href="#Example-27" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">template(&quot;my_template&quot;) &#123;</span><br><span class="line">  print(invoker.sources)       # Prints [ &quot;a.cc&quot;, &quot;b.cc&quot; ]</span><br><span class="line">  print(defined(invoker.foo))  # Prints false.</span><br><span class="line">  print(defined(invoker.bar))  # Prints true.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my_template(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;a.cc&quot;, &quot;b.cc&quot; ]</span><br><span class="line">  bar &#x3D; 123</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="python-path-Absolute-path-of-Python"><a href="#python-path-Absolute-path-of-Python" class="headerlink" title="python_path: Absolute path of Python."></a><a name="var_python_path"></a><strong>python_path</strong>: Absolute path of Python.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Normally used in toolchain definitions if running some command requires</span><br><span class="line">Python. You will normally not need this when invoking scripts since GN</span><br><span class="line">automatically finds it for you.</span><br></pre></td></tr></table></figure>
<h3 id="root-build-dir-string-Directory-where-build-commands-are-run"><a href="#root-build-dir-string-Directory-where-build-commands-are-run" class="headerlink" title="root_build_dir: [string] Directory where build commands are run."></a><a name="var_root_build_dir"></a><strong>root_build_dir</strong>: [string] Directory where build commands are run.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This is the root build output directory which will be the current directory</span><br><span class="line">when executing all compilers and scripts.</span><br><span class="line"></span><br><span class="line">Most often this is used with rebase_path (see &quot;gn help rebase_path&quot;) to</span><br><span class="line">convert arguments to be relative to a script&#39;s current directory.</span><br></pre></td></tr></table></figure>
<h3 id="root-gen-dir-Directory-for-the-toolchain’s-generated-files"><a href="#root-gen-dir-Directory-for-the-toolchain’s-generated-files" class="headerlink" title="root_gen_dir: Directory for the toolchain’s generated files."></a><a name="var_root_gen_dir"></a><strong>root_gen_dir</strong>: Directory for the toolchain’s generated files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Absolute path to the root of the generated output directory tree for the</span><br><span class="line">current toolchain. An example would be &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;gen&quot; for the default</span><br><span class="line">toolchain, or &quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;arm&#x2F;gen&quot; for the &quot;arm&quot; toolchain.</span><br><span class="line"></span><br><span class="line">This is primarily useful for setting up include paths for generated files. If</span><br><span class="line">you are passing this to a script, you will want to pass it through</span><br><span class="line">rebase_path() (see &quot;gn help rebase_path&quot;) to convert it to be relative to the</span><br><span class="line">build directory.</span><br><span class="line"></span><br><span class="line">See also &quot;target_gen_dir&quot; which is usually a better location for generated</span><br><span class="line">files. It will be inside the root generated dir.</span><br></pre></td></tr></table></figure>
<h3 id="root-out-dir-string-Root-directory-for-toolchain-output-files"><a href="#root-out-dir-string-Root-directory-for-toolchain-output-files" class="headerlink" title="root_out_dir: [string] Root directory for toolchain output files."></a><a name="var_root_out_dir"></a><strong>root_out_dir</strong>: [string] Root directory for toolchain output files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Absolute path to the root of the output directory tree for the current</span><br><span class="line">toolchain. It will not have a trailing slash.</span><br><span class="line"></span><br><span class="line">For the default toolchain this will be the same as the root_build_dir. An</span><br><span class="line">example would be &quot;&#x2F;&#x2F;out&#x2F;Debug&quot; for the default toolchain, or</span><br><span class="line">&quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;arm&quot; for the &quot;arm&quot; toolchain.</span><br><span class="line"></span><br><span class="line">This is primarily useful for setting up script calls. If you are passing this</span><br><span class="line">to a script, you will want to pass it through rebase_path() (see &quot;gn help</span><br><span class="line">rebase_path&quot;) to convert it to be relative to the build directory.</span><br><span class="line"></span><br><span class="line">See also &quot;target_out_dir&quot; which is usually a better location for output</span><br><span class="line">files. It will be inside the root output dir.</span><br></pre></td></tr></table></figure>

<h4 id="Example-28"><a href="#Example-28" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;myscript&quot;) &#123;</span><br><span class="line">  # Pass the output dir to the script.</span><br><span class="line">  args &#x3D; [ &quot;-o&quot;, rebase_path(root_out_dir, root_build_dir) ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="target-cpu-The-desired-cpu-architecture-for-the-build"><a href="#target-cpu-The-desired-cpu-architecture-for-the-build" class="headerlink" title="target_cpu: The desired cpu architecture for the build."></a><a name="var_target_cpu"></a><strong>target_cpu</strong>: The desired cpu architecture for the build.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">This value should be used to indicate the desired architecture for the</span><br><span class="line">primary objects of the build. It will match the cpu architecture of the</span><br><span class="line">default toolchain, but not necessarily the current toolchain.</span><br><span class="line"></span><br><span class="line">In many cases, this is the same as &quot;host_cpu&quot;, but in the case of</span><br><span class="line">cross-compiles, this can be set to something different. This value is</span><br><span class="line">different from &quot;current_cpu&quot; in that it does not change based on the current</span><br><span class="line">toolchain. When writing rules, &quot;current_cpu&quot; should be used rather than</span><br><span class="line">&quot;target_cpu&quot; most of the time.</span><br><span class="line"></span><br><span class="line">This value is not used internally by GN for any purpose, so it may be set to</span><br><span class="line">whatever value is needed for the build. GN defaults this value to the empty</span><br><span class="line">string (&quot;&quot;) and the configuration files should set it to an appropriate value</span><br><span class="line">(e.g., setting it to the value of &quot;host_cpu&quot;) if it is not overridden on the</span><br><span class="line">command line or in the args.gn file.</span><br></pre></td></tr></table></figure>

<h4 id="Possible-values"><a href="#Possible-values" class="headerlink" title="Possible values"></a><strong>Possible values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- &quot;x86&quot;</span><br><span class="line">- &quot;x64&quot;</span><br><span class="line">- &quot;arm&quot;</span><br><span class="line">- &quot;arm64&quot;</span><br><span class="line">- &quot;mipsel&quot;</span><br></pre></td></tr></table></figure>
<h3 id="target-gen-dir-Directory-for-a-target’s-generated-files"><a href="#target-gen-dir-Directory-for-a-target’s-generated-files" class="headerlink" title="target_gen_dir: Directory for a target’s generated files."></a><a name="var_target_gen_dir"></a><strong>target_gen_dir</strong>: Directory for a target’s generated files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Absolute path to the target&#39;s generated file directory. This will be the</span><br><span class="line">&quot;root_gen_dir&quot; followed by the relative path to the current build file. If</span><br><span class="line">your file is in &quot;&#x2F;&#x2F;tools&#x2F;doom_melon&quot; then target_gen_dir would be</span><br><span class="line">&quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;gen&#x2F;tools&#x2F;doom_melon&quot;. It will not have a trailing slash.</span><br><span class="line"></span><br><span class="line">This is primarily useful for setting up include paths for generated files. If</span><br><span class="line">you are passing this to a script, you will want to pass it through</span><br><span class="line">rebase_path() (see &quot;gn help rebase_path&quot;) to convert it to be relative to the</span><br><span class="line">build directory.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help root_gen_dir&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-29"><a href="#Example-29" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;myscript&quot;) &#123;</span><br><span class="line">  # Pass the generated output dir to the script.</span><br><span class="line">  args &#x3D; [ &quot;-o&quot;, rebase_path(target_gen_dir, root_build_dir) ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="target-name-string-The-name-of-the-current-target"><a href="#target-name-string-The-name-of-the-current-target" class="headerlink" title="target_name: [string] The name of the current target."></a><a name="var_target_name"></a><strong>target_name</strong>: [string] The name of the current target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Inside a target or template invocation, this variable refers to the name</span><br><span class="line">given to the target or template invocation. Outside of these, this variable</span><br><span class="line">is undefined.</span><br><span class="line"></span><br><span class="line">This is most often used in template definitions to name targets defined in</span><br><span class="line">the template based on the name of the invocation. This is necessary both to</span><br><span class="line">ensure generated targets have unique names and to generate a target with the</span><br><span class="line">exact name of the invocation that other targets can depend on.</span><br><span class="line"></span><br><span class="line">Be aware that this value will always reflect the innermost scope. So when</span><br><span class="line">defining a target inside a template, target_name will refer to the target</span><br><span class="line">rather than the template invocation. To get the name of the template</span><br><span class="line">invocation in this case, you should save target_name to a temporary variable</span><br><span class="line">outside of any target definitions.</span><br><span class="line"></span><br><span class="line">See &quot;gn help template&quot; for more examples.</span><br></pre></td></tr></table></figure>

<h4 id="Example-30"><a href="#Example-30" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">executable(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  print(target_name)    # Prints &quot;doom_melon&quot;.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template(&quot;my_template&quot;) &#123;</span><br><span class="line">  print(target_name)    # Prints &quot;space_ray&quot; when invoked below.</span><br><span class="line"></span><br><span class="line">  executable(target_name + &quot;_impl&quot;) &#123;</span><br><span class="line">    print(target_name)  # Prints &quot;space_ray_impl&quot;.</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my_template(&quot;space_ray&quot;) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="target-os-The-desired-operating-system-for-the-build"><a href="#target-os-The-desired-operating-system-for-the-build" class="headerlink" title="target_os: The desired operating system for the build."></a><a name="var_target_os"></a><strong>target_os</strong>: The desired operating system for the build.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">This value should be used to indicate the desired operating system for the</span><br><span class="line">primary object(s) of the build. It will match the OS of the default</span><br><span class="line">toolchain.</span><br><span class="line"></span><br><span class="line">In many cases, this is the same as &quot;host_os&quot;, but in the case of</span><br><span class="line">cross-compiles, it may be different. This variable differs from &quot;current_os&quot;</span><br><span class="line">in that it can be referenced from inside any toolchain and will always return</span><br><span class="line">the initial value.</span><br><span class="line"></span><br><span class="line">This should be set to the most specific value possible. So, &quot;android&quot; or</span><br><span class="line">&quot;chromeos&quot; should be used instead of &quot;linux&quot; where applicable, even though</span><br><span class="line">Android and ChromeOS are both Linux variants. This can mean that one needs to</span><br><span class="line">write</span><br><span class="line"></span><br><span class="line">    if (target_os &#x3D;&#x3D; &quot;android&quot; || target_os &#x3D;&#x3D; &quot;linux&quot;) &#123;</span><br><span class="line">        # ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">and so forth.</span><br><span class="line"></span><br><span class="line">This value is not used internally by GN for any purpose, so it may be set to</span><br><span class="line">whatever value is needed for the build. GN defaults this value to the empty</span><br><span class="line">string (&quot;&quot;) and the configuration files should set it to an appropriate value</span><br><span class="line">(e.g., setting it to the value of &quot;host_os&quot;) if it is not set via the command</span><br><span class="line">line or in the args.gn file.</span><br></pre></td></tr></table></figure>

<h4 id="Possible-values-1"><a href="#Possible-values-1" class="headerlink" title="Possible values"></a><strong>Possible values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- &quot;android&quot;</span><br><span class="line">- &quot;chromeos&quot;</span><br><span class="line">- &quot;ios&quot;</span><br><span class="line">- &quot;linux&quot;</span><br><span class="line">- &quot;nacl&quot;</span><br><span class="line">- &quot;mac&quot;</span><br><span class="line">- &quot;win&quot;</span><br></pre></td></tr></table></figure>
<h3 id="target-out-dir-string-Directory-for-target-output-files"><a href="#target-out-dir-string-Directory-for-target-output-files" class="headerlink" title="target_out_dir: [string] Directory for target output files."></a><a name="var_target_out_dir"></a><strong>target_out_dir</strong>: [string] Directory for target output files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Absolute path to the target&#39;s generated file directory. If your current</span><br><span class="line">target is in &quot;&#x2F;&#x2F;tools&#x2F;doom_melon&quot; then this value might be</span><br><span class="line">&quot;&#x2F;&#x2F;out&#x2F;Debug&#x2F;obj&#x2F;tools&#x2F;doom_melon&quot;. It will not have a trailing slash.</span><br><span class="line"></span><br><span class="line">This is primarily useful for setting up arguments for calling scripts. If you</span><br><span class="line">are passing this to a script, you will want to pass it through rebase_path()</span><br><span class="line">(see &quot;gn help rebase_path&quot;) to convert it to be relative to the build</span><br><span class="line">directory.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help root_out_dir&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-31"><a href="#Example-31" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;myscript&quot;) &#123;</span><br><span class="line">  # Pass the output dir to the script.</span><br><span class="line">  args &#x3D; [ &quot;-o&quot;, rebase_path(target_out_dir, root_build_dir) ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Variables-you-set-in-targets"><a href="#Variables-you-set-in-targets" class="headerlink" title="Variables you set in targets"></a><a name="target_variables"></a>Variables you set in targets</h2><h3 id="aliased-deps-scope-Set-of-crate-dependency-pairs"><a href="#aliased-deps-scope-Set-of-crate-dependency-pairs" class="headerlink" title="aliased_deps: [scope] Set of crate-dependency pairs."></a><a name="var_aliased_deps"></a><strong>aliased_deps</strong>: [scope] Set of crate-dependency pairs.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Valid for &#96;rust_library&#96; targets and &#96;executable&#96;, &#96;static_library&#96;, and</span><br><span class="line">&#96;shared_library&#96; targets that contain Rust sources.</span><br><span class="line"></span><br><span class="line">A scope, each key indicating the renamed crate and the corresponding value</span><br><span class="line">specifying the label of the dependency producing the relevant binary.</span><br><span class="line"></span><br><span class="line">All dependencies listed in this field *must* be listed as deps of the target.</span><br><span class="line"></span><br><span class="line">  executable(&quot;foo&quot;) &#123;</span><br><span class="line">    sources &#x3D; [ &quot;main.rs&quot; ]</span><br><span class="line">    deps &#x3D; [ &quot;&#x2F;&#x2F;bar&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">This target would compile the &#96;foo&#96; crate with the following &#96;extern&#96; flag:</span><br><span class="line">&#96;rustc ...command... --extern bar&#x3D;&lt;build_out_dir&gt;&#x2F;obj&#x2F;bar&#96;</span><br><span class="line"></span><br><span class="line">  executable(&quot;foo&quot;) &#123;</span><br><span class="line">    sources &#x3D; [ &quot;main.rs&quot; ]</span><br><span class="line">    deps &#x3D; [ &quot;:bar&quot; ]</span><br><span class="line">    aliased_deps &#x3D; &#123;</span><br><span class="line">      bar_renamed &#x3D; &quot;:bar&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">With the addition of &#96;aliased_deps&#96;, above target would instead compile with:</span><br><span class="line">&#96;rustc ...command... --extern bar_renamed&#x3D;&lt;build_out_dir&gt;&#x2F;obj&#x2F;bar&#96;</span><br></pre></td></tr></table></figure>
<h3 id="all-dependent-configs-Configs-to-be-forced-on-dependents"><a href="#all-dependent-configs-Configs-to-be-forced-on-dependents" class="headerlink" title="all_dependent_configs: Configs to be forced on dependents."></a><a name="var_all_dependent_configs"></a><strong>all_dependent_configs</strong>: Configs to be forced on dependents.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">A list of config labels.</span><br><span class="line"></span><br><span class="line">All targets depending on this one, and recursively, all targets depending on</span><br><span class="line">those, will have the configs listed in this variable added to them. These</span><br><span class="line">configs will also apply to the current target.</span><br><span class="line"></span><br><span class="line">This addition happens in a second phase once a target and all of its</span><br><span class="line">dependencies have been resolved. Therefore, a target will not see these</span><br><span class="line">force-added configs in their &quot;configs&quot; variable while the script is running,</span><br><span class="line">and they can not be removed. As a result, this capability should generally</span><br><span class="line">only be used to add defines and include directories necessary to compile a</span><br><span class="line">target&#39;s headers.</span><br><span class="line"></span><br><span class="line">See also &quot;public_configs&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values"><a href="#Ordering-of-flags-and-values" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="allow-circular-includes-from-Permit-includes-from-deps"><a href="#allow-circular-includes-from-Permit-includes-from-deps" class="headerlink" title="allow_circular_includes_from: Permit includes from deps."></a><a name="var_allow_circular_includes_from"></a><strong>allow_circular_includes_from</strong>: Permit includes from deps.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">A list of target labels. Must be a subset of the target&#39;s &quot;deps&quot;. These</span><br><span class="line">targets will be permitted to include headers from the current target despite</span><br><span class="line">the dependency going in the opposite direction.</span><br><span class="line"></span><br><span class="line">When you use this, both targets must be included in a final binary for it to</span><br><span class="line">link. To keep linker errors from happening, it is good practice to have all</span><br><span class="line">external dependencies depend only on one of the two targets, and to set the</span><br><span class="line">visibility on the other to enforce this. Thus the targets will always be</span><br><span class="line">linked together in any output.</span><br></pre></td></tr></table></figure>

<h4 id="Details"><a href="#Details" class="headerlink" title="Details"></a><strong>Details</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Normally, for a file in target A to include a file from target B, A must list</span><br><span class="line">B as a dependency. This invariant is enforced by the &quot;gn check&quot; command (and</span><br><span class="line">the --check flag to &quot;gn gen&quot; -- see &quot;gn help check&quot;).</span><br><span class="line"></span><br><span class="line">Sometimes, two targets might be the same unit for linking purposes (two</span><br><span class="line">source sets or static libraries that would always be linked together in a</span><br><span class="line">final executable or shared library) and they each include headers from the</span><br><span class="line">other: you want A to be able to include B&#39;s headers, and B to include A&#39;s</span><br><span class="line">headers. This is not an ideal situation but is sometimes unavoidable.</span><br><span class="line"></span><br><span class="line">This list, if specified, lists which of the dependencies of the current</span><br><span class="line">target can include header files from the current target. That is, if A</span><br><span class="line">depends on B, B can only include headers from A if it is in A&#39;s</span><br><span class="line">allow_circular_includes_from list. Normally includes must follow the</span><br><span class="line">direction of dependencies, this flag allows them to go in the opposite</span><br><span class="line">direction.</span><br></pre></td></tr></table></figure>

<h4 id="Danger"><a href="#Danger" class="headerlink" title="Danger"></a><strong>Danger</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In the above example, A&#39;s headers are likely to include headers from A&#39;s</span><br><span class="line">dependencies. Those dependencies may have public_configs that apply flags,</span><br><span class="line">defines, and include paths that make those headers work properly.</span><br><span class="line"></span><br><span class="line">With allow_circular_includes_from, B can include A&#39;s headers, and</span><br><span class="line">transitively from A&#39;s dependencies, without having the dependencies that</span><br><span class="line">would bring in the public_configs those headers need. The result may be</span><br><span class="line">errors or inconsistent builds.</span><br><span class="line"></span><br><span class="line">So when you use allow_circular_includes_from, make sure that any compiler</span><br><span class="line">settings, flags, and include directories are the same between both targets</span><br><span class="line">(consider putting such things in a shared config they can both reference).</span><br><span class="line">Make sure the dependencies are also the same (you might consider a group to</span><br><span class="line">collect such dependencies they both depend on).</span><br></pre></td></tr></table></figure>

<h4 id="Example-32"><a href="#Example-32" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">source_set(&quot;a&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;:b&quot;, &quot;:a_b_shared_deps&quot; ]</span><br><span class="line">  allow_circular_includes_from &#x3D; [ &quot;:b&quot; ]</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">source_set(&quot;b&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;:a_b_shared_deps&quot; ]</span><br><span class="line">  # Sources here can include headers from a despite lack of deps.</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">group(&quot;a_b_shared_deps&quot;) &#123;</span><br><span class="line">  public_deps &#x3D; [ &quot;:c&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="arflags-Arguments-passed-to-static-library-archiver"><a href="#arflags-Arguments-passed-to-static-library-archiver" class="headerlink" title="arflags: Arguments passed to static_library archiver."></a><a name="var_arflags"></a><strong>arflags</strong>: Arguments passed to static_library archiver.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A list of flags passed to the archive&#x2F;lib command that creates static</span><br><span class="line">libraries.</span><br><span class="line"></span><br><span class="line">arflags are NOT pushed to dependents, so applying arflags to source sets or</span><br><span class="line">any other target type will be a no-op. As with ldflags, you could put the</span><br><span class="line">arflags in a config and set that as a public or &quot;all dependent&quot; config, but</span><br><span class="line">that will likely not be what you want. If you have a chain of static</span><br><span class="line">libraries dependent on each other, this can cause the flags to propagate up</span><br><span class="line">to other static libraries. Due to the nature of how arflags are typically</span><br><span class="line">used, you will normally want to apply them directly on static_library targets</span><br><span class="line">themselves.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-1"><a href="#Ordering-of-flags-and-values-1" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="args-target-variable-Arguments-passed-to-an-action"><a href="#args-target-variable-Arguments-passed-to-an-action" class="headerlink" title="args: (target variable) Arguments passed to an action."></a><a name="var_args"></a><strong>args</strong>: (target variable) Arguments passed to an action.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">For action and action_foreach targets, args is the list of arguments to pass</span><br><span class="line">to the script. Typically you would use source expansion (see &quot;gn help</span><br><span class="line">source_expansion&quot;) to insert the source file names.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help action&quot; and &quot;gn help action_foreach&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="asmflags-Flags-passed-to-the-assembler"><a href="#asmflags-Flags-passed-to-the-assembler" class="headerlink" title="asmflags: Flags passed to the assembler."></a><a name="var_asmflags"></a><strong>asmflags</strong>: Flags passed to the assembler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;asmflags&quot; are passed to any invocation of a tool that takes an .asm or .S</span><br><span class="line">file as input.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-2"><a href="#Ordering-of-flags-and-values-2" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="assert-no-deps-Ensure-no-deps-on-these-targets"><a href="#assert-no-deps-Ensure-no-deps-on-these-targets" class="headerlink" title="assert_no_deps: Ensure no deps on these targets."></a><a name="var_assert_no_deps"></a><strong>assert_no_deps</strong>: Ensure no deps on these targets.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">A list of label patterns.</span><br><span class="line"></span><br><span class="line">This list is a list of patterns that must not match any of the transitive</span><br><span class="line">dependencies of the target. These include all public, private, and data</span><br><span class="line">dependencies, and cross shared library boundaries. This allows you to express</span><br><span class="line">that undesirable code isn&#39;t accidentally added to downstream dependencies in</span><br><span class="line">a way that might otherwise be difficult to notice.</span><br><span class="line"></span><br><span class="line">Checking does not cross executable boundaries. If a target depends on an</span><br><span class="line">executable, it&#39;s assumed that the executable is a tool that is producing part</span><br><span class="line">of the build rather than something that is linked and distributed. This</span><br><span class="line">allows assert_no_deps to express what is distributed in the final target</span><br><span class="line">rather than depend on the internal build steps (which may include</span><br><span class="line">non-distributable code).</span><br><span class="line"></span><br><span class="line">See &quot;gn help label_pattern&quot; for the format of the entries in the list. These</span><br><span class="line">patterns allow blacklisting individual targets or whole directory</span><br><span class="line">hierarchies.</span><br><span class="line"></span><br><span class="line">Sometimes it is desirable to enforce that many targets have no dependencies</span><br><span class="line">on a target or set of targets. One efficient way to express this is to create</span><br><span class="line">a group with the assert_no_deps rule on it, and make that group depend on all</span><br><span class="line">targets you want to apply that assertion to.</span><br></pre></td></tr></table></figure>

<h4 id="Example-33"><a href="#Example-33" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">executable(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;&#x2F;&#x2F;foo:bar&quot; ]</span><br><span class="line">  ...</span><br><span class="line">  assert_no_deps &#x3D; [</span><br><span class="line">    &quot;&#x2F;&#x2F;evil&#x2F;*&quot;,  # Don&#39;t link any code from the evil directory.</span><br><span class="line">    &quot;&#x2F;&#x2F;foo:test_support&quot;,  # This target is also disallowed.</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bridge-header-string-Path-to-C-Objective-C-compatibility-header"><a href="#bridge-header-string-Path-to-C-Objective-C-compatibility-header" class="headerlink" title="bridge_header: [string] Path to C/Objective-C compatibility header."></a><a name="var_bridge_header"></a><strong>bridge_header</strong>: [string] Path to C/Objective-C compatibility header.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Valid for binary targets that contain Swift sources.</span><br><span class="line"></span><br><span class="line">Path to an header that includes C&#x2F;Objective-C functions and types that</span><br><span class="line">needs to be made available to the Swift module.</span><br></pre></td></tr></table></figure>
<h3 id="bundle-contents-dir-Expansion-of-in"><a href="#bundle-contents-dir-Expansion-of-in" class="headerlink" title="bundle_contents_dir: Expansion of  in"></a><a name="var_bundle_contents_dir"></a><strong>bundle_contents_dir</strong>: Expansion of  in</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">                           create_bundle.</span><br><span class="line"></span><br><span class="line">A string corresponding to a path in $root_build_dir.</span><br><span class="line"></span><br><span class="line">This string is used by the &quot;create_bundle&quot; target to expand the</span><br><span class="line">&#123;&#123;bundle_contents_dir&#125;&#125; of the &quot;bundle_data&quot; target it depends on. This must</span><br><span class="line">correspond to a path under &quot;bundle_root_dir&quot;.</span><br><span class="line"></span><br><span class="line">See &quot;gn help bundle_root_dir&quot; for examples.</span><br></pre></td></tr></table></figure>
<h3 id="bundle-deps-filter-label-list-A-list-of-labels-that-are-filtered-out"><a href="#bundle-deps-filter-label-list-A-list-of-labels-that-are-filtered-out" class="headerlink" title="bundle_deps_filter: [label list] A list of labels that are filtered out."></a><a name="var_bundle_deps_filter"></a><strong>bundle_deps_filter</strong>: [label list] A list of labels that are filtered out.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A list of target labels.</span><br><span class="line"></span><br><span class="line">This list contains target label patterns that should be filtered out when</span><br><span class="line">creating the bundle. Any target matching one of those label will be removed</span><br><span class="line">from the dependencies of the create_bundle target.</span><br><span class="line"></span><br><span class="line">This is mostly useful when creating application extension bundle as the</span><br><span class="line">application extension has access to runtime resources from the application</span><br><span class="line">bundle and thus do not require a second copy.</span><br><span class="line"></span><br><span class="line">See &quot;gn help create_bundle&quot; for more information.</span><br></pre></td></tr></table></figure>

<h4 id="Example-34"><a href="#Example-34" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create_bundle(&quot;today_extension&quot;) &#123;</span><br><span class="line">  deps &#x3D; [</span><br><span class="line">    &quot;&#x2F;&#x2F;base&quot;</span><br><span class="line">  ]</span><br><span class="line">  bundle_root_dir &#x3D; &quot;$root_out_dir&#x2F;today_extension.appex&quot;</span><br><span class="line">  bundle_deps_filter &#x3D; [</span><br><span class="line">    # The extension uses &#x2F;&#x2F;base but does not use any function calling into</span><br><span class="line">    # third_party&#x2F;icu and thus does not need the icudtl.dat file.</span><br><span class="line">    &quot;&#x2F;&#x2F;third_party&#x2F;icu:icudata&quot;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="bundle-executable-dir"><a href="#bundle-executable-dir" class="headerlink" title="bundle_executable_dir"></a><a name="var_bundle_executable_dir"></a><strong>bundle_executable_dir</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bundle_executable_dir: Expansion of &#123;&#123;bundle_executable_dir&#125;&#125; in</span><br><span class="line">                       create_bundle.</span><br><span class="line"></span><br><span class="line">A string corresponding to a path in $root_build_dir.</span><br><span class="line"></span><br><span class="line">This string is used by the &quot;create_bundle&quot; target to expand the</span><br><span class="line">&#123;&#123;bundle_executable_dir&#125;&#125; of the &quot;bundle_data&quot; target it depends on. This</span><br><span class="line">must correspond to a path under &quot;bundle_root_dir&quot;.</span><br><span class="line"></span><br><span class="line">See &quot;gn help bundle_root_dir&quot; for examples.</span><br></pre></td></tr></table></figure>
<h3 id="bundle-resources-dir"><a href="#bundle-resources-dir" class="headerlink" title="bundle_resources_dir"></a><a name="var_bundle_resources_dir"></a><strong>bundle_resources_dir</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bundle_resources_dir: Expansion of &#123;&#123;bundle_resources_dir&#125;&#125; in</span><br><span class="line">                      create_bundle.</span><br><span class="line"></span><br><span class="line">A string corresponding to a path in $root_build_dir.</span><br><span class="line"></span><br><span class="line">This string is used by the &quot;create_bundle&quot; target to expand the</span><br><span class="line">&#123;&#123;bundle_resources_dir&#125;&#125; of the &quot;bundle_data&quot; target it depends on. This must</span><br><span class="line">correspond to a path under &quot;bundle_root_dir&quot;.</span><br><span class="line"></span><br><span class="line">See &quot;gn help bundle_root_dir&quot; for examples.</span><br></pre></td></tr></table></figure>
<h3 id="bundle-root-dir-Expansion-of-in-create-bundle"><a href="#bundle-root-dir-Expansion-of-in-create-bundle" class="headerlink" title="bundle_root_dir: Expansion of  in create_bundle."></a><a name="var_bundle_root_dir"></a><strong>bundle_root_dir</strong>: Expansion of  in create_bundle.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A string corresponding to a path in root_build_dir.</span><br><span class="line"></span><br><span class="line">This string is used by the &quot;create_bundle&quot; target to expand the</span><br><span class="line">&#123;&#123;bundle_root_dir&#125;&#125; of the &quot;bundle_data&quot; target it depends on. This must</span><br><span class="line">correspond to a path under root_build_dir.</span><br></pre></td></tr></table></figure>

<h4 id="Example-35"><a href="#Example-35" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">bundle_data(&quot;info_plist&quot;) &#123;</span><br><span class="line">  sources &#x3D; [ &quot;Info.plist&quot; ]</span><br><span class="line">  outputs &#x3D; [ &quot;&#123;&#123;bundle_contents_dir&#125;&#125;&#x2F;Info.plist&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">create_bundle(&quot;doom_melon.app&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;:info_plist&quot; ]</span><br><span class="line">  bundle_root_dir &#x3D; &quot;$&#123;root_build_dir&#125;&#x2F;doom_melon.app&quot;</span><br><span class="line">  bundle_contents_dir &#x3D; &quot;$&#123;bundle_root_dir&#125;&#x2F;Contents&quot;</span><br><span class="line">  bundle_resources_dir &#x3D; &quot;$&#123;bundle_contents_dir&#125;&#x2F;Resources&quot;</span><br><span class="line">  bundle_executable_dir &#x3D; &quot;$&#123;bundle_contents_dir&#125;&#x2F;MacOS&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="cflags-Flags-passed-to-the-C-compiler"><a href="#cflags-Flags-passed-to-the-C-compiler" class="headerlink" title="cflags*: Flags passed to the C compiler."></a><a name="var_cflags"></a><strong>cflags*</strong>: Flags passed to the C compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;cflags&quot; are passed to all invocations of the C, C++, Objective C, and</span><br><span class="line">Objective C++ compilers.</span><br><span class="line"></span><br><span class="line">To target one of these variants individually, use &quot;cflags_c&quot;, &quot;cflags_cc&quot;,</span><br><span class="line">&quot;cflags_objc&quot;, and &quot;cflags_objcc&quot;, respectively. These variant-specific</span><br><span class="line">versions of cflags* will be appended on the compiler command line after</span><br><span class="line">&quot;cflags&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;asmflags&quot; for flags for assembly-language files and &quot;swiftflags&quot;</span><br><span class="line">for swift files.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-3"><a href="#Ordering-of-flags-and-values-3" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="cflags-Flags-passed-to-the-C-compiler-1"><a href="#cflags-Flags-passed-to-the-C-compiler-1" class="headerlink" title="cflags*: Flags passed to the C compiler."></a><a name="var_cflags_c"></a><strong>cflags*</strong>: Flags passed to the C compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;cflags&quot; are passed to all invocations of the C, C++, Objective C, and</span><br><span class="line">Objective C++ compilers.</span><br><span class="line"></span><br><span class="line">To target one of these variants individually, use &quot;cflags_c&quot;, &quot;cflags_cc&quot;,</span><br><span class="line">&quot;cflags_objc&quot;, and &quot;cflags_objcc&quot;, respectively. These variant-specific</span><br><span class="line">versions of cflags* will be appended on the compiler command line after</span><br><span class="line">&quot;cflags&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;asmflags&quot; for flags for assembly-language files and &quot;swiftflags&quot;</span><br><span class="line">for swift files.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-4"><a href="#Ordering-of-flags-and-values-4" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="cflags-Flags-passed-to-the-C-compiler-2"><a href="#cflags-Flags-passed-to-the-C-compiler-2" class="headerlink" title="cflags*: Flags passed to the C compiler."></a><a name="var_cflags_cc"></a><strong>cflags*</strong>: Flags passed to the C compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;cflags&quot; are passed to all invocations of the C, C++, Objective C, and</span><br><span class="line">Objective C++ compilers.</span><br><span class="line"></span><br><span class="line">To target one of these variants individually, use &quot;cflags_c&quot;, &quot;cflags_cc&quot;,</span><br><span class="line">&quot;cflags_objc&quot;, and &quot;cflags_objcc&quot;, respectively. These variant-specific</span><br><span class="line">versions of cflags* will be appended on the compiler command line after</span><br><span class="line">&quot;cflags&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;asmflags&quot; for flags for assembly-language files and &quot;swiftflags&quot;</span><br><span class="line">for swift files.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-5"><a href="#Ordering-of-flags-and-values-5" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="cflags-Flags-passed-to-the-C-compiler-3"><a href="#cflags-Flags-passed-to-the-C-compiler-3" class="headerlink" title="cflags*: Flags passed to the C compiler."></a><a name="var_cflags_objc"></a><strong>cflags*</strong>: Flags passed to the C compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;cflags&quot; are passed to all invocations of the C, C++, Objective C, and</span><br><span class="line">Objective C++ compilers.</span><br><span class="line"></span><br><span class="line">To target one of these variants individually, use &quot;cflags_c&quot;, &quot;cflags_cc&quot;,</span><br><span class="line">&quot;cflags_objc&quot;, and &quot;cflags_objcc&quot;, respectively. These variant-specific</span><br><span class="line">versions of cflags* will be appended on the compiler command line after</span><br><span class="line">&quot;cflags&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;asmflags&quot; for flags for assembly-language files and &quot;swiftflags&quot;</span><br><span class="line">for swift files.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-6"><a href="#Ordering-of-flags-and-values-6" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="cflags-Flags-passed-to-the-C-compiler-4"><a href="#cflags-Flags-passed-to-the-C-compiler-4" class="headerlink" title="cflags*: Flags passed to the C compiler."></a><a name="var_cflags_objcc"></a><strong>cflags*</strong>: Flags passed to the C compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;cflags&quot; are passed to all invocations of the C, C++, Objective C, and</span><br><span class="line">Objective C++ compilers.</span><br><span class="line"></span><br><span class="line">To target one of these variants individually, use &quot;cflags_c&quot;, &quot;cflags_cc&quot;,</span><br><span class="line">&quot;cflags_objc&quot;, and &quot;cflags_objcc&quot;, respectively. These variant-specific</span><br><span class="line">versions of cflags* will be appended on the compiler command line after</span><br><span class="line">&quot;cflags&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;asmflags&quot; for flags for assembly-language files and &quot;swiftflags&quot;</span><br><span class="line">for swift files.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-7"><a href="#Ordering-of-flags-and-values-7" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="check-includes-boolean-Controls-whether-a-target’s-files-are-checked"><a href="#check-includes-boolean-Controls-whether-a-target’s-files-are-checked" class="headerlink" title="check_includes: [boolean] Controls whether a target’s files are checked."></a><a name="var_check_includes"></a><strong>check_includes</strong>: [boolean] Controls whether a target’s files are checked.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">When true (the default), the &quot;gn check&quot; command (as well as &quot;gn gen&quot; with the</span><br><span class="line">--check flag) will check this target&#39;s sources and headers for proper</span><br><span class="line">dependencies.</span><br><span class="line"></span><br><span class="line">When false, the files in this target will be skipped by default. This does</span><br><span class="line">not affect other targets that depend on the current target, it just skips</span><br><span class="line">checking the includes of the current target&#39;s files.</span><br><span class="line"></span><br><span class="line">If there are a few conditionally included headers that trip up checking, you</span><br><span class="line">can exclude headers individually by annotating them with &quot;nogncheck&quot; (see &quot;gn</span><br><span class="line">help nogncheck&quot;).</span><br><span class="line"></span><br><span class="line">The topic &quot;gn help check&quot; has general information on how checking works and</span><br><span class="line">advice on how to pass a check in problematic cases.</span><br></pre></td></tr></table></figure>

<h4 id="Example-36"><a href="#Example-36" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">source_set(&quot;busted_includes&quot;) &#123;</span><br><span class="line">  # This target&#39;s includes are messed up, exclude it from checking.</span><br><span class="line">  check_includes &#x3D; false</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="code-signing-args-string-list-Arguments-passed-to-code-signing-script"><a href="#code-signing-args-string-list-Arguments-passed-to-code-signing-script" class="headerlink" title="code_signing_args: [string list] Arguments passed to code signing script."></a><a name="var_code_signing_args"></a><strong>code_signing_args</strong>: [string list] Arguments passed to code signing script.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">For create_bundle targets, code_signing_args is the list of arguments to pass</span><br><span class="line">to the code signing script. Typically you would use source expansion (see &quot;gn</span><br><span class="line">help source_expansion&quot;) to insert the source file names.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help create_bundle&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="code-signing-outputs-file-list-Output-files-for-code-signing-step"><a href="#code-signing-outputs-file-list-Output-files-for-code-signing-step" class="headerlink" title="code_signing_outputs: [file list] Output files for code signing step."></a><a name="var_code_signing_outputs"></a><strong>code_signing_outputs</strong>: [file list] Output files for code signing step.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Outputs from the code signing step of a create_bundle target. Must refer to</span><br><span class="line">files in the build directory.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help create_bundle&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="code-signing-script-file-name-Script-for-code-signing-”"><a href="#code-signing-script-file-name-Script-for-code-signing-”" class="headerlink" title="code_signing_script: [file name] Script for code signing.”"></a><a name="var_code_signing_script"></a><strong>code_signing_script</strong>: [file name] Script for code signing.”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">An absolute or buildfile-relative file name of a Python script to run for a</span><br><span class="line">create_bundle target to perform code signing step.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help create_bundle&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="code-signing-sources-file-list-Sources-for-code-signing-step"><a href="#code-signing-sources-file-list-Sources-for-code-signing-step" class="headerlink" title="code_signing_sources: [file list] Sources for code signing step."></a><a name="var_code_signing_sources"></a><strong>code_signing_sources</strong>: [file list] Sources for code signing step.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A list of files used as input for code signing script step of a create_bundle</span><br><span class="line">target. Non-absolute paths will be resolved relative to the current build</span><br><span class="line">file.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help create_bundle&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="complete-static-lib-boolean-Links-all-deps-into-a-static-library"><a href="#complete-static-lib-boolean-Links-all-deps-into-a-static-library" class="headerlink" title="complete_static_lib: [boolean] Links all deps into a static library."></a><a name="var_complete_static_lib"></a><strong>complete_static_lib</strong>: [boolean] Links all deps into a static library.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A static library normally doesn&#39;t include code from dependencies, but instead</span><br><span class="line">forwards the static libraries and source sets in its deps up the dependency</span><br><span class="line">chain until a linkable target (an executable or shared library) is reached.</span><br><span class="line">The final linkable target only links each static library once, even if it</span><br><span class="line">appears more than once in its dependency graph.</span><br><span class="line"></span><br><span class="line">In some cases the static library might be the final desired output. For</span><br><span class="line">example, you may be producing a static library for distribution to third</span><br><span class="line">parties. In this case, the static library should include code for all</span><br><span class="line">dependencies in one complete package. However, complete static libraries</span><br><span class="line">themselves are never linked into other complete static libraries. All</span><br><span class="line">complete static libraries are for distribution and linking them in would</span><br><span class="line">cause code duplication in this case. If the static library is not for</span><br><span class="line">distribution, it should not be complete.</span><br><span class="line"></span><br><span class="line">GN treats non-complete static libraries as source sets when they are linked</span><br><span class="line">into complete static libraries. This is done because some tools like AR do</span><br><span class="line">not handle dependent static libraries properly. This makes it easier to write</span><br><span class="line">&quot;alink&quot; rules.</span><br><span class="line"></span><br><span class="line">In rare cases it makes sense to list a header in more than one target if it</span><br><span class="line">could be considered conceptually a member of both. libraries.</span><br></pre></td></tr></table></figure>

<h4 id="Example-37"><a href="#Example-37" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">static_library(&quot;foo&quot;) &#123;</span><br><span class="line">  complete_static_lib &#x3D; true</span><br><span class="line">  deps &#x3D; [ &quot;bar&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="configs-Configs-applying-to-this-target-or-config"><a href="#configs-Configs-applying-to-this-target-or-config" class="headerlink" title="configs: Configs applying to this target or config."></a><a name="var_configs"></a><strong>configs</strong>: Configs applying to this target or config.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A list of config labels.</span><br></pre></td></tr></table></figure>

<h4 id="Configs-on-a-target"><a href="#Configs-on-a-target" class="headerlink" title="Configs on a target"></a><strong>Configs on a target</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">When used on a target, the include_dirs, defines, etc. in each config are</span><br><span class="line">appended in the order they appear to the compile command for each file in the</span><br><span class="line">target. They will appear after the include_dirs, defines, etc. that the</span><br><span class="line">target sets directly.</span><br><span class="line"></span><br><span class="line">Since configs apply after the values set on a target, directly setting a</span><br><span class="line">compiler flag will prepend it to the command line. If you want to append a</span><br><span class="line">flag instead, you can put that flag in a one-off config and append that</span><br><span class="line">config to the target&#39;s configs list.</span><br><span class="line"></span><br><span class="line">The build configuration script will generally set up the default configs</span><br><span class="line">applying to a given target type (see &quot;set_defaults&quot;). When a target is being</span><br><span class="line">defined, it can add to or remove from this list.</span><br></pre></td></tr></table></figure>

<h4 id="Configs-on-a-config"><a href="#Configs-on-a-config" class="headerlink" title="Configs on a config"></a><strong>Configs on a config</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">It is possible to create composite configs by specifying configs on a config.</span><br><span class="line">One might do this to forward values, or to factor out blocks of settings from</span><br><span class="line">very large configs into more manageable named chunks.</span><br><span class="line"></span><br><span class="line">In this case, the composite config is expanded to be the concatenation of its</span><br><span class="line">own values, and in order, the values from its sub-configs *before* anything</span><br><span class="line">else happens. This has some ramifications:</span><br><span class="line"></span><br><span class="line"> - A target has no visibility into a config&#39;s sub-configs. Target code only</span><br><span class="line">   sees the name of the composite config. It can&#39;t remove sub-configs or opt</span><br><span class="line">   in to only parts of it. The composite config may not even be defined</span><br><span class="line">   before the target is.</span><br><span class="line"></span><br><span class="line"> - You can get duplication of values if a config is listed twice, say, on a</span><br><span class="line">   target and in a sub-config that also applies. In other cases, the configs</span><br><span class="line">   applying to a target are de-duped. It&#39;s expected that if a config is</span><br><span class="line">   listed as a sub-config that it is only used in that context. (Note that</span><br><span class="line">   it&#39;s possible to fix this and de-dupe, but it&#39;s not normally relevant and</span><br><span class="line">   complicates the implementation.)</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-8"><a href="#Ordering-of-flags-and-values-8" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-38"><a href="#Example-38" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Configs on a target.</span><br><span class="line">source_set(&quot;foo&quot;) &#123;</span><br><span class="line">  # Don&#39;t use the default RTTI config that BUILDCONFIG applied to us.</span><br><span class="line">  configs -&#x3D; [ &quot;&#x2F;&#x2F;build:no_rtti&quot; ]</span><br><span class="line"></span><br><span class="line">  # Add some of our own settings.</span><br><span class="line">  configs +&#x3D; [ &quot;:mysettings&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Create a default_optimization config that forwards to one of a set of more</span><br><span class="line"># specialized configs depending on build flags. This pattern is useful</span><br><span class="line"># because it allows a target to opt in to either a default set, or a more</span><br><span class="line"># specific set, while avoid duplicating the settings in two places.</span><br><span class="line">config(&quot;super_optimization&quot;) &#123;</span><br><span class="line">  cflags &#x3D; [ ... ]</span><br><span class="line">&#125;</span><br><span class="line">config(&quot;default_optimization&quot;) &#123;</span><br><span class="line">  if (optimize_everything) &#123;</span><br><span class="line">    configs &#x3D; [ &quot;:super_optimization&quot; ]</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    configs &#x3D; [ &quot;:no_optimization&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="contents-Contents-to-write-to-file"><a href="#contents-Contents-to-write-to-file" class="headerlink" title="contents: Contents to write to file."></a><a name="var_contents"></a><strong>contents</strong>: Contents to write to file.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The contents of the file for a generated_file target.</span><br><span class="line">See &quot;gn help generated_file&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="crate-name-string-The-name-for-the-compiled-crate"><a href="#crate-name-string-The-name-for-the-compiled-crate" class="headerlink" title="crate_name: [string] The name for the compiled crate."></a><a name="var_crate_name"></a><strong>crate_name</strong>: [string] The name for the compiled crate.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Valid for &#96;rust_library&#96; targets and &#96;executable&#96;, &#96;static_library&#96;,</span><br><span class="line">&#96;shared_library&#96;, and &#96;source_set&#96; targets that contain Rust sources.</span><br><span class="line"></span><br><span class="line">If crate_name is not set, then this rule will use the target name.</span><br></pre></td></tr></table></figure>
<h3 id="crate-root-string-The-root-source-file-for-a-binary-or-library"><a href="#crate-root-string-The-root-source-file-for-a-binary-or-library" class="headerlink" title="crate_root: [string] The root source file for a binary or library."></a><a name="var_crate_root"></a><strong>crate_root</strong>: [string] The root source file for a binary or library.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Valid for &#96;rust_library&#96; targets and &#96;executable&#96;, &#96;static_library&#96;,</span><br><span class="line">&#96;shared_library&#96;, and &#96;source_set&#96; targets that contain Rust sources.</span><br><span class="line"></span><br><span class="line">This file is usually the &#96;main.rs&#96; or &#96;lib.rs&#96; for binaries and libraries,</span><br><span class="line">respectively.</span><br><span class="line"></span><br><span class="line">If crate_root is not set, then this rule will look for a lib.rs file (or</span><br><span class="line">main.rs for executable) or a single file in sources, if sources contains</span><br><span class="line">only one file.</span><br></pre></td></tr></table></figure>
<h3 id="crate-type-string-The-type-of-linkage-to-use-on-a-shared-library"><a href="#crate-type-string-The-type-of-linkage-to-use-on-a-shared-library" class="headerlink" title="crate_type: [string] The type of linkage to use on a shared_library."></a><a name="var_crate_type"></a><strong>crate_type</strong>: [string] The type of linkage to use on a shared_library.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Valid for &#96;rust_library&#96; targets and &#96;executable&#96;, &#96;static_library&#96;,</span><br><span class="line">&#96;shared_library&#96;, and &#96;source_set&#96; targets that contain Rust sources.</span><br><span class="line"></span><br><span class="line">Options for this field are &quot;cdylib&quot;, &quot;staticlib&quot;, &quot;proc-macro&quot;, and &quot;dylib&quot;.</span><br><span class="line">This field sets the &#96;crate-type&#96; attribute for the &#96;rustc&#96; tool on static</span><br><span class="line">libraries, as well as the appropriate output extension in the</span><br><span class="line">&#96;rust_output_extension&#96; attribute. Since outputs must be explicit, the &#96;lib&#96;</span><br><span class="line">crate type (where the Rust compiler produces what it thinks is the</span><br><span class="line">appropriate library type) is not supported.</span><br><span class="line"></span><br><span class="line">It should be noted that the &quot;dylib&quot; crate type in Rust is unstable in the set</span><br><span class="line">of symbols it exposes, and most usages today are potentially wrong and will</span><br><span class="line">be broken in the future.</span><br><span class="line"></span><br><span class="line">Static libraries, rust libraries, and executables have this field set</span><br><span class="line">automatically.</span><br></pre></td></tr></table></figure>
<h3 id="data-Runtime-data-file-dependencies"><a href="#data-Runtime-data-file-dependencies" class="headerlink" title="data: Runtime data file dependencies."></a><a name="var_data"></a><strong>data</strong>: Runtime data file dependencies.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Lists files or directories required to run the given target. These are</span><br><span class="line">typically data files or directories of data files. The paths are interpreted</span><br><span class="line">as being relative to the current build file. Since these are runtime</span><br><span class="line">dependencies, they do not affect which targets are built or when. To declare</span><br><span class="line">input files to a script, use &quot;inputs&quot;.</span><br><span class="line"></span><br><span class="line">Appearing in the &quot;data&quot; section does not imply any special handling such as</span><br><span class="line">copying them to the output directory. This is just used for declaring runtime</span><br><span class="line">dependencies. Runtime dependencies can be queried using the &quot;runtime_deps&quot;</span><br><span class="line">category of &quot;gn desc&quot; or written during build generation via</span><br><span class="line">&quot;--runtime-deps-list-file&quot;.</span><br><span class="line"></span><br><span class="line">GN doesn&#39;t require data files to exist at build-time. So actions that produce</span><br><span class="line">files that are in turn runtime dependencies can list those generated files</span><br><span class="line">both in the &quot;outputs&quot; list as well as the &quot;data&quot; list.</span><br><span class="line"></span><br><span class="line">By convention, directories are listed with a trailing slash:</span><br><span class="line">  data &#x3D; [ &quot;test&#x2F;data&#x2F;&quot; ]</span><br><span class="line">However, no verification is done on these so GN doesn&#39;t enforce this. The</span><br><span class="line">paths are just rebased and passed along when requested.</span><br><span class="line"></span><br><span class="line">Note: On iOS and macOS, create_bundle targets will not be recursed into when</span><br><span class="line">gathering data. See &quot;gn help create_bundle&quot; for details.</span><br><span class="line"></span><br><span class="line">See &quot;gn help runtime_deps&quot; for how these are used.</span><br></pre></td></tr></table></figure>
<h3 id="data-deps-Non-linked-dependencies"><a href="#data-deps-Non-linked-dependencies" class="headerlink" title="data_deps: Non-linked dependencies."></a><a name="var_data_deps"></a><strong>data_deps</strong>: Non-linked dependencies.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">A list of target labels.</span><br><span class="line"></span><br><span class="line">Specifies dependencies of a target that are not actually linked into the</span><br><span class="line">current target. Such dependencies will be built and will be available at</span><br><span class="line">runtime.</span><br><span class="line"></span><br><span class="line">This is normally used for things like plugins or helper programs that a</span><br><span class="line">target needs at runtime.</span><br><span class="line"></span><br><span class="line">Note: On iOS and macOS, create_bundle targets will not be recursed into when</span><br><span class="line">gathering data_deps. See &quot;gn help create_bundle&quot; for details.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help deps&quot; and &quot;gn help data&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-39"><a href="#Example-39" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">executable(&quot;foo&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;&#x2F;&#x2F;base&quot; ]</span><br><span class="line">  data_deps &#x3D; [ &quot;&#x2F;&#x2F;plugins:my_runtime_plugin&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="data-keys-Keys-from-which-to-collect-metadata"><a href="#data-keys-Keys-from-which-to-collect-metadata" class="headerlink" title="data_keys: Keys from which to collect metadata."></a><a name="var_data_keys"></a><strong>data_keys</strong>: Keys from which to collect metadata.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">These keys are used to identify metadata to collect. If a walked target</span><br><span class="line">defines this key in its metadata, its value will be appended to the resulting</span><br><span class="line">collection.</span><br><span class="line"></span><br><span class="line">See &quot;gn help generated_file&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="defines-C-preprocessor-defines"><a href="#defines-C-preprocessor-defines" class="headerlink" title="defines: C preprocessor defines."></a><a name="var_defines"></a><strong>defines</strong>: C preprocessor defines.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of strings</span><br><span class="line"></span><br><span class="line">These strings will be passed to the C&#x2F;C++ compiler as #defines. The strings</span><br><span class="line">may or may not include an &quot;&#x3D;&quot; to assign a value.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-9"><a href="#Ordering-of-flags-and-values-9" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-40"><a href="#Example-40" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defines &#x3D; [ &quot;AWESOME_FEATURE&quot;, &quot;LOG_LEVEL&#x3D;3&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="depfile-string-File-name-for-input-dependencies-for-actions"><a href="#depfile-string-File-name-for-input-dependencies-for-actions" class="headerlink" title="depfile: [string] File name for input dependencies for actions."></a><a name="var_depfile"></a><strong>depfile</strong>: [string] File name for input dependencies for actions.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">If nonempty, this string specifies that the current action or action_foreach</span><br><span class="line">target will generate the given &quot;.d&quot; file containing the dependencies of the</span><br><span class="line">input. Empty or unset means that the script doesn&#39;t generate the files.</span><br><span class="line"></span><br><span class="line">A depfile should be used only when a target depends on files that are not</span><br><span class="line">already specified by a target&#39;s inputs and sources. Likewise, depfiles should</span><br><span class="line">specify only those dependencies not already included in sources or inputs.</span><br><span class="line"></span><br><span class="line">The .d file should go in the target output directory. If you have more than</span><br><span class="line">one source file that the script is being run over, you can use the output</span><br><span class="line">file expansions described in &quot;gn help action_foreach&quot; to name the .d file</span><br><span class="line">according to the input.</span><br><span class="line"></span><br><span class="line">The format is that of a Makefile and all paths must be relative to the root</span><br><span class="line">build directory. Only one output may be listed and it must match the first</span><br><span class="line">output of the action.</span><br><span class="line"></span><br><span class="line">Although depfiles are created by an action, they should not be listed in the</span><br><span class="line">action&#39;s &quot;outputs&quot; unless another target will use the file as an input.</span><br></pre></td></tr></table></figure>

<h4 id="Example-41"><a href="#Example-41" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">action_foreach(&quot;myscript_target&quot;) &#123;</span><br><span class="line">  script &#x3D; &quot;myscript.py&quot;</span><br><span class="line">  sources &#x3D; [ ... ]</span><br><span class="line"></span><br><span class="line">  # Locate the depfile in the output directory named like the</span><br><span class="line">  # inputs but with a &quot;.d&quot; appended.</span><br><span class="line">  depfile &#x3D; &quot;$relative_target_output_dir&#x2F;&#123;&#123;source_name&#125;&#125;.d&quot;</span><br><span class="line"></span><br><span class="line">  # Say our script uses &quot;-o &lt;d file&gt;&quot; to indicate the depfile.</span><br><span class="line">  args &#x3D; [ &quot;&#123;&#123;source&#125;&#125;&quot;, &quot;-o&quot;, depfile ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="deps-Private-linked-dependencies"><a href="#deps-Private-linked-dependencies" class="headerlink" title="deps: Private linked dependencies."></a><a name="var_deps"></a><strong>deps</strong>: Private linked dependencies.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A list of target labels.</span><br><span class="line"></span><br><span class="line">Specifies private dependencies of a target. Private dependencies are</span><br><span class="line">propagated up the dependency tree and linked to dependent targets, but do not</span><br><span class="line">grant the ability to include headers from the dependency. Public configs are</span><br><span class="line">not forwarded.</span><br></pre></td></tr></table></figure>

<h4 id="Details-of-dependency-propagation"><a href="#Details-of-dependency-propagation" class="headerlink" title="Details of dependency propagation"></a><strong>Details of dependency propagation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Source sets, shared libraries, and non-complete static libraries will be</span><br><span class="line">propagated up the dependency tree across groups, non-complete static</span><br><span class="line">libraries and source sets.</span><br><span class="line"></span><br><span class="line">Executables, shared libraries, and complete static libraries will link all</span><br><span class="line">propagated targets and stop propagation. Actions and copy steps also stop</span><br><span class="line">propagation, allowing them to take a library as an input but not force</span><br><span class="line">dependents to link to it.</span><br><span class="line"></span><br><span class="line">Propagation of all_dependent_configs and public_configs happens independently</span><br><span class="line">of target type. all_dependent_configs are always propagated across all types</span><br><span class="line">of targets, and public_configs are always propagated across public deps of</span><br><span class="line">all types of targets.</span><br><span class="line"></span><br><span class="line">Data dependencies are propagated differently. See &quot;gn help data_deps&quot; and</span><br><span class="line">&quot;gn help runtime_deps&quot;.</span><br><span class="line"></span><br><span class="line">See also &quot;public_deps&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="externs-scope-Set-of-Rust-crate-dependency-pairs"><a href="#externs-scope-Set-of-Rust-crate-dependency-pairs" class="headerlink" title="externs: [scope] Set of Rust crate-dependency pairs."></a><a name="var_externs"></a><strong>externs</strong>: [scope] Set of Rust crate-dependency pairs.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A list, each value being a scope indicating a pair of crate name and the path</span><br><span class="line">to the Rust library.</span><br><span class="line"></span><br><span class="line">These libraries will be passed as &#96;--extern crate_name&#x3D;path&#96; to compiler</span><br><span class="line">invocation containing the current target.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-17"><a href="#Examples-17" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  executable(&quot;foo&quot;) &#123;</span><br><span class="line">    sources &#x3D; [ &quot;main.rs&quot; ]</span><br><span class="line">    externs &#x3D; [&#123;</span><br><span class="line">      crate_name &#x3D; &quot;bar&quot;,</span><br><span class="line">      path &#x3D; &quot;path&#x2F;to&#x2F;bar.rlib&quot;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">This target would compile the &#96;foo&#96; crate with the following &#96;extern&#96; flag:</span><br><span class="line">&#96;--extern bar&#x3D;path&#x2F;to&#x2F;bar.rlib&#96;.</span><br></pre></td></tr></table></figure>
<h3 id="framework-dirs-directory-list-Additional-framework-search-directories"><a href="#framework-dirs-directory-list-Additional-framework-search-directories" class="headerlink" title="framework_dirs: [directory list] Additional framework search directories."></a><a name="var_framework_dirs"></a><strong>framework_dirs</strong>: [directory list] Additional framework search directories.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of source directories.</span><br><span class="line"></span><br><span class="line">The directories in this list will be added to the framework search path for</span><br><span class="line">the files in the affected target.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-10"><a href="#Ordering-of-flags-and-values-10" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-42"><a href="#Example-42" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">framework_dirs &#x3D; [ &quot;src&#x2F;include&quot;, &quot;&#x2F;&#x2F;third_party&#x2F;foo&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="frameworks-name-list-Name-of-frameworks-that-must-be-linked"><a href="#frameworks-name-list-Name-of-frameworks-that-must-be-linked" class="headerlink" title="frameworks: [name list] Name of frameworks that must be linked."></a><a name="var_frameworks"></a><strong>frameworks</strong>: [name list] Name of frameworks that must be linked.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of framework names.</span><br><span class="line"></span><br><span class="line">The frameworks named in that list will be linked with any dynamic link</span><br><span class="line">type target.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-11"><a href="#Ordering-of-flags-and-values-11" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-43"><a href="#Example-43" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frameworks &#x3D; [ &quot;Foundation.framework&quot;, &quot;Foo.framework&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="friend-Allow-targets-to-include-private-headers"><a href="#friend-Allow-targets-to-include-private-headers" class="headerlink" title="friend: Allow targets to include private headers."></a><a name="var_friend"></a><strong>friend</strong>: Allow targets to include private headers.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">A list of label patterns (see &quot;gn help label_pattern&quot;) that allow dependent</span><br><span class="line">targets to include private headers. Applies to all binary targets.</span><br><span class="line"></span><br><span class="line">Normally if a target lists headers in the &quot;public&quot; list (see &quot;gn help</span><br><span class="line">public&quot;), other headers are implicitly marked as private. Private headers</span><br><span class="line">can not be included by other targets, even with a public dependency path.</span><br><span class="line">The &quot;gn check&quot; function performs this validation.</span><br><span class="line"></span><br><span class="line">A friend declaration allows one or more targets to include private headers.</span><br><span class="line">This is useful for things like unit tests that are closely associated with a</span><br><span class="line">target and require internal knowledge without opening up all headers to be</span><br><span class="line">included by all dependents.</span><br><span class="line"></span><br><span class="line">A friend target does not allow that target to include headers when no</span><br><span class="line">dependency exists. A public dependency path must still exist between two</span><br><span class="line">targets to include any headers from a destination target. The friend</span><br><span class="line">annotation merely allows the use of headers that would otherwise be</span><br><span class="line">prohibited because they are private.</span><br><span class="line"></span><br><span class="line">The friend annotation is matched only against the target containing the file</span><br><span class="line">with the include directive. Friend annotations are not propagated across</span><br><span class="line">public or private dependencies. Friend annotations do not affect visibility.</span><br></pre></td></tr></table></figure>

<h4 id="Example-44"><a href="#Example-44" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">static_library(&quot;lib&quot;) &#123;</span><br><span class="line">  # This target can include our private headers.</span><br><span class="line">  friend &#x3D; [ &quot;:unit_tests&quot; ]</span><br><span class="line"></span><br><span class="line">  public &#x3D; [</span><br><span class="line">    &quot;public_api.h&quot;,  # Normal public API for dependent targets.</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  # Private API and sources.</span><br><span class="line">  sources &#x3D; [</span><br><span class="line">    &quot;a_source_file.cc&quot;,</span><br><span class="line"></span><br><span class="line">    # Normal targets that depend on this one won&#39;t be able to include this</span><br><span class="line">    # because this target defines a list of &quot;public&quot; headers. Without the</span><br><span class="line">    # &quot;public&quot; list, all headers are implicitly public.</span><br><span class="line">    &quot;private_api.h&quot;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">executable(&quot;unit_tests&quot;) &#123;</span><br><span class="line">  sources &#x3D; [</span><br><span class="line">    # This can include &quot;private_api.h&quot; from the :lib target because it</span><br><span class="line">    # depends on that target and because of the friend annotation.</span><br><span class="line">    &quot;my_test.cc&quot;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  deps &#x3D; [</span><br><span class="line">    &quot;:lib&quot;,  # Required for the include to be allowed.</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="include-dirs-Additional-include-directories"><a href="#include-dirs-Additional-include-directories" class="headerlink" title="include_dirs: Additional include directories."></a><a name="var_include_dirs"></a><strong>include_dirs</strong>: Additional include directories.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of source directories.</span><br><span class="line"></span><br><span class="line">The directories in this list will be added to the include path for the files</span><br><span class="line">in the affected target.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-12"><a href="#Ordering-of-flags-and-values-12" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-45"><a href="#Example-45" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include_dirs &#x3D; [ &quot;src&#x2F;include&quot;, &quot;&#x2F;&#x2F;third_party&#x2F;foo&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="inputs-Additional-compile-time-dependencies"><a href="#inputs-Additional-compile-time-dependencies" class="headerlink" title="inputs: Additional compile-time dependencies."></a><a name="var_inputs"></a><strong>inputs</strong>: Additional compile-time dependencies.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Inputs are compile-time dependencies of the current target. This means that</span><br><span class="line">all inputs must be available before compiling any of the sources or executing</span><br><span class="line">any actions.</span><br><span class="line"></span><br><span class="line">Inputs are typically only used for action and action_foreach targets.</span><br></pre></td></tr></table></figure>

<h4 id="Inputs-for-actions"><a href="#Inputs-for-actions" class="headerlink" title="Inputs for actions"></a><strong>Inputs for actions</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">For action and action_foreach targets, inputs should be the inputs to script</span><br><span class="line">that don&#39;t vary. These should be all .py files that the script uses via</span><br><span class="line">imports (the main script itself will be an implicit dependency of the action</span><br><span class="line">so need not be listed).</span><br><span class="line"></span><br><span class="line">For action targets, inputs and sources are treated the same, but from a style</span><br><span class="line">perspective, it&#39;s recommended to follow the same rule as action_foreach and</span><br><span class="line">put helper files in the inputs, and the data used by the script (if any) in</span><br><span class="line">sources.</span><br><span class="line"></span><br><span class="line">Note that another way to declare input dependencies from an action is to have</span><br><span class="line">the action write a depfile (see &quot;gn help depfile&quot;). This allows the script to</span><br><span class="line">dynamically write input dependencies, that might not be known until actually</span><br><span class="line">executing the script. This is more efficient than doing processing while</span><br><span class="line">running GN to determine the inputs, and is easier to keep in-sync than</span><br><span class="line">hardcoding the list.</span><br></pre></td></tr></table></figure>

<h4 id="Script-input-gotchas"><a href="#Script-input-gotchas" class="headerlink" title="Script input gotchas"></a><strong>Script input gotchas</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">It may be tempting to write a script that enumerates all files in a directory</span><br><span class="line">as inputs. Don&#39;t do this! Even if you specify all the files in the inputs or</span><br><span class="line">sources in the GN target (or worse, enumerate the files in an exec_script</span><br><span class="line">call when running GN, which will be slow), the dependencies will be broken.</span><br><span class="line"></span><br><span class="line">The problem happens if a file is ever removed because the inputs are not</span><br><span class="line">listed on the command line to the script. Because the script hasn&#39;t changed</span><br><span class="line">and all inputs are up to date, the script will not re-run and you will get a</span><br><span class="line">stale build. Instead, either list all inputs on the command line to the</span><br><span class="line">script, or if there are many, create a separate list file that the script</span><br><span class="line">reads. As long as this file is listed in the inputs, the build will detect</span><br><span class="line">when it has changed in any way and the action will re-run.</span><br></pre></td></tr></table></figure>

<h4 id="Inputs-for-binary-targets"><a href="#Inputs-for-binary-targets" class="headerlink" title="Inputs for binary targets"></a><strong>Inputs for binary targets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Any input dependencies will be resolved before compiling any sources or</span><br><span class="line">linking the target. Normally, all actions that a target depends on will be run</span><br><span class="line">before any files in a target are compiled. So if you depend on generated</span><br><span class="line">headers, you do not typically need to list them in the inputs section.</span><br><span class="line"></span><br><span class="line">Inputs for binary targets will be treated as implicit dependencies, meaning</span><br><span class="line">that changes in any of the inputs will force all sources in the target to be</span><br><span class="line">recompiled. If an input only applies to a subset of source files, you may</span><br><span class="line">want to split those into a separate target to avoid unnecessary recompiles.</span><br></pre></td></tr></table></figure>

<h4 id="Example-46"><a href="#Example-46" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;myscript&quot;) &#123;</span><br><span class="line">  script &#x3D; &quot;domything.py&quot;</span><br><span class="line">  inputs &#x3D; [ &quot;input.data&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ldflags-Flags-passed-to-the-linker"><a href="#ldflags-Flags-passed-to-the-linker" class="headerlink" title="ldflags: Flags passed to the linker."></a><a name="var_ldflags"></a><strong>ldflags</strong>: Flags passed to the linker.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">These flags are passed on the command-line to the linker and generally</span><br><span class="line">specify various linking options. Most targets will not need these and will</span><br><span class="line">use &quot;libs&quot; and &quot;lib_dirs&quot; instead.</span><br><span class="line"></span><br><span class="line">ldflags are NOT pushed to dependents, so applying ldflags to source sets or</span><br><span class="line">static libraries will be a no-op. If you want to apply ldflags to dependent</span><br><span class="line">targets, put them in a config and set it in the all_dependent_configs or</span><br><span class="line">public_configs.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-13"><a href="#Ordering-of-flags-and-values-13" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="lib-dirs-Additional-library-directories"><a href="#lib-dirs-Additional-library-directories" class="headerlink" title="lib_dirs: Additional library directories."></a><a name="var_lib_dirs"></a><strong>lib_dirs</strong>: Additional library directories.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A list of directories.</span><br><span class="line"></span><br><span class="line">Specifies additional directories passed to the linker for searching for the</span><br><span class="line">required libraries. If an item is not an absolute path, it will be treated as</span><br><span class="line">being relative to the current build file.</span><br><span class="line"></span><br><span class="line">libs and lib_dirs work differently than other flags in two respects.</span><br><span class="line">First, they are inherited across static library boundaries until a</span><br><span class="line">shared library or executable target is reached. Second, they are</span><br><span class="line">uniquified so each one is only passed once (the first instance of it</span><br><span class="line">will be the one used).</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-14"><a href="#Ordering-of-flags-and-values-14" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br><span class="line"></span><br><span class="line">For &quot;libs&quot; and &quot;lib_dirs&quot; only, the values propagated from</span><br><span class="line">dependencies (as described above) are applied last assuming they</span><br><span class="line">are not already in the list.</span><br></pre></td></tr></table></figure>

<h4 id="Example-47"><a href="#Example-47" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib_dirs &#x3D; [ &quot;&#x2F;usr&#x2F;lib&#x2F;foo&quot;, &quot;lib&#x2F;doom_melon&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="libs-Additional-libraries-to-link"><a href="#libs-Additional-libraries-to-link" class="headerlink" title="libs: Additional libraries to link."></a><a name="var_libs"></a><strong>libs</strong>: Additional libraries to link.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A list of library names or library paths.</span><br><span class="line"></span><br><span class="line">These libraries will be linked into the final binary (executable or shared</span><br><span class="line">library) containing the current target.</span><br><span class="line"></span><br><span class="line">libs and lib_dirs work differently than other flags in two respects.</span><br><span class="line">First, they are inherited across static library boundaries until a</span><br><span class="line">shared library or executable target is reached. Second, they are</span><br><span class="line">uniquified so each one is only passed once (the first instance of it</span><br><span class="line">will be the one used).</span><br></pre></td></tr></table></figure>

<h4 id="Types-of-libs"><a href="#Types-of-libs" class="headerlink" title="Types of libs"></a><strong>Types of libs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">There are several different things that can be expressed in libs:</span><br><span class="line"></span><br><span class="line">File paths</span><br><span class="line">    Values containing &#39;&#x2F;&#39; will be treated as references to files in the</span><br><span class="line">    checkout. They will be rebased to be relative to the build directory and</span><br><span class="line">    specified in the &quot;libs&quot; for linker tools. This facility should be used</span><br><span class="line">    for libraries that are checked in to the version control. For libraries</span><br><span class="line">    that are generated by the build, use normal GN deps to link them.</span><br><span class="line"></span><br><span class="line">System libraries</span><br><span class="line">    Values not containing &#39;&#x2F;&#39; will be treated as system library names. These</span><br><span class="line">    will be passed unmodified to the linker and prefixed with the</span><br><span class="line">    &quot;lib_switch&quot; attribute of the linker tool. Generally you would set the</span><br><span class="line">    &quot;lib_dirs&quot; so the given library is found. Your BUILD.gn file should not</span><br><span class="line">    specify the switch (like &quot;-l&quot;): this will be encoded in the &quot;lib_switch&quot;</span><br><span class="line">    of the tool.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-15"><a href="#Ordering-of-flags-and-values-15" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br><span class="line"></span><br><span class="line">For &quot;libs&quot; and &quot;lib_dirs&quot; only, the values propagated from</span><br><span class="line">dependencies (as described above) are applied last assuming they</span><br><span class="line">are not already in the list.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-18"><a href="#Examples-18" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">On Windows:</span><br><span class="line">  libs &#x3D; [ &quot;ctl3d.lib&quot; ]</span><br><span class="line"></span><br><span class="line">On Linux:</span><br><span class="line">  libs &#x3D; [ &quot;ld&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="metadata-Metadata-of-this-target"><a href="#metadata-Metadata-of-this-target" class="headerlink" title="metadata: Metadata of this target."></a><a name="var_metadata"></a><strong>metadata</strong>: Metadata of this target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Metadata is a collection of keys and values relating to a particular target.</span><br><span class="line">Values must be lists, allowing for sane and predictable collection behavior.</span><br><span class="line">Generally, these keys will include three types of lists: lists of ordinary</span><br><span class="line">strings, lists of filenames intended to be rebased according to their</span><br><span class="line">particular source directory, and lists of target labels intended to be used</span><br><span class="line">as barriers to the walk. Verification of these categories occurs at walk time,</span><br><span class="line">not creation time (since it is not clear until the walk which values are</span><br><span class="line">intended for which purpose).</span><br></pre></td></tr></table></figure>

<h4 id="Example-48"><a href="#Example-48" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">group(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  metadata &#x3D; &#123;</span><br><span class="line">    # These keys are not built in to GN but are interpreted when consuming</span><br><span class="line">    # metadata.</span><br><span class="line">    my_barrier &#x3D; []</span><br><span class="line">    my_files &#x3D; [ &quot;a.txt&quot;, &quot;b.txt&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="module-name-string-The-name-for-the-compiled-module"><a href="#module-name-string-The-name-for-the-compiled-module" class="headerlink" title="module_name: [string] The name for the compiled module."></a><a name="var_module_name"></a><strong>module_name</strong>: [string] The name for the compiled module.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Valid for binary targets that contain Swift sources.</span><br><span class="line"></span><br><span class="line">If module_name is not set, then this rule will use the target name.</span><br></pre></td></tr></table></figure>
<h3 id="output-conversion-Data-format-for-generated-file-targets"><a href="#output-conversion-Data-format-for-generated-file-targets" class="headerlink" title="output_conversion: Data format for generated_file targets."></a><a name="var_output_conversion"></a><strong>output_conversion</strong>: Data format for generated_file targets.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Controls how the &quot;contents&quot; of a generated_file target is formatted.</span><br><span class="line">See &#96;gn help io_conversion&#96;.</span><br></pre></td></tr></table></figure>
<h3 id="output-dir-directory-Directory-to-put-output-file-in"><a href="#output-dir-directory-Directory-to-put-output-file-in" class="headerlink" title="output_dir: [directory] Directory to put output file in."></a><a name="var_output_dir"></a><strong>output_dir</strong>: [directory] Directory to put output file in.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">For library and executable targets, overrides the directory for the final</span><br><span class="line">output. This must be in the root_build_dir or a child thereof.</span><br><span class="line"></span><br><span class="line">This should generally be in the root_out_dir or a subdirectory thereof (the</span><br><span class="line">root_out_dir will be the same as the root_build_dir for the default</span><br><span class="line">toolchain, and will be a subdirectory for other toolchains). Not putting the</span><br><span class="line">output in a subdirectory of root_out_dir can result in collisions between</span><br><span class="line">different toolchains, so you will need to take steps to ensure that your</span><br><span class="line">target is only present in one toolchain.</span><br><span class="line"></span><br><span class="line">Normally the toolchain specifies the output directory for libraries and</span><br><span class="line">executables (see &quot;gn help tool&quot;). You will have to consult that for the</span><br><span class="line">default location. The default location will be used if output_dir is</span><br><span class="line">undefined or empty.</span><br></pre></td></tr></table></figure>

<h4 id="Example-49"><a href="#Example-49" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shared_library(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  output_dir &#x3D; &quot;$root_out_dir&#x2F;plugin_libs&quot;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="output-extension-Value-to-use-for-the-output’s-file-extension"><a href="#output-extension-Value-to-use-for-the-output’s-file-extension" class="headerlink" title="output_extension: Value to use for the output’s file extension."></a><a name="var_output_extension"></a><strong>output_extension</strong>: Value to use for the output’s file extension.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Normally the file extension for a target is based on the target type and the</span><br><span class="line">operating system, but in rare cases you will need to override the name (for</span><br><span class="line">example to use &quot;libfreetype.so.6&quot; instead of libfreetype.so on Linux).</span><br><span class="line"></span><br><span class="line">This value should not include a leading dot. If undefined, the default</span><br><span class="line">specified on the tool will be used. If set to the empty string, no output</span><br><span class="line">extension will be used.</span><br><span class="line"></span><br><span class="line">The output_extension will be used to set the &quot;&#123;&#123;output_extension&#125;&#125;&quot; expansion</span><br><span class="line">which the linker tool will generally use to specify the output file name. See</span><br><span class="line">&quot;gn help tool&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-50"><a href="#Example-50" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">shared_library(&quot;freetype&quot;) &#123;</span><br><span class="line">  if (is_linux) &#123;</span><br><span class="line">    # Call the output &quot;libfreetype.so.6&quot;</span><br><span class="line">    output_extension &#x3D; &quot;so.6&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># On Windows, generate a &quot;mysettings.cpl&quot; control panel applet. Control panel</span><br><span class="line"># applets are actually special shared libraries.</span><br><span class="line">if (is_win) &#123;</span><br><span class="line">  shared_library(&quot;mysettings&quot;) &#123;</span><br><span class="line">    output_extension &#x3D; &quot;cpl&quot;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="output-name-Define-a-name-for-the-output-file-other-than-the-default"><a href="#output-name-Define-a-name-for-the-output-file-other-than-the-default" class="headerlink" title="output_name: Define a name for the output file other than the default."></a><a name="var_output_name"></a><strong>output_name</strong>: Define a name for the output file other than the default.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Normally the output name of a target will be based on the target name, so the</span><br><span class="line">target &quot;&#x2F;&#x2F;foo&#x2F;bar:bar_unittests&quot; will generate an output file such as</span><br><span class="line">&quot;bar_unittests.exe&quot; (using Windows as an example).</span><br><span class="line"></span><br><span class="line">Sometimes you will want an alternate name to avoid collisions or if the</span><br><span class="line">internal name isn&#39;t appropriate for public distribution.</span><br><span class="line"></span><br><span class="line">The output name should have no extension or prefixes, these will be added</span><br><span class="line">using the default system rules. For example, on Linux an output name of &quot;foo&quot;</span><br><span class="line">will produce a shared library &quot;libfoo.so&quot;. There is no way to override the</span><br><span class="line">output prefix of a linker tool on a per- target basis. If you need more</span><br><span class="line">flexibility, create a copy target to produce the file you want.</span><br><span class="line"></span><br><span class="line">This variable is valid for all binary output target types.</span><br></pre></td></tr></table></figure>

<h4 id="Example-51"><a href="#Example-51" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static_library(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  output_name &#x3D; &quot;fluffy_bunny&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="output-prefix-override-Don’t-use-prefix-for-output-name"><a href="#output-prefix-override-Don’t-use-prefix-for-output-name" class="headerlink" title="output_prefix_override: Don’t use prefix for output name."></a><a name="var_output_prefix_override"></a><strong>output_prefix_override</strong>: Don’t use prefix for output name.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">A boolean that overrides the output prefix for a target. Defaults to false.</span><br><span class="line"></span><br><span class="line">Some systems use prefixes for the names of the final target output file. The</span><br><span class="line">normal example is &quot;libfoo.so&quot; on Linux for a target named &quot;foo&quot;.</span><br><span class="line"></span><br><span class="line">The output prefix for a given target type is specified on the linker tool</span><br><span class="line">(see &quot;gn help tool&quot;). Sometimes this prefix is undesired.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help output_extension&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-52"><a href="#Example-52" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shared_library(&quot;doom_melon&quot;) &#123;</span><br><span class="line">  # Normally this will produce &quot;libdoom_melon.so&quot; on Linux. Setting this flag</span><br><span class="line">  # will produce &quot;doom_melon.so&quot;.</span><br><span class="line">  output_prefix_override &#x3D; true</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="outputs-Output-files-for-actions-and-copy-targets"><a href="#outputs-Output-files-for-actions-and-copy-targets" class="headerlink" title="outputs: Output files for actions and copy targets."></a><a name="var_outputs"></a><strong>outputs</strong>: Output files for actions and copy targets.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Outputs is valid for &quot;copy&quot;, &quot;action&quot;, and &quot;action_foreach&quot; target types and</span><br><span class="line">indicates the resulting files. Outputs must always refer to files in the</span><br><span class="line">build directory.</span><br><span class="line"></span><br><span class="line">copy</span><br><span class="line">  Copy targets should have exactly one entry in the outputs list. If there is</span><br><span class="line">  exactly one source, this can be a literal file name or a source expansion.</span><br><span class="line">  If there is more than one source, this must contain a source expansion to</span><br><span class="line">  map a single input name to a single output name. See &quot;gn help copy&quot;.</span><br><span class="line"></span><br><span class="line">action_foreach</span><br><span class="line">  Action_foreach targets must always use source expansions to map input files</span><br><span class="line">  to output files. There can be more than one output, which means that each</span><br><span class="line">  invocation of the script will produce a set of files (presumably based on</span><br><span class="line">  the name of the input file). See &quot;gn help action_foreach&quot;.</span><br><span class="line"></span><br><span class="line">action</span><br><span class="line">  Action targets (excluding action_foreach) must list literal output file(s)</span><br><span class="line">  with no source expansions. See &quot;gn help action&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="partial-info-plist-filename-Path-plist-from-asset-catalog-compiler"><a href="#partial-info-plist-filename-Path-plist-from-asset-catalog-compiler" class="headerlink" title="partial_info_plist: [filename] Path plist from asset catalog compiler."></a><a name="var_partial_info_plist"></a><strong>partial_info_plist</strong>: [filename] Path plist from asset catalog compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Valid for create_bundle target, corresponds to the path for the partial</span><br><span class="line">Info.plist created by the asset catalog compiler that needs to be merged</span><br><span class="line">with the application Info.plist (usually done by the code signing script).</span><br><span class="line"></span><br><span class="line">The file will be generated regardless of whether the asset compiler has</span><br><span class="line">been invoked or not. See &quot;gn help create_bundle&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="pool-Label-of-the-pool-used-by-the-action"><a href="#pool-Label-of-the-pool-used-by-the-action" class="headerlink" title="pool: Label of the pool used by the action."></a><a name="var_pool"></a><strong>pool</strong>: Label of the pool used by the action.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A fully-qualified label representing the pool that will be used for the</span><br><span class="line">action. Pools are defined using the pool() &#123;...&#125; declaration.</span><br></pre></td></tr></table></figure>

<h4 id="Example-53"><a href="#Example-53" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;action&quot;) &#123;</span><br><span class="line">  pool &#x3D; &quot;&#x2F;&#x2F;build:custom_pool&quot;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="precompiled-header-string-Header-file-to-precompile"><a href="#precompiled-header-string-Header-file-to-precompile" class="headerlink" title="precompiled_header: [string] Header file to precompile."></a><a name="var_precompiled_header"></a><strong>precompiled_header</strong>: [string] Header file to precompile.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Precompiled headers will be used when a target specifies this value, or a</span><br><span class="line">config applying to this target specifies this value. In addition, the tool</span><br><span class="line">corresponding to the source files must also specify precompiled headers (see</span><br><span class="line">&quot;gn help tool&quot;). The tool will also specify what type of precompiled headers</span><br><span class="line">to use, by setting precompiled_header_type to either &quot;gcc&quot; or &quot;msvc&quot;.</span><br><span class="line"></span><br><span class="line">The precompiled header&#x2F;source variables can be specified on a target or a</span><br><span class="line">config, but must be the same for all configs applying to a given target since</span><br><span class="line">a target can only have one precompiled header.</span><br><span class="line"></span><br><span class="line">If you use both C and C++ sources, the precompiled header and source file</span><br><span class="line">will be compiled once per language. You will want to make sure to wrap C++</span><br><span class="line">includes in __cplusplus #ifdefs so the file will compile in C mode.</span><br></pre></td></tr></table></figure>

<h4 id="GCC-precompiled-headers"><a href="#GCC-precompiled-headers" class="headerlink" title="GCC precompiled headers"></a><strong>GCC precompiled headers</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">When using GCC-style precompiled headers, &quot;precompiled_source&quot; contains the</span><br><span class="line">path of a .h file that is precompiled and then included by all source files</span><br><span class="line">in targets that set &quot;precompiled_source&quot;.</span><br><span class="line"></span><br><span class="line">The value of &quot;precompiled_header&quot; is not used with GCC-style precompiled</span><br><span class="line">headers.</span><br></pre></td></tr></table></figure>

<h4 id="MSVC-precompiled-headers"><a href="#MSVC-precompiled-headers" class="headerlink" title="MSVC precompiled headers"></a><strong>MSVC precompiled headers</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">When using MSVC-style precompiled headers, the &quot;precompiled_header&quot; value is</span><br><span class="line">a string corresponding to the header. This is NOT a path to a file that GN</span><br><span class="line">recognises, but rather the exact string that appears in quotes after</span><br><span class="line">an #include line in source code. The compiler will match this string against</span><br><span class="line">includes or forced includes (&#x2F;FI).</span><br><span class="line"></span><br><span class="line">MSVC also requires a source file to compile the header with. This must be</span><br><span class="line">specified by the &quot;precompiled_source&quot; value. In contrast to the header value,</span><br><span class="line">this IS a GN-style file name, and tells GN which source file to compile to</span><br><span class="line">make the .pch file used for subsequent compiles.</span><br><span class="line"></span><br><span class="line">For example, if the toolchain specifies MSVC headers:</span><br><span class="line"></span><br><span class="line">  toolchain(&quot;vc_x64&quot;) &#123;</span><br><span class="line">    ...</span><br><span class="line">    tool(&quot;cxx&quot;) &#123;</span><br><span class="line">      precompiled_header_type &#x3D; &quot;msvc&quot;</span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line">You might make a config like this:</span><br><span class="line"></span><br><span class="line">  config(&quot;use_precompiled_headers&quot;) &#123;</span><br><span class="line">    precompiled_header &#x3D; &quot;build&#x2F;precompile.h&quot;</span><br><span class="line">    precompiled_source &#x3D; &quot;&#x2F;&#x2F;build&#x2F;precompile.cc&quot;</span><br><span class="line"></span><br><span class="line">    # Either your source files should #include &quot;build&#x2F;precompile.h&quot;</span><br><span class="line">    # first, or you can do this to force-include the header.</span><br><span class="line">    cflags &#x3D; [ &quot;&#x2F;FI$precompiled_header&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">And then define a target that uses the config:</span><br><span class="line"></span><br><span class="line">  executable(&quot;doom_melon&quot;) &#123;</span><br><span class="line">    configs +&#x3D; [ &quot;:use_precompiled_headers&quot; ]</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h3 id="precompiled-header-type-string-“gcc”-or-“msvc”"><a href="#precompiled-header-type-string-“gcc”-or-“msvc”" class="headerlink" title="precompiled_header_type: [string] “gcc” or “msvc”."></a><a name="var_precompiled_header_type"></a><strong>precompiled_header_type</strong>: [string] “gcc” or “msvc”.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">See &quot;gn help precompiled_header&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="precompiled-source-file-name-Source-file-to-precompile"><a href="#precompiled-source-file-name-Source-file-to-precompile" class="headerlink" title="precompiled_source: [file name] Source file to precompile."></a><a name="var_precompiled_source"></a><strong>precompiled_source</strong>: [file name] Source file to precompile.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The source file that goes along with the precompiled_header when using</span><br><span class="line">&quot;msvc&quot;-style precompiled headers. It will be implicitly added to the sources</span><br><span class="line">of the target. See &quot;gn help precompiled_header&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="product-type-Product-type-for-Xcode-projects"><a href="#product-type-Product-type-for-Xcode-projects" class="headerlink" title="product_type: Product type for Xcode projects."></a><a name="var_product_type"></a><strong>product_type</strong>: Product type for Xcode projects.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Correspond to the type of the product of a create_bundle target. Only</span><br><span class="line">meaningful to Xcode (used as part of the Xcode project generation).</span><br><span class="line"></span><br><span class="line">When generating Xcode project files, only create_bundle target with a</span><br><span class="line">non-empty product_type will have a corresponding target in Xcode project.</span><br></pre></td></tr></table></figure>
<h3 id="public-Declare-public-header-files-for-a-target"><a href="#public-Declare-public-header-files-for-a-target" class="headerlink" title="public: Declare public header files for a target."></a><a name="var_public"></a><strong>public</strong>: Declare public header files for a target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">A list of files that other targets can include. These permissions are checked</span><br><span class="line">via the &quot;check&quot; command (see &quot;gn help check&quot;).</span><br><span class="line"></span><br><span class="line">If no public files are declared, other targets (assuming they have visibility</span><br><span class="line">to depend on this target) can include any file in the sources list. If this</span><br><span class="line">variable is defined on a target, dependent targets may only include files on</span><br><span class="line">this whitelist unless that target is marked as a friend (see &quot;gn help</span><br><span class="line">friend&quot;).</span><br><span class="line"></span><br><span class="line">Header file permissions are also subject to visibility. A target must be</span><br><span class="line">visible to another target to include any files from it at all and the public</span><br><span class="line">headers indicate which subset of those files are permitted. See &quot;gn help</span><br><span class="line">visibility&quot; for more.</span><br><span class="line"></span><br><span class="line">Public files are inherited through the dependency tree. So if there is a</span><br><span class="line">dependency A -&gt; B -&gt; C, then A can include C&#39;s public headers. However, the</span><br><span class="line">same is NOT true of visibility, so unless A is in C&#39;s visibility list, the</span><br><span class="line">include will be rejected.</span><br><span class="line"></span><br><span class="line">GN only knows about files declared in the &quot;sources&quot; and &quot;public&quot; sections of</span><br><span class="line">targets. If a file is included that is not known to the build, it will be</span><br><span class="line">allowed.</span><br><span class="line"></span><br><span class="line">It is common for test targets to need to include private headers for their</span><br><span class="line">associated code. In this case, list the test target in the &quot;friend&quot; list of</span><br><span class="line">the target that owns the private header to allow the inclusion. See</span><br><span class="line">&quot;gn help friend&quot; for more.</span><br><span class="line"></span><br><span class="line">When a binary target has no explicit or implicit public headers (a &quot;public&quot;</span><br><span class="line">list is defined but is empty), GN assumes that the target can not propagate</span><br><span class="line">any compile-time dependencies up the dependency tree. In this case, the build</span><br><span class="line">can be parallelized more efficiently.</span><br><span class="line">Say there are dependencies:</span><br><span class="line">  A (shared library) -&gt; B (shared library) -&gt; C (action).</span><br><span class="line">Normally C must complete before any source files in A can compile (because</span><br><span class="line">there might be generated includes). But when B explicitly declares no public</span><br><span class="line">headers, C can execute in parallel with A&#39;s compile steps. C must still be</span><br><span class="line">complete before any dependents link.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-19"><a href="#Examples-19" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">These exact files are public:</span><br><span class="line">  public &#x3D; [ &quot;foo.h&quot;, &quot;bar.h&quot; ]</span><br><span class="line"></span><br><span class="line">No files are public (no targets may include headers from this one):</span><br><span class="line">  # This allows starting compilation in dependent targets earlier.</span><br><span class="line">  public &#x3D; []</span><br></pre></td></tr></table></figure>
<h3 id="public-configs-Configs-to-be-applied-on-dependents"><a href="#public-configs-Configs-to-be-applied-on-dependents" class="headerlink" title="public_configs: Configs to be applied on dependents."></a><a name="var_public_configs"></a><strong>public_configs</strong>: Configs to be applied on dependents.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A list of config labels.</span><br><span class="line"></span><br><span class="line">Targets directly depending on this one will have the configs listed in this</span><br><span class="line">variable added to them. These configs will also apply to the current target.</span><br><span class="line">Generally, public configs are used to apply defines and include directories</span><br><span class="line">necessary to compile this target&#39;s header files.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help all_dependent_configs&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Propagation-of-public-configs"><a href="#Propagation-of-public-configs" class="headerlink" title="Propagation of public configs"></a><strong>Propagation of public configs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Public configs are applied to all targets that depend directly on this one.</span><br><span class="line">These dependent targets can further push this target&#39;s public configs</span><br><span class="line">higher in the dependency tree by depending on it via public_deps (see &quot;gn</span><br><span class="line">help public_deps&quot;).</span><br><span class="line"></span><br><span class="line">  static_library(&quot;toplevel&quot;) &#123;</span><br><span class="line">    # This target will get &quot;my_config&quot; applied to it. However, since this</span><br><span class="line">    # target uses &quot;deps&quot; and not &quot;public_deps&quot;, targets that depend on this</span><br><span class="line">    # one won&#39;t get it.</span><br><span class="line">    deps &#x3D; [ &quot;:intermediate&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  static_library(&quot;intermediate&quot;) &#123;</span><br><span class="line">    # Depending on &quot;lower&quot; in any way will apply &quot;my_config&quot; to this target.</span><br><span class="line">    # Additionall, since this target depends on &quot;lower&quot; via public_deps,</span><br><span class="line">    # targets that depend on this one will also get &quot;my_config&quot;.</span><br><span class="line">    public_deps &#x3D; [ &quot;:lower&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  static_library(&quot;lower&quot;) &#123;</span><br><span class="line">    # This will get applied to all targets that depend on this one.</span><br><span class="line">    public_configs &#x3D; [ &quot;:my_config&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">Public config propagation happens in a second phase once a target and all of</span><br><span class="line">its dependencies have been resolved. Therefore, a target will not see these</span><br><span class="line">force-added configs in their &quot;configs&quot; variable while the script is running,</span><br><span class="line">and they can not be removed. As a result, this capability should generally</span><br><span class="line">only be used to add defines and include directories rather than setting</span><br><span class="line">complicated flags that some targets may not want.</span><br><span class="line"></span><br><span class="line">Public configs may or may not be propagated across toolchain boundaries</span><br><span class="line">depending on the value of the propagates_configs flag (see &quot;gn help</span><br><span class="line">toolchain&quot;) on the toolchain of the target declaring the public_config.</span><br></pre></td></tr></table></figure>

<h4 id="Avoiding-applying-public-configs-to-this-target"><a href="#Avoiding-applying-public-configs-to-this-target" class="headerlink" title="Avoiding applying public configs to this target"></a><strong>Avoiding applying public configs to this target</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">If you want the config to apply to targets that depend on this one, but NOT</span><br><span class="line">this one, define an extra layer of indirection using a group:</span><br><span class="line"></span><br><span class="line">  # External targets depend on this group.</span><br><span class="line">  group(&quot;my_target&quot;) &#123;</span><br><span class="line">    # Config to apply to all targets that depend on this one.</span><br><span class="line">    public_configs &#x3D; [ &quot;:external_settings&quot; ]</span><br><span class="line">    deps &#x3D; [ &quot;:internal_target&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Internal target to actually compile the sources.</span><br><span class="line">  static_library(&quot;internal_target&quot;) &#123;</span><br><span class="line">    # Force all external targets to depend on the group instead of directly</span><br><span class="line">    # on this so the &quot;external_settings&quot; config will get applied.</span><br><span class="line">    visibility &#x3D; [ &quot;:my_target&quot; ]</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-16"><a href="#Ordering-of-flags-and-values-16" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="public-deps-Declare-public-dependencies"><a href="#public-deps-Declare-public-dependencies" class="headerlink" title="public_deps: Declare public dependencies."></a><a name="var_public_deps"></a><strong>public_deps</strong>: Declare public dependencies.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Public dependencies are like private dependencies (see &quot;gn help deps&quot;) but</span><br><span class="line">additionally express that the current target exposes the listed deps as part</span><br><span class="line">of its public API.</span><br><span class="line"></span><br><span class="line">This has several ramifications:</span><br><span class="line"></span><br><span class="line">  - public_configs that are part of the dependency are forwarded to direct</span><br><span class="line">    dependents.</span><br><span class="line"></span><br><span class="line">  - Public headers in the dependency are usable by dependents (includes do</span><br><span class="line">    not require a direct dependency or visibility).</span><br><span class="line"></span><br><span class="line">  - If the current target is a shared library, other shared libraries that it</span><br><span class="line">    publicly depends on (directly or indirectly) are propagated up the</span><br><span class="line">    dependency tree to dependents for linking.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help public_configs&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a><strong>Discussion</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Say you have three targets: A -&gt; B -&gt; C. C&#39;s visibility may allow B to depend</span><br><span class="line">on it but not A. Normally, this would prevent A from including any headers</span><br><span class="line">from C, and C&#39;s public_configs would apply only to B.</span><br><span class="line"></span><br><span class="line">If B lists C in its public_deps instead of regular deps, A will now inherit</span><br><span class="line">C&#39;s public_configs and the ability to include C&#39;s public headers.</span><br><span class="line"></span><br><span class="line">Generally if you are writing a target B and you include C&#39;s headers as part</span><br><span class="line">of B&#39;s public headers, or targets depending on B should consider B and C to</span><br><span class="line">be part of a unit, you should use public_deps instead of deps.</span><br></pre></td></tr></table></figure>

<h4 id="Example-54"><a href="#Example-54" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># This target can include files from &quot;c&quot; but not from</span><br><span class="line"># &quot;super_secret_implementation_details&quot;.</span><br><span class="line">executable(&quot;a&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;:b&quot; ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">shared_library(&quot;b&quot;) &#123;</span><br><span class="line">  deps &#x3D; [ &quot;:super_secret_implementation_details&quot; ]</span><br><span class="line">  public_deps &#x3D; [ &quot;:c&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="rebase-Rebase-collected-metadata-as-files"><a href="#rebase-Rebase-collected-metadata-as-files" class="headerlink" title="rebase: Rebase collected metadata as files."></a><a name="var_rebase"></a><strong>rebase</strong>: Rebase collected metadata as files.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A boolean that triggers a rebase of collected metadata strings based on their</span><br><span class="line">declared file. Defaults to false.</span><br><span class="line"></span><br><span class="line">Metadata generally declares files as strings relative to the local build file.</span><br><span class="line">However, this data is often used in other contexts, and so setting this flag</span><br><span class="line">will force the metadata collection to be rebased according to the local build</span><br><span class="line">file&#39;s location and thus allow the filename to be used anywhere.</span><br><span class="line"></span><br><span class="line">Setting this flag will raise an error if any target&#39;s specified metadata is</span><br><span class="line">not a string value.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help generated_file&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="response-file-contents-Contents-of-a-response-file-for-actions"><a href="#response-file-contents-Contents-of-a-response-file-for-actions" class="headerlink" title="response_file_contents: Contents of a response file for actions."></a><a name="var_response_file_contents"></a><strong>response_file_contents</strong>: Contents of a response file for actions.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Sometimes the arguments passed to a script can be too long for the system&#39;s</span><br><span class="line">command-line capabilities. This is especially the case on Windows where the</span><br><span class="line">maximum command-line length is less than 8K. A response file allows you to</span><br><span class="line">pass an unlimited amount of data to a script in a temporary file for an</span><br><span class="line">action or action_foreach target.</span><br><span class="line"></span><br><span class="line">If the response_file_contents variable is defined and non-empty, the list</span><br><span class="line">will be treated as script args (including possibly substitution patterns)</span><br><span class="line">that will be written to a temporary file at build time. The name of the</span><br><span class="line">temporary file will be substituted for &quot;&#123;&#123;response_file_name&#125;&#125;&quot; in the script</span><br><span class="line">args.</span><br><span class="line"></span><br><span class="line">The response file contents will always be quoted and escaped according to</span><br><span class="line">Unix shell rules. To parse the response file, the Python script should use</span><br><span class="line">&quot;shlex.split(file_contents)&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Example-55"><a href="#Example-55" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">action(&quot;process_lots_of_files&quot;) &#123;</span><br><span class="line">  script &#x3D; &quot;process.py&quot;,</span><br><span class="line">  inputs &#x3D; [ ... huge list of files ... ]</span><br><span class="line"></span><br><span class="line">  # Write all the inputs to a response file for the script. Also,</span><br><span class="line">  # make the paths relative to the script working directory.</span><br><span class="line">  response_file_contents &#x3D; rebase_path(inputs, root_build_dir)</span><br><span class="line"></span><br><span class="line">  # The script expects the name of the response file in --file-list.</span><br><span class="line">  args &#x3D; [</span><br><span class="line">    &quot;--enable-foo&quot;,</span><br><span class="line">    &quot;--file-list&#x3D;&#123;&#123;response_file_name&#125;&#125;&quot;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="script-Script-file-for-actions"><a href="#script-Script-file-for-actions" class="headerlink" title="script: Script file for actions."></a><a name="var_script"></a><strong>script</strong>: Script file for actions.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">An absolute or buildfile-relative file name of a Python script to run for a</span><br><span class="line">action and action_foreach targets (see &quot;gn help action&quot; and &quot;gn help</span><br><span class="line">action_foreach&quot;).</span><br></pre></td></tr></table></figure>
<h3 id="sources-Source-files-for-a-target"><a href="#sources-Source-files-for-a-target" class="headerlink" title="sources: Source files for a target"></a><a name="var_sources"></a><strong>sources</strong>: Source files for a target</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A list of files. Non-absolute paths will be resolved relative to the current</span><br><span class="line">build file.</span><br></pre></td></tr></table></figure>

<h4 id="Sources-for-binary-targets"><a href="#Sources-for-binary-targets" class="headerlink" title="Sources for binary targets"></a><strong>Sources for binary targets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">For binary targets (source sets, executables, and libraries), the known file</span><br><span class="line">types will be compiled with the associated tools. Unknown file types and</span><br><span class="line">headers will be skipped. However, you should still list all C&#x2F;C+ header files</span><br><span class="line">so GN knows about the existence of those files for the purposes of include</span><br><span class="line">checking.</span><br><span class="line"></span><br><span class="line">As a special case, a file ending in &quot;.def&quot; will be treated as a Windows</span><br><span class="line">module definition file. It will be appended to the link line with a</span><br><span class="line">preceding &quot;&#x2F;DEF:&quot; string. There must be at most one .def file in a target</span><br><span class="line">and they do not cross dependency boundaries (so specifying a .def file in a</span><br><span class="line">static library or source set will have no effect on the executable or shared</span><br><span class="line">library they&#39;re linked into).</span><br><span class="line"></span><br><span class="line">For Rust targets that do not specify a crate_root, then the crate_root will</span><br><span class="line">look for a lib.rs file (or main.rs for executable) or a single file in</span><br><span class="line">sources, if sources contains only one file.</span><br></pre></td></tr></table></figure>

<h4 id="Sources-for-non-binary-targets"><a href="#Sources-for-non-binary-targets" class="headerlink" title="Sources for non-binary targets"></a><strong>Sources for non-binary targets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">action_foreach</span><br><span class="line">  The sources are the set of files that the script will be executed over. The</span><br><span class="line">  script will run once per file.</span><br><span class="line"></span><br><span class="line">action</span><br><span class="line">  The sources will be treated the same as inputs. See &quot;gn help inputs&quot; for</span><br><span class="line">  more information and usage advice.</span><br><span class="line"></span><br><span class="line">copy</span><br><span class="line">  The source are the source files to copy.</span><br></pre></td></tr></table></figure>
<h3 id="swiftflags-Flags-passed-to-the-swift-compiler"><a href="#swiftflags-Flags-passed-to-the-swift-compiler" class="headerlink" title="swiftflags: Flags passed to the swift compiler."></a><a name="var_swiftflags"></a><strong>swiftflags</strong>: Flags passed to the swift compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">&quot;swiftflags&quot; are passed to any invocation of a tool that takes an .swift</span><br><span class="line">file as input.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-17"><a href="#Ordering-of-flags-and-values-17" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>
<h3 id="testonly-Declares-a-target-must-only-be-used-for-testing"><a href="#testonly-Declares-a-target-must-only-be-used-for-testing" class="headerlink" title="testonly: Declares a target must only be used for testing."></a><a name="var_testonly"></a><strong>testonly</strong>: Declares a target must only be used for testing.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Boolean. Defaults to false.</span><br><span class="line"></span><br><span class="line">When a target is marked &quot;testonly &#x3D; true&quot;, it must only be depended on by</span><br><span class="line">other test-only targets. Otherwise, GN will issue an error that the</span><br><span class="line">depenedency is not allowed.</span><br><span class="line"></span><br><span class="line">This feature is intended to prevent accidentally shipping test code in a</span><br><span class="line">final product.</span><br></pre></td></tr></table></figure>

<h4 id="Example-56"><a href="#Example-56" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source_set(&quot;test_support&quot;) &#123;</span><br><span class="line">  testonly &#x3D; true</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="visibility-A-list-of-labels-that-can-depend-on-a-target"><a href="#visibility-A-list-of-labels-that-can-depend-on-a-target" class="headerlink" title="visibility: A list of labels that can depend on a target."></a><a name="var_visibility"></a><strong>visibility</strong>: A list of labels that can depend on a target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">A list of labels and label patterns that define which targets can depend on</span><br><span class="line">the current one. These permissions are checked via the &quot;check&quot; command (see</span><br><span class="line">&quot;gn help check&quot;).</span><br><span class="line"></span><br><span class="line">If visibility is not defined, it defaults to public (&quot;*&quot;).</span><br><span class="line"></span><br><span class="line">If visibility is defined, only the targets with labels that match it can</span><br><span class="line">depend on the current target. The empty list means no targets can depend on</span><br><span class="line">the current target.</span><br><span class="line"></span><br><span class="line">Tip: Often you will want the same visibility for all targets in a BUILD file.</span><br><span class="line">In this case you can just put the definition at the top, outside of any</span><br><span class="line">target, and the targets will inherit that scope and see the definition.</span><br></pre></td></tr></table></figure>

<h4 id="Patterns"><a href="#Patterns" class="headerlink" title="Patterns"></a><strong>Patterns</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">See &quot;gn help label_pattern&quot; for more details on what types of patterns are</span><br><span class="line">supported. If a toolchain is specified, only targets in that toolchain will</span><br><span class="line">be matched. If a toolchain is not specified on a pattern, targets in all</span><br><span class="line">toolchains will be matched.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-20"><a href="#Examples-20" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Only targets in the current buildfile (&quot;private&quot;):</span><br><span class="line">  visibility &#x3D; [ &quot;:*&quot; ]</span><br><span class="line"></span><br><span class="line">No targets (used for targets that should be leaf nodes):</span><br><span class="line">  visibility &#x3D; []</span><br><span class="line"></span><br><span class="line">Any target (&quot;public&quot;, the default):</span><br><span class="line">  visibility &#x3D; [ &quot;*&quot; ]</span><br><span class="line"></span><br><span class="line">All targets in the current directory and any subdirectory:</span><br><span class="line">  visibility &#x3D; [ &quot;.&#x2F;*&quot; ]</span><br><span class="line"></span><br><span class="line">Any target in &quot;&#x2F;&#x2F;bar&#x2F;BUILD.gn&quot;:</span><br><span class="line">  visibility &#x3D; [ &quot;&#x2F;&#x2F;bar:*&quot; ]</span><br><span class="line"></span><br><span class="line">Any target in &quot;&#x2F;&#x2F;bar&#x2F;&quot; or any subdirectory thereof:</span><br><span class="line">  visibility &#x3D; [ &quot;&#x2F;&#x2F;bar&#x2F;*&quot; ]</span><br><span class="line"></span><br><span class="line">Just these specific targets:</span><br><span class="line">  visibility &#x3D; [ &quot;:mything&quot;, &quot;&#x2F;&#x2F;foo:something_else&quot; ]</span><br><span class="line"></span><br><span class="line">Any target in the current directory and any subdirectory thereof, plus</span><br><span class="line">any targets in &quot;&#x2F;&#x2F;bar&#x2F;&quot; and any subdirectory thereof.</span><br><span class="line">  visibility &#x3D; [ &quot;.&#x2F;*&quot;, &quot;&#x2F;&#x2F;bar&#x2F;*&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="walk-keys-Key-s-for-managing-the-metadata-collection-walk"><a href="#walk-keys-Key-s-for-managing-the-metadata-collection-walk" class="headerlink" title="walk_keys: Key(s) for managing the metadata collection walk."></a><a name="var_walk_keys"></a><strong>walk_keys</strong>: Key(s) for managing the metadata collection walk.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Defaults to [&quot;&quot;].</span><br><span class="line"></span><br><span class="line">These keys are used to control the next step in a collection walk, acting as</span><br><span class="line">barriers. If a specified key is defined in a target&#39;s metadata, the walk will</span><br><span class="line">use the targets listed in that value to determine which targets are walked.</span><br><span class="line"></span><br><span class="line">If no walk_keys are specified for a generated_file target (i.e. &quot;[&quot;&quot;]&quot;), the</span><br><span class="line">walk will touch all deps and data_deps of the specified target recursively.</span><br><span class="line"></span><br><span class="line">See &quot;gn help generated_file&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="weak-frameworks-name-list-Name-of-frameworks-that-must-be-weak-linked"><a href="#weak-frameworks-name-list-Name-of-frameworks-that-must-be-weak-linked" class="headerlink" title="weak_frameworks: [name list] Name of frameworks that must be weak linked."></a><a name="var_weak_frameworks"></a><strong>weak_frameworks</strong>: [name list] Name of frameworks that must be weak linked.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A list of framework names.</span><br><span class="line"></span><br><span class="line">The frameworks named in that list will be weak linked with any dynamic link</span><br><span class="line">type target. Weak linking instructs the dynamic loader to attempt to load</span><br><span class="line">the framework, but if it is not able to do so, it leaves any imported symbols</span><br><span class="line">unresolved. This is typically used when a framework is present in a new</span><br><span class="line">version of an SDK but not on older versions of the OS that the software runs</span><br><span class="line">on.</span><br></pre></td></tr></table></figure>

<h4 id="Ordering-of-flags-and-values-18"><a href="#Ordering-of-flags-and-values-18" class="headerlink" title="Ordering of flags and values"></a><strong>Ordering of flags and values</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1. Those set on the current target (not in a config).</span><br><span class="line">2. Those set on the &quot;configs&quot; on the target in order that the</span><br><span class="line">   configs appear in the list.</span><br><span class="line">3. Those set on the &quot;all_dependent_configs&quot; on the target in order</span><br><span class="line">   that the configs appear in the list.</span><br><span class="line">4. Those set on the &quot;public_configs&quot; on the target in order that</span><br><span class="line">   those configs appear in the list.</span><br><span class="line">5. all_dependent_configs pulled from dependencies, in the order of</span><br><span class="line">   the &quot;deps&quot; list. This is done recursively. If a config appears</span><br><span class="line">   more than once, only the first occurrence will be used.</span><br><span class="line">6. public_configs pulled from dependencies, in the order of the</span><br><span class="line">   &quot;deps&quot; list. If a dependency is public, they will be applied</span><br><span class="line">   recursively.</span><br></pre></td></tr></table></figure>

<h4 id="Example-57"><a href="#Example-57" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weak_frameworks &#x3D; [ &quot;OnlyOnNewerOSes.framework&quot; ]</span><br></pre></td></tr></table></figure>
<h3 id="write-runtime-deps-Writes-the-target’s-runtime-deps-to-the-given-path"><a href="#write-runtime-deps-Writes-the-target’s-runtime-deps-to-the-given-path" class="headerlink" title="write_runtime_deps: Writes the target’s runtime_deps to the given path."></a><a name="var_write_runtime_deps"></a><strong>write_runtime_deps</strong>: Writes the target’s runtime_deps to the given path.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Does not synchronously write the file, but rather schedules it to be written</span><br><span class="line">at the end of generation.</span><br><span class="line"></span><br><span class="line">If the file exists and the contents are identical to that being written, the</span><br><span class="line">file will not be updated. This will prevent unnecessary rebuilds of targets</span><br><span class="line">that depend on this file.</span><br><span class="line"></span><br><span class="line">Path must be within the output directory.</span><br><span class="line"></span><br><span class="line">See &quot;gn help runtime_deps&quot; for how the runtime dependencies are computed.</span><br><span class="line"></span><br><span class="line">The format of this file will list one file per line with no escaping. The</span><br><span class="line">files will be relative to the root_build_dir. The first line of the file will</span><br><span class="line">be the main output file of the target itself. The file contents will be the</span><br><span class="line">same as requesting the runtime deps be written on the command line (see &quot;gn</span><br><span class="line">help --runtime-deps-list-file&quot;).</span><br></pre></td></tr></table></figure>
<h3 id="xcasset-compiler-flags-Flags-passed-to-xcassets-compiler"><a href="#xcasset-compiler-flags-Flags-passed-to-xcassets-compiler" class="headerlink" title="xcasset_compiler_flags: Flags passed to xcassets compiler."></a><a name="var_xcasset_compiler_flags"></a><strong>xcasset_compiler_flags</strong>: Flags passed to xcassets compiler.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A list of strings.</span><br><span class="line"></span><br><span class="line">Valid for create_bundle target. Those flags are directly passed to</span><br><span class="line">xcassets compiler, corresponding to &#123;&#123;xcasset_compiler_flags&#125;&#125; substitution</span><br><span class="line">in compile_xcassets tool.</span><br></pre></td></tr></table></figure>
<h3 id="xcode-extra-attributes-scope-Extra-attributes-for-Xcode-projects"><a href="#xcode-extra-attributes-scope-Extra-attributes-for-Xcode-projects" class="headerlink" title="xcode_extra_attributes: [scope] Extra attributes for Xcode projects."></a><a name="var_xcode_extra_attributes"></a><strong>xcode_extra_attributes</strong>: [scope] Extra attributes for Xcode projects.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The value defined in this scope will be copied to the EXTRA_ATTRIBUTES</span><br><span class="line">property of the generated Xcode project. They are only meaningful when</span><br><span class="line">generating with --ide&#x3D;xcode.</span><br><span class="line"></span><br><span class="line">See &quot;gn help create_bundle&quot; for more information.</span><br></pre></td></tr></table></figure>
<h3 id="xcode-test-application-name-Name-for-Xcode-test-target"><a href="#xcode-test-application-name-Name-for-Xcode-test-target" class="headerlink" title="xcode_test_application_name: Name for Xcode test target."></a><a name="var_xcode_test_application_name"></a><strong>xcode_test_application_name</strong>: Name for Xcode test target.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Each unit and ui test target must have a test application target, and this</span><br><span class="line">value is used to specify the relationship. Only meaningful to Xcode (used as</span><br><span class="line">part of the Xcode project generation).</span><br><span class="line"></span><br><span class="line">See &quot;gn help create_bundle&quot; for more information.</span><br></pre></td></tr></table></figure>

<h4 id="Example-58"><a href="#Example-58" class="headerlink" title="Example"></a><strong>Example</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create_bundle(&quot;chrome_xctest&quot;) &#123;</span><br><span class="line">  test_application_name &#x3D; &quot;chrome&quot;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Other-help-topics"><a href="#Other-help-topics" class="headerlink" title="Other help topics"></a><a name="other"></a>Other help topics</h2><h3 id="Build-Arguments-Overview"><a href="#Build-Arguments-Overview" class="headerlink" title="Build Arguments Overview"></a><a name="buildargs"></a><strong>Build Arguments Overview</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Build arguments are variables passed in from outside of the build that build</span><br><span class="line">files can query to determine how the build works.</span><br></pre></td></tr></table></figure>

<h4 id="How-build-arguments-are-set"><a href="#How-build-arguments-are-set" class="headerlink" title="How build arguments are set"></a><strong>How build arguments are set</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">First, system default arguments are set based on the current system. The</span><br><span class="line">built-in arguments are:</span><br><span class="line"> - host_cpu</span><br><span class="line"> - host_os</span><br><span class="line"> - current_cpu</span><br><span class="line"> - current_os</span><br><span class="line"> - target_cpu</span><br><span class="line"> - target_os</span><br><span class="line"></span><br><span class="line">Next, project-specific overrides are applied. These are specified inside</span><br><span class="line">the default_args variable of &#x2F;&#x2F;.gn. See &quot;gn help dotfile&quot; for more.</span><br><span class="line"></span><br><span class="line">If specified, arguments from the --args command line flag are used. If that</span><br><span class="line">flag is not specified, args from previous builds in the build directory will</span><br><span class="line">be used (this is in the file args.gn in the build directory).</span><br><span class="line"></span><br><span class="line">Last, for targets being compiled with a non-default toolchain, the toolchain</span><br><span class="line">overrides are applied. These are specified in the toolchain_args section of a</span><br><span class="line">toolchain definition. The use-case for this is that a toolchain may be</span><br><span class="line">building code for a different platform, and that it may want to always</span><br><span class="line">specify Posix, for example. See &quot;gn help toolchain&quot; for more.</span><br><span class="line"></span><br><span class="line">If you specify an override for a build argument that never appears in a</span><br><span class="line">&quot;declare_args&quot; call, a nonfatal error will be displayed.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-21"><a href="#Examples-21" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gn args out&#x2F;FooBar</span><br><span class="line">    Create the directory out&#x2F;FooBar and open an editor. You would type</span><br><span class="line">    something like this into that file:</span><br><span class="line">        enable_doom_melon&#x3D;false</span><br><span class="line">        os&#x3D;&quot;android&quot;</span><br><span class="line"></span><br><span class="line">gn gen out&#x2F;FooBar --args&#x3D;&quot;enable_doom_melon&#x3D;true os&#x3D;\&quot;android\&quot;&quot;</span><br><span class="line">    This will overwrite the build directory with the given arguments. (Note</span><br><span class="line">    that the quotes inside the args command will usually need to be escaped</span><br><span class="line">    for your shell to pass through strings values.)</span><br></pre></td></tr></table></figure>

<h4 id="How-build-arguments-are-used"><a href="#How-build-arguments-are-used" class="headerlink" title="How build arguments are used"></a><strong>How build arguments are used</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">If you want to use an argument, you use declare_args() and specify default</span><br><span class="line">values. These default values will apply if none of the steps listed in the</span><br><span class="line">&quot;How build arguments are set&quot; section above apply to the given argument, but</span><br><span class="line">the defaults will not override any of these.</span><br><span class="line"></span><br><span class="line">Often, the root build config file will declare global arguments that will be</span><br><span class="line">passed to all buildfiles. Individual build files can also specify arguments</span><br><span class="line">that apply only to those files. It is also useful to specify build args in an</span><br><span class="line">&quot;import&quot;-ed file if you want such arguments to apply to multiple buildfiles.</span><br></pre></td></tr></table></figure>
<h3 id="gn-file"><a href="#gn-file" class="headerlink" title=".gn file"></a><a name="dotfile"></a><strong>.gn file</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">When gn starts, it will search the current directory and parent directories</span><br><span class="line">for a file called &quot;.gn&quot;. This indicates the source root. You can override</span><br><span class="line">this detection by using the --root command-line argument</span><br><span class="line"></span><br><span class="line">The .gn file in the source root will be executed. The syntax is the same as a</span><br><span class="line">buildfile, but with very limited build setup-specific meaning.</span><br><span class="line"></span><br><span class="line">If you specify --root, by default GN will look for the file .gn in that</span><br><span class="line">directory. If you want to specify a different file, you can additionally pass</span><br><span class="line">--dotfile:</span><br><span class="line"></span><br><span class="line">  gn gen out&#x2F;Debug --root&#x3D;&#x2F;home&#x2F;build --dotfile&#x3D;&#x2F;home&#x2F;my_gn_file.gn</span><br></pre></td></tr></table></figure>

<h4 id="Variables-14"><a href="#Variables-14" class="headerlink" title="Variables"></a><strong>Variables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">arg_file_template [optional]</span><br><span class="line">    Path to a file containing the text that should be used as the default</span><br><span class="line">    args.gn content when you run &#96;gn args&#96;.</span><br><span class="line"></span><br><span class="line">buildconfig [required]</span><br><span class="line">    Path to the build config file. This file will be used to set up the</span><br><span class="line">    build file execution environment for each toolchain.</span><br><span class="line"></span><br><span class="line">check_targets [optional]</span><br><span class="line">    A list of labels and label patterns that should be checked when running</span><br><span class="line">    &quot;gn check&quot; or &quot;gn gen --check&quot;. If neither check_targets or</span><br><span class="line">    no_check_targets (see below) is specified, all targets will be checked.</span><br><span class="line">    It is an error to specify both check_targets and no_check_targets. If it</span><br><span class="line">    is the empty list, no targets will be checked. To bypass this list,</span><br><span class="line">    request an explicit check of targets, like &quot;&#x2F;&#x2F;*&quot;.</span><br><span class="line"></span><br><span class="line">    The format of this list is identical to that of &quot;visibility&quot; so see &quot;gn</span><br><span class="line">    help visibility&quot; for examples.</span><br><span class="line"></span><br><span class="line">no_check_targets [optional]</span><br><span class="line">    A list of labels and label patterns that should *not* be checked when</span><br><span class="line">    running &quot;gn check&quot; or &quot;gn gen --check&quot;. All other targets will be checked.</span><br><span class="line">    If neither check_targets (see above) or no_check_targets is specified, all</span><br><span class="line">    targets will be checked. It is an error to specify both check_targets and</span><br><span class="line">    no_check_targets.</span><br><span class="line"></span><br><span class="line">    The format of this list is identical to that of &quot;visibility&quot; so see &quot;gn</span><br><span class="line">    help visibility&quot; for examples.</span><br><span class="line"></span><br><span class="line">check_system_includes [optional]</span><br><span class="line">    Boolean to control whether system style includes are checked by default</span><br><span class="line">    when running &quot;gn check&quot; or &quot;gn gen --check&quot;.  System style includes are</span><br><span class="line">    includes that use angle brackets &lt;&gt; instead of double quotes &quot;&quot;. If this</span><br><span class="line">    setting is omitted or set to false, these includes will be ignored by</span><br><span class="line">    default. They can be checked explicitly by running</span><br><span class="line">    &quot;gn check --check-system&quot; or &quot;gn gen --check&#x3D;system&quot;</span><br><span class="line"></span><br><span class="line">exec_script_whitelist [optional]</span><br><span class="line">    A list of .gn&#x2F;.gni files (not labels) that have permission to call the</span><br><span class="line">    exec_script function. If this list is defined, calls to exec_script will</span><br><span class="line">    be checked against this list and GN will fail if the current file isn&#39;t</span><br><span class="line">    in the list.</span><br><span class="line"></span><br><span class="line">    This is to allow the use of exec_script to be restricted since is easy to</span><br><span class="line">    use inappropriately. Wildcards are not supported. Files in the</span><br><span class="line">    secondary_source tree (if defined) should be referenced by ignoring the</span><br><span class="line">    secondary tree and naming them as if they are in the main tree.</span><br><span class="line"></span><br><span class="line">    If unspecified, the ability to call exec_script is unrestricted.</span><br><span class="line"></span><br><span class="line">    Example:</span><br><span class="line">      exec_script_whitelist &#x3D; [</span><br><span class="line">        &quot;&#x2F;&#x2F;base&#x2F;BUILD.gn&quot;,</span><br><span class="line">        &quot;&#x2F;&#x2F;build&#x2F;my_config.gni&quot;,</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">root [optional]</span><br><span class="line">    Label of the root build target. The GN build will start by loading the</span><br><span class="line">    build file containing this target name. This defaults to &quot;&#x2F;&#x2F;:&quot; which will</span><br><span class="line">    cause the file &#x2F;&#x2F;BUILD.gn to be loaded. Note that build_file_extension</span><br><span class="line">    applies to the default case as well.</span><br><span class="line"></span><br><span class="line">    The command-line switch --root-target will override this value (see &quot;gn</span><br><span class="line">    help --root-target&quot;).</span><br><span class="line"></span><br><span class="line">script_executable [optional]</span><br><span class="line">    Path to specific Python executable or other interpreter to use in</span><br><span class="line">    action targets and exec_script calls. By default GN searches the</span><br><span class="line">    PATH for Python to execute these scripts.</span><br><span class="line"></span><br><span class="line">    If set to the empty string, the path specified in action targets</span><br><span class="line">    and exec_script calls will be executed directly.</span><br><span class="line"></span><br><span class="line">secondary_source [optional]</span><br><span class="line">    Label of an alternate directory tree to find input files. When searching</span><br><span class="line">    for a BUILD.gn file (or the build config file discussed above), the file</span><br><span class="line">    will first be looked for in the source root. If it&#39;s not found, the</span><br><span class="line">    secondary source root will be checked (which would contain a parallel</span><br><span class="line">    directory hierarchy).</span><br><span class="line"></span><br><span class="line">    This behavior is intended to be used when BUILD.gn files can&#39;t be checked</span><br><span class="line">    in to certain source directories for whatever reason.</span><br><span class="line"></span><br><span class="line">    The secondary source root must be inside the main source tree.</span><br><span class="line"></span><br><span class="line">default_args [optional]</span><br><span class="line">    Scope containing the default overrides for declared arguments. These</span><br><span class="line">    overrides take precedence over the default values specified in the</span><br><span class="line">    declare_args() block, but can be overridden using --args or the</span><br><span class="line">    args.gn file.</span><br><span class="line"></span><br><span class="line">    This is intended to be used when subprojects declare arguments with</span><br><span class="line">    default values that need to be changed for whatever reason.</span><br><span class="line"></span><br><span class="line">build_file_extension [optional]</span><br><span class="line">    If set to a non-empty string, this is added to the name of all build files</span><br><span class="line">    to load.</span><br><span class="line">    GN will look for build files named &quot;BUILD.$build_file_extension.gn&quot;.</span><br><span class="line">    This is intended to be used during migrations or other situations where</span><br><span class="line">    there are two independent GN builds in the same directories.</span><br><span class="line"></span><br><span class="line">ninja_required_version [optional]</span><br><span class="line">    When set specifies the minimum required version of Ninja. The default</span><br><span class="line">    required version is 1.7.2. Specifying a higher version might enable the</span><br><span class="line">    use of some of newer features that can make the build more efficient.</span><br></pre></td></tr></table></figure>

<h4 id="Example-gn-file-contents"><a href="#Example-gn-file-contents" class="headerlink" title="Example .gn file contents"></a><strong>Example .gn file contents</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">buildconfig &#x3D; &quot;&#x2F;&#x2F;build&#x2F;config&#x2F;BUILDCONFIG.gn&quot;</span><br><span class="line"></span><br><span class="line">check_targets &#x3D; [</span><br><span class="line">  &quot;&#x2F;&#x2F;doom_melon&#x2F;*&quot;,  # Check everything in this subtree.</span><br><span class="line">  &quot;&#x2F;&#x2F;tools:mind_controlling_ant&quot;,  # Check this specific target.</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">root &#x3D; &quot;&#x2F;&#x2F;:root&quot;</span><br><span class="line"></span><br><span class="line">secondary_source &#x3D; &quot;&#x2F;&#x2F;build&#x2F;config&#x2F;temporary_buildfiles&#x2F;&quot;</span><br><span class="line"></span><br><span class="line">default_args &#x3D; &#123;</span><br><span class="line">  # Default to release builds for this project.</span><br><span class="line">  is_debug &#x3D; false</span><br><span class="line">  is_component_build &#x3D; false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Build-graph-and-execution-overview"><a href="#Build-graph-and-execution-overview" class="headerlink" title="Build graph and execution overview"></a><a name="execution"></a><strong>Build graph and execution overview</strong></h3><h4 id="Overall-build-flow"><a href="#Overall-build-flow" class="headerlink" title="Overall build flow"></a><strong>Overall build flow</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1. Look for &quot;.gn&quot; file (see &quot;gn help dotfile&quot;) in the current directory and</span><br><span class="line">   walk up the directory tree until one is found. Set this directory to be</span><br><span class="line">   the &quot;source root&quot; and interpret this file to find the name of the build</span><br><span class="line">   config file.</span><br><span class="line"></span><br><span class="line">2. Execute the build config file identified by .gn to set up the global</span><br><span class="line">   variables and default toolchain name. Any arguments, variables, defaults,</span><br><span class="line">   etc. set up in this file will be visible to all files in the build.</span><br><span class="line"></span><br><span class="line">3. Load the &#x2F;&#x2F;BUILD.gn (in the source root directory).</span><br><span class="line"></span><br><span class="line">4. Recursively evaluate rules and load BUILD.gn in other directories as</span><br><span class="line">   necessary to resolve dependencies. If a BUILD file isn&#39;t found in the</span><br><span class="line">   specified location, GN will look in the corresponding location inside</span><br><span class="line">   the secondary_source defined in the dotfile (see &quot;gn help dotfile&quot;).</span><br><span class="line"></span><br><span class="line">5. When a target&#39;s dependencies are resolved, write out the &#96;.ninja&#96;</span><br><span class="line">   file to disk.</span><br><span class="line"></span><br><span class="line">6. When all targets are resolved, write out the root build.ninja file.</span><br><span class="line"></span><br><span class="line">Note that the BUILD.gn file name may be modulated by .gn arguments such as</span><br><span class="line">build_file_extension.</span><br></pre></td></tr></table></figure>

<h4 id="Executing-target-definitions-and-templates"><a href="#Executing-target-definitions-and-templates" class="headerlink" title="Executing target definitions and templates"></a><strong>Executing target definitions and templates</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Build files are loaded in parallel. This means it is impossible to</span><br><span class="line">interrogate a target from GN code for any information not derivable from its</span><br><span class="line">label (see &quot;gn help label&quot;). The exception is the get_target_outputs()</span><br><span class="line">function which requires the target being interrogated to have been defined</span><br><span class="line">previously in the same file.</span><br><span class="line"></span><br><span class="line">Targets are declared by their type and given a name:</span><br><span class="line"></span><br><span class="line">  static_library(&quot;my_static_library&quot;) &#123;</span><br><span class="line">    ... target parameter definitions ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">There is also a generic &quot;target&quot; function for programmatically defined types</span><br><span class="line">(see &quot;gn help target&quot;). You can define new types using templates (see &quot;gn</span><br><span class="line">help template&quot;). A template defines some custom code that expands to one or</span><br><span class="line">more other targets.</span><br><span class="line"></span><br><span class="line">Before executing the code inside the target&#39;s &#123; &#125;, the target defaults are</span><br><span class="line">applied (see &quot;gn help set_defaults&quot;). It will inject implicit variable</span><br><span class="line">definitions that can be overridden by the target code as necessary. Typically</span><br><span class="line">this mechanism is used to inject a default set of configs that define the</span><br><span class="line">global compiler and linker flags.</span><br></pre></td></tr></table></figure>

<h4 id="Which-targets-are-built"><a href="#Which-targets-are-built" class="headerlink" title="Which targets are built"></a><strong>Which targets are built</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">All targets encountered in the default toolchain (see &quot;gn help toolchain&quot;)</span><br><span class="line">will have build rules generated for them, even if no other targets reference</span><br><span class="line">them. Their dependencies must resolve and they will be added to the implicit</span><br><span class="line">&quot;all&quot; rule (see &quot;gn help ninja_rules&quot;).</span><br><span class="line"></span><br><span class="line">Targets in non-default toolchains will only be generated when they are</span><br><span class="line">required (directly or transitively) to build a target in the default</span><br><span class="line">toolchain.</span><br><span class="line"></span><br><span class="line">See also &quot;gn help ninja_rules&quot;.</span><br></pre></td></tr></table></figure>

<h4 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a><strong>Dependencies</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">The only difference between &quot;public_deps&quot; and &quot;deps&quot; except for pushing</span><br><span class="line">configs around the build tree and allowing includes for the purposes of &quot;gn</span><br><span class="line">check&quot;.</span><br><span class="line"></span><br><span class="line">A target&#39;s &quot;data_deps&quot; are guaranteed to be built whenever the target is</span><br><span class="line">built, but the ordering is not defined. The meaning of this is dependencies</span><br><span class="line">required at runtime. Currently data deps will be complete before the target</span><br><span class="line">is linked, but this is not semantically guaranteed and this is undesirable</span><br><span class="line">from a build performance perspective. Since we hope to change this in the</span><br><span class="line">future, do not rely on this behavior.</span><br></pre></td></tr></table></figure>
<h3 id="Language-and-grammar-for-GN-build-files"><a href="#Language-and-grammar-for-GN-build-files" class="headerlink" title="Language and grammar for GN build files"></a><a name="grammar"></a><strong>Language and grammar for GN build files</strong></h3><h4 id="Tokens"><a href="#Tokens" class="headerlink" title="Tokens"></a><strong>Tokens</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GN build files are read as sequences of tokens.  While splitting the file</span><br><span class="line">into tokens, the next token is the longest sequence of characters that form a</span><br><span class="line">valid token.</span><br></pre></td></tr></table></figure>

<h4 id="White-space-and-comments"><a href="#White-space-and-comments" class="headerlink" title="White space and comments"></a><strong>White space and comments</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">White space is comprised of spaces (U+0020), horizontal tabs (U+0009),</span><br><span class="line">carriage returns (U+000D), and newlines (U+000A).</span><br><span class="line"></span><br><span class="line">Comments start at the character &quot;#&quot; and stop at the next newline.</span><br><span class="line"></span><br><span class="line">White space and comments are ignored except that they may separate tokens</span><br><span class="line">that would otherwise combine into a single token.</span><br></pre></td></tr></table></figure>

<h4 id="Identifiers"><a href="#Identifiers" class="headerlink" title="Identifiers"></a><strong>Identifiers</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Identifiers name variables and functions.</span><br><span class="line"></span><br><span class="line">    identifier &#x3D; letter &#123; letter | digit &#125; .</span><br><span class="line">    letter     &#x3D; &quot;A&quot; ... &quot;Z&quot; | &quot;a&quot; ... &quot;z&quot; | &quot;_&quot; .</span><br><span class="line">    digit      &#x3D; &quot;0&quot; ... &quot;9&quot; .</span><br></pre></td></tr></table></figure>

<h4 id="Keywords"><a href="#Keywords" class="headerlink" title="Keywords"></a><strong>Keywords</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The following keywords are reserved and may not be used as identifiers:</span><br><span class="line"></span><br><span class="line">        else    false   if      true</span><br></pre></td></tr></table></figure>

<h4 id="Integer-literals"><a href="#Integer-literals" class="headerlink" title="Integer literals"></a><strong>Integer literals</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">An integer literal represents a decimal integer value.</span><br><span class="line"></span><br><span class="line">    integer &#x3D; [ &quot;-&quot; ] digit &#123; digit &#125; .</span><br><span class="line"></span><br><span class="line">Leading zeros and negative zero are disallowed.</span><br></pre></td></tr></table></figure>

<h4 id="String-literals"><a href="#String-literals" class="headerlink" title="String literals"></a><strong>String literals</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">A string literal represents a string value consisting of the quoted</span><br><span class="line">characters with possible escape sequences and variable expansions.</span><br><span class="line"></span><br><span class="line">    string           &#x3D; &#96;&quot;&#96; &#123; char | escape | expansion &#125; &#96;&quot;&#96; .</span><br><span class="line">    escape           &#x3D; &#96;\&#96; ( &quot;$&quot; | &#96;&quot;&#96; | char ) .</span><br><span class="line">    BracketExpansion &#x3D; &quot;&#123;&quot; ( identifier | ArrayAccess | ScopeAccess ) &quot;&#125;&quot; .</span><br><span class="line">    Hex              &#x3D; &quot;0x&quot; [0-9A-Fa-f][0-9A-Fa-f]</span><br><span class="line">    expansion        &#x3D; &quot;$&quot; ( identifier | BracketExpansion | Hex ) .</span><br><span class="line">    char             &#x3D; &#x2F;* any character except &quot;$&quot;, &#96;&quot;&#96;, or newline *&#x2F; .</span><br><span class="line"></span><br><span class="line">After a backslash, certain sequences represent special characters:</span><br><span class="line"></span><br><span class="line">        \&quot;    U+0022    quotation mark</span><br><span class="line">        \$    U+0024    dollar sign</span><br><span class="line">        \\    U+005C    backslash</span><br><span class="line"></span><br><span class="line">All other backslashes represent themselves.</span><br><span class="line"></span><br><span class="line">To insert an arbitrary byte value, use $0xFF. For example, to insert a</span><br><span class="line">newline character: &quot;Line one$0x0ALine two&quot;.</span><br><span class="line"></span><br><span class="line">An expansion will evaluate the variable following the &#39;$&#39; and insert a</span><br><span class="line">stringified version of it into the result. For example, to concat two path</span><br><span class="line">components with a slash separating them:</span><br><span class="line">  &quot;$var_one&#x2F;$var_two&quot;</span><br><span class="line">Use the &quot;$&#123;var_one&#125;&quot; format to be explicitly deliniate the variable for</span><br><span class="line">otherwise-ambiguous cases.</span><br></pre></td></tr></table></figure>

<h4 id="Punctuation"><a href="#Punctuation" class="headerlink" title="Punctuation"></a><strong>Punctuation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The following character sequences represent punctuation:</span><br><span class="line"></span><br><span class="line">        +       +&#x3D;      &#x3D;&#x3D;      !&#x3D;      (       )</span><br><span class="line">        -       -&#x3D;      &lt;       &lt;&#x3D;      [       ]</span><br><span class="line">        !       &#x3D;       &gt;       &gt;&#x3D;      &#123;       &#125;</span><br><span class="line">                        &amp;&amp;      ||      .       ,</span><br></pre></td></tr></table></figure>

<h4 id="Grammar"><a href="#Grammar" class="headerlink" title="Grammar"></a><strong>Grammar</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">The input tokens form a syntax tree following a context-free grammar:</span><br><span class="line"></span><br><span class="line">    File &#x3D; StatementList .</span><br><span class="line"></span><br><span class="line">    Statement     &#x3D; Assignment | Call | Condition .</span><br><span class="line">    LValue        &#x3D; identifier | ArrayAccess | ScopeAccess .</span><br><span class="line">    Assignment    &#x3D; LValue AssignOp Expr .</span><br><span class="line">    Call          &#x3D; identifier &quot;(&quot; [ ExprList ] &quot;)&quot; [ Block ] .</span><br><span class="line">    Condition     &#x3D; &quot;if&quot; &quot;(&quot; Expr &quot;)&quot; Block</span><br><span class="line">                    [ &quot;else&quot; ( Condition | Block ) ] .</span><br><span class="line">    Block         &#x3D; &quot;&#123;&quot; StatementList &quot;&#125;&quot; .</span><br><span class="line">    StatementList &#x3D; &#123; Statement &#125; .</span><br><span class="line"></span><br><span class="line">    ArrayAccess &#x3D; identifier &quot;[&quot; Expr &quot;]&quot; .</span><br><span class="line">    ScopeAccess &#x3D; identifier &quot;.&quot; identifier .</span><br><span class="line">    Expr        &#x3D; UnaryExpr | Expr BinaryOp Expr .</span><br><span class="line">    UnaryExpr   &#x3D; PrimaryExpr | UnaryOp UnaryExpr .</span><br><span class="line">    PrimaryExpr &#x3D; identifier | integer | string | Call</span><br><span class="line">                | ArrayAccess | ScopeAccess | Block</span><br><span class="line">                | &quot;(&quot; Expr &quot;)&quot;</span><br><span class="line">                | &quot;[&quot; [ ExprList [ &quot;,&quot; ] ] &quot;]&quot; .</span><br><span class="line">    ExprList    &#x3D; Expr &#123; &quot;,&quot; Expr &#125; .</span><br><span class="line"></span><br><span class="line">    AssignOp &#x3D; &quot;&#x3D;&quot; | &quot;+&#x3D;&quot; | &quot;-&#x3D;&quot; .</span><br><span class="line">    UnaryOp  &#x3D; &quot;!&quot; .</span><br><span class="line">    BinaryOp &#x3D; &quot;+&quot; | &quot;-&quot;                  &#x2F;&#x2F; highest priority</span><br><span class="line">             | &quot;&lt;&quot; | &quot;&lt;&#x3D;&quot; | &quot;&gt;&quot; | &quot;&gt;&#x3D;&quot;</span><br><span class="line">             | &quot;&#x3D;&#x3D;&quot; | &quot;!&#x3D;&quot;</span><br><span class="line">             | &quot;&amp;&amp;&quot;</span><br><span class="line">             | &quot;||&quot; .                     &#x2F;&#x2F; lowest priority</span><br><span class="line"></span><br><span class="line">All binary operators are left-associative.</span><br></pre></td></tr></table></figure>

<h4 id="Types"><a href="#Types" class="headerlink" title="Types"></a><strong>Types</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">The GN language is dynamically typed. The following types are used:</span><br><span class="line"></span><br><span class="line"> - Boolean: Uses the keywords &quot;true&quot; and &quot;false&quot;. There is no implicit</span><br><span class="line">   conversion between booleans and integers.</span><br><span class="line"></span><br><span class="line"> - Integers: All numbers in GN are signed 64-bit integers.</span><br><span class="line"></span><br><span class="line"> - Strings: Strings are 8-bit with no enforced encoding. When a string is</span><br><span class="line">   used to interact with other systems with particular encodings (like the</span><br><span class="line">   Windows and Mac filesystems) it is assumed to be UTF-8. See &quot;String</span><br><span class="line">   literals&quot; above for more.</span><br><span class="line"></span><br><span class="line"> - Lists: Lists are arbitrary-length ordered lists of values. See &quot;Lists&quot;</span><br><span class="line">   below for more.</span><br><span class="line"></span><br><span class="line"> - Scopes: Scopes are like dictionaries that use variable names for keys. See</span><br><span class="line">   &quot;Scopes&quot; below for more.</span><br></pre></td></tr></table></figure>

<h4 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a><strong>Lists</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Lists are created with [] and using commas to separate items:</span><br><span class="line"></span><br><span class="line">     mylist &#x3D; [ 0, 1, 2, &quot;some string&quot; ]</span><br><span class="line"></span><br><span class="line">A comma after the last item is optional. Lists are dereferenced using 0-based</span><br><span class="line">indexing:</span><br><span class="line"></span><br><span class="line">     mylist[0] +&#x3D; 1</span><br><span class="line">     var &#x3D; mylist[2]</span><br><span class="line"></span><br><span class="line">Lists can be concatenated using the &#39;+&#39; and &#39;+&#x3D;&#39; operators. Bare values can</span><br><span class="line">not be concatenated with lists, to add a single item, it must be put into a</span><br><span class="line">list of length one.</span><br><span class="line"></span><br><span class="line">Items can be removed from lists using the &#39;-&#39; and &#39;-&#x3D;&#39; operators. This will</span><br><span class="line">remove all occurrences of every item in the right-hand list from the</span><br><span class="line">left-hand list. It is an error to remove an item not in the list. This is to</span><br><span class="line">prevent common typos and to detect dead code that is removing things that no</span><br><span class="line">longer apply.</span><br><span class="line"></span><br><span class="line">It is an error to use &#39;&#x3D;&#39; to replace a nonempty list with another nonempty</span><br><span class="line">list. This is to prevent accidentally overwriting data when in most cases</span><br><span class="line">&#39;+&#x3D;&#39; was intended. To overwrite a list on purpose, first assign it to the</span><br><span class="line">empty list:</span><br><span class="line"></span><br><span class="line">  mylist &#x3D; []</span><br><span class="line">  mylist &#x3D; otherlist</span><br></pre></td></tr></table></figure>

<h4 id="Scopes"><a href="#Scopes" class="headerlink" title="Scopes"></a><strong>Scopes</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">All execution happens in the context of a scope which holds the current state</span><br><span class="line">(like variables). With the exception of loops and conditions, &#39;&#123;&#39; introduces</span><br><span class="line">a new scope that has a parent reference to the old scope.</span><br><span class="line"></span><br><span class="line">Variable reads recursively search all nested scopes until the variable is</span><br><span class="line">found or there are no more scopes. Variable writes always go into the current</span><br><span class="line">scope. This means that after the closing &#39;&#125;&#39; (again excepting loops and</span><br><span class="line">conditions), all local variables will be restored to the previous values.</span><br><span class="line">This also means that &quot;foo &#x3D; foo&quot; can do useful work by copying a variable</span><br><span class="line">into the current scope that was defined in a containing scope.</span><br><span class="line"></span><br><span class="line">Scopes can also be assigned to variables. Such scopes can be created by</span><br><span class="line">functions like exec_script, when invoking a template (the template code</span><br><span class="line">refers to the variables set by the invoking code by the implicitly-created</span><br><span class="line">&quot;invoker&quot; scope), or explicitly like:</span><br><span class="line"></span><br><span class="line">  empty_scope &#x3D; &#123;&#125;</span><br><span class="line">  myvalues &#x3D; &#123;</span><br><span class="line">    foo &#x3D; 21</span><br><span class="line">    bar &#x3D; &quot;something&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">Inside such a scope definition can be any GN code including conditionals and</span><br><span class="line">function calls. After the close of the scope, it will contain all variables</span><br><span class="line">explicitly set by the code contained inside it. After this, the values can be</span><br><span class="line">read, modified, or added to:</span><br><span class="line"></span><br><span class="line">  myvalues.foo +&#x3D; 2</span><br><span class="line">  empty_scope.new_thing &#x3D; [ 1, 2, 3 ]</span><br><span class="line"></span><br><span class="line">Scope equality is defined as single-level scopes identical within the current</span><br><span class="line">scope. That is, all values in the first scope must be present and identical</span><br><span class="line">within the second, and vice versa. Note that this means inherited scopes are</span><br><span class="line">always unequal by definition.</span><br></pre></td></tr></table></figure>
<h3 id="Input-and-output-conversion"><a href="#Input-and-output-conversion" class="headerlink" title="Input and output conversion"></a><a name="io_conversion"></a><strong>Input and output conversion</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">Input and output conversions are arguments to file and process functions</span><br><span class="line">that specify how to convert data to or from external formats. The possible</span><br><span class="line">values for parameters specifying conversions are:</span><br><span class="line"></span><br><span class="line">&quot;&quot; (the default)</span><br><span class="line">    input: Discard the result and return None.</span><br><span class="line"></span><br><span class="line">    output: If value is a list, then &quot;list lines&quot;; otherwise &quot;value&quot;.</span><br><span class="line"></span><br><span class="line">&quot;list lines&quot;</span><br><span class="line">    input:</span><br><span class="line">      Return the file contents as a list, with a string for each line. The</span><br><span class="line">      newlines will not be present in the result. The last line may or may</span><br><span class="line">      not end in a newline.</span><br><span class="line"></span><br><span class="line">      After splitting, each individual line will be trimmed of whitespace on</span><br><span class="line">      both ends.</span><br><span class="line"></span><br><span class="line">    output:</span><br><span class="line">      Renders the value contents as a list, with a string for each line. The</span><br><span class="line">      newlines will not be present in the result. The last line will end in</span><br><span class="line">      with a newline.</span><br><span class="line"></span><br><span class="line">&quot;scope&quot;</span><br><span class="line">    input:</span><br><span class="line">      Execute the block as GN code and return a scope with the resulting</span><br><span class="line">      values in it. If the input was:</span><br><span class="line">        a &#x3D; [ &quot;hello.cc&quot;, &quot;world.cc&quot; ]</span><br><span class="line">        b &#x3D; 26</span><br><span class="line">      and you read the result into a variable named &quot;val&quot;, then you could</span><br><span class="line">      access contents the &quot;.&quot; operator on &quot;val&quot;:</span><br><span class="line">        sources &#x3D; val.a</span><br><span class="line">        some_count &#x3D; val.b</span><br><span class="line"></span><br><span class="line">    output:</span><br><span class="line">      Renders the value contents as a GN code block, reversing the input</span><br><span class="line">      result above.</span><br><span class="line"></span><br><span class="line">&quot;string&quot;</span><br><span class="line">    input: Return the file contents into a single string.</span><br><span class="line"></span><br><span class="line">    output:</span><br><span class="line">      Render the value contents into a single string. The output is:</span><br><span class="line">      a string renders with quotes, e.g. &quot;str&quot;</span><br><span class="line">      an integer renders as a stringified integer, e.g. &quot;6&quot;</span><br><span class="line">      a boolean renders as the associated string, e.g. &quot;true&quot;</span><br><span class="line">      a list renders as a representation of its contents, e.g. &quot;[\&quot;str\&quot;, 6]&quot;</span><br><span class="line">      a scope renders as a GN code block of its values. If the Value was:</span><br><span class="line">          Value val;</span><br><span class="line">          val.a &#x3D; [ &quot;hello.cc&quot;, &quot;world.cc&quot; ];</span><br><span class="line">          val.b &#x3D; 26</span><br><span class="line">        the resulting output would be:</span><br><span class="line">          &quot;&#123;</span><br><span class="line">              a &#x3D; [ \&quot;hello.cc\&quot;, \&quot;world.cc\&quot; ]</span><br><span class="line">              b &#x3D; 26</span><br><span class="line">          &#125;&quot;</span><br><span class="line"></span><br><span class="line">&quot;value&quot;</span><br><span class="line">    input:</span><br><span class="line">      Parse the input as if it was a literal rvalue in a buildfile. Examples of</span><br><span class="line">      typical program output using this mode:</span><br><span class="line">        [ &quot;foo&quot;, &quot;bar&quot; ]     (result will be a list)</span><br><span class="line">      or</span><br><span class="line">        &quot;foo bar&quot;            (result will be a string)</span><br><span class="line">      or</span><br><span class="line">        5                    (result will be an integer)</span><br><span class="line"></span><br><span class="line">      Note that if the input is empty, the result will be a null value which</span><br><span class="line">      will produce an error if assigned to a variable.</span><br><span class="line"></span><br><span class="line">    output:</span><br><span class="line">      Render the value contents as a literal rvalue. Strings render with</span><br><span class="line">      escaped quotes.</span><br><span class="line"></span><br><span class="line">&quot;json&quot;</span><br><span class="line">    input: Parse the input as a JSON and convert it to equivalent GN rvalue.</span><br><span class="line"></span><br><span class="line">    output: Convert the Value to equivalent JSON value.</span><br><span class="line"></span><br><span class="line">    The data type mapping is:</span><br><span class="line">      a string in JSON maps to string in GN</span><br><span class="line">      an integer in JSON maps to integer in GN</span><br><span class="line">      a float in JSON is unsupported and will result in an error</span><br><span class="line">      an object in JSON maps to scope in GN</span><br><span class="line">      an array in JSON maps to list in GN</span><br><span class="line">      a boolean in JSON maps to boolean in GN</span><br><span class="line">      a null in JSON is unsupported and will result in an error</span><br><span class="line"></span><br><span class="line">    Nota that the input dictionary keys have to be valid GN identifiers</span><br><span class="line">    otherwise they will produce an error.</span><br><span class="line"></span><br><span class="line">&quot;trim ...&quot; (input only)</span><br><span class="line">    Prefixing any of the other transformations with the word &quot;trim&quot; will</span><br><span class="line">    result in whitespace being trimmed from the beginning and end of the</span><br><span class="line">    result before processing.</span><br><span class="line"></span><br><span class="line">    Examples: &quot;trim string&quot; or &quot;trim list lines&quot;</span><br><span class="line"></span><br><span class="line">    Note that &quot;trim value&quot; is useless because the value parser skips</span><br><span class="line">    whitespace anyway.</span><br></pre></td></tr></table></figure>
<h3 id="File-patterns"><a href="#File-patterns" class="headerlink" title="File patterns"></a><a name="file_pattern"></a><strong>File patterns</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">File patterns are VERY limited regular expressions. They must match the</span><br><span class="line">entire input string to be counted as a match. In regular expression parlance,</span><br><span class="line">there is an implicit &quot;^...$&quot; surrounding your input. If you want to match a</span><br><span class="line">substring, you need to use wildcards at the beginning and end.</span><br><span class="line"></span><br><span class="line">There are only two special tokens understood by the pattern matcher.</span><br><span class="line">Everything else is a literal.</span><br><span class="line"></span><br><span class="line"> - &quot;*&quot; Matches zero or more of any character. It does not depend on the</span><br><span class="line">   preceding character (in regular expression parlance it is equivalent to</span><br><span class="line">   &quot;.*&quot;).</span><br><span class="line"></span><br><span class="line"> - &quot;\b&quot; Matches a path boundary. This will match the beginning or end of a</span><br><span class="line">   string, or a slash.</span><br></pre></td></tr></table></figure>

<h4 id="Pattern-examples"><a href="#Pattern-examples" class="headerlink" title="Pattern examples"></a><strong>Pattern examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;*asdf*&quot;</span><br><span class="line">    Matches a string containing &quot;asdf&quot; anywhere.</span><br><span class="line"></span><br><span class="line">&quot;asdf&quot;</span><br><span class="line">    Matches only the exact string &quot;asdf&quot;.</span><br><span class="line"></span><br><span class="line">&quot;*.cc&quot;</span><br><span class="line">    Matches strings ending in the literal &quot;.cc&quot;.</span><br><span class="line"></span><br><span class="line">&quot;\bwin&#x2F;*&quot;</span><br><span class="line">    Matches &quot;win&#x2F;foo&quot; and &quot;foo&#x2F;win&#x2F;bar.cc&quot; but not &quot;iwin&#x2F;foo&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="Label-patterns"><a href="#Label-patterns" class="headerlink" title="Label patterns"></a><a name="label_pattern"></a><strong>Label patterns</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">A label pattern is a way of expressing one or more labels in a portion of the</span><br><span class="line">source tree. They are not general regular expressions.</span><br><span class="line"></span><br><span class="line">They can take the following forms only:</span><br><span class="line"></span><br><span class="line"> - Explicit (no wildcard):</span><br><span class="line">     &quot;&#x2F;&#x2F;foo&#x2F;bar:baz&quot;</span><br><span class="line">     &quot;:baz&quot;</span><br><span class="line"></span><br><span class="line"> - Wildcard target names:</span><br><span class="line">     &quot;&#x2F;&#x2F;foo&#x2F;bar:*&quot; (all targets in the &#x2F;&#x2F;foo&#x2F;bar&#x2F;BUILD.gn file)</span><br><span class="line">     &quot;:*&quot;  (all targets in the current build file)</span><br><span class="line"></span><br><span class="line"> - Wildcard directory names (&quot;*&quot; is only supported at the end)</span><br><span class="line">     &quot;*&quot;  (all targets)</span><br><span class="line">     &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;*&quot;  (all targets in any subdir of &#x2F;&#x2F;foo&#x2F;bar)</span><br><span class="line">     &quot;.&#x2F;*&quot;  (all targets in the current build file or sub dirs)</span><br><span class="line"></span><br><span class="line">Any of the above forms can additionally take an explicit toolchain</span><br><span class="line">in parenthesis at the end of the label pattern. In this case, the</span><br><span class="line">toolchain must be fully qualified (no wildcards are supported in the</span><br><span class="line">toolchain name).</span><br><span class="line"></span><br><span class="line">  &quot;&#x2F;&#x2F;foo:bar(&#x2F;&#x2F;build&#x2F;toolchain:mac)&quot;</span><br><span class="line">      An explicit target in an explicit toolchain.</span><br><span class="line"></span><br><span class="line">  &quot;:*(&#x2F;&#x2F;build&#x2F;toolchain&#x2F;linux:32bit)&quot;</span><br><span class="line">      All targets in the current build file using the 32-bit Linux toolchain.</span><br><span class="line"></span><br><span class="line">  &quot;&#x2F;&#x2F;foo&#x2F;*(&#x2F;&#x2F;build&#x2F;toolchain:win)&quot;</span><br><span class="line">      All targets in &#x2F;&#x2F;foo and any subdirectory using the Windows</span><br><span class="line">      toolchain.</span><br></pre></td></tr></table></figure>
<h3 id="About-labels"><a href="#About-labels" class="headerlink" title="About labels"></a><a name="labels"></a><strong>About labels</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Everything that can participate in the dependency graph (targets, configs,</span><br><span class="line">and toolchains) are identified by labels. A common label looks like:</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;base&#x2F;test:test_support</span><br><span class="line"></span><br><span class="line">This consists of a source-root-absolute path, a colon, and a name. This means</span><br><span class="line">to look for the thing named &quot;test_support&quot; in &quot;base&#x2F;test&#x2F;BUILD.gn&quot;.</span><br><span class="line"></span><br><span class="line">You can also specify system absolute paths if necessary. Typically such</span><br><span class="line">paths would be specified via a build arg so the developer can specify where</span><br><span class="line">the component is on their system.</span><br><span class="line"></span><br><span class="line">  &#x2F;usr&#x2F;local&#x2F;foo:bar    (Posix)</span><br><span class="line">  &#x2F;C:&#x2F;Program Files&#x2F;MyLibs:bar   (Windows)</span><br></pre></td></tr></table></figure>

<h4 id="Toolchains"><a href="#Toolchains" class="headerlink" title="Toolchains"></a><strong>Toolchains</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">A canonical label includes the label of the toolchain being used. Normally,</span><br><span class="line">the toolchain label is implicitly inherited from the current execution</span><br><span class="line">context, but you can override this to specify cross-toolchain dependencies:</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;base&#x2F;test:test_support(&#x2F;&#x2F;build&#x2F;toolchain&#x2F;win:msvc)</span><br><span class="line"></span><br><span class="line">Here GN will look for the toolchain definition called &quot;msvc&quot; in the file</span><br><span class="line">&quot;&#x2F;&#x2F;build&#x2F;toolchain&#x2F;win&quot; to know how to compile this target.</span><br></pre></td></tr></table></figure>

<h4 id="Relative-labels"><a href="#Relative-labels" class="headerlink" title="Relative labels"></a><strong>Relative labels</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">If you want to refer to something in the same buildfile, you can omit</span><br><span class="line">the path name and just start with a colon. This format is recommended for</span><br><span class="line">all same-file references.</span><br><span class="line"></span><br><span class="line">  :base</span><br><span class="line"></span><br><span class="line">Labels can be specified as being relative to the current directory.</span><br><span class="line">Stylistically, we prefer to use absolute paths for all non-file-local</span><br><span class="line">references unless a build file needs to be run in different contexts (like a</span><br><span class="line">project needs to be both standalone and pulled into other projects in</span><br><span class="line">difference places in the directory hierarchy).</span><br><span class="line"></span><br><span class="line">  source&#x2F;plugin:myplugin</span><br><span class="line">  ..&#x2F;net:url_request</span><br></pre></td></tr></table></figure>

<h4 id="Implicit-names"><a href="#Implicit-names" class="headerlink" title="Implicit names"></a><strong>Implicit names</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">If a name is unspecified, it will inherit the directory name. Stylistically,</span><br><span class="line">we prefer to omit the colon and name when possible:</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;net  -&gt;  &#x2F;&#x2F;net:net</span><br><span class="line">  &#x2F;&#x2F;tools&#x2F;gn  -&gt;  &#x2F;&#x2F;tools&#x2F;gn:gn</span><br></pre></td></tr></table></figure>
<h3 id="Metadata-Collection"><a href="#Metadata-Collection" class="headerlink" title="Metadata Collection"></a><a name="metadata_collection"></a><strong>Metadata Collection</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Metadata is information attached to targets throughout the dependency tree. GN</span><br><span class="line">allows for the collection of this data into files written during the generation</span><br><span class="line">step, enabling users to expose and aggregate this data based on the dependency</span><br><span class="line">tree.</span><br></pre></td></tr></table></figure>

<h4 id="generated-file-targets"><a href="#generated-file-targets" class="headerlink" title="generated_file targets"></a><strong>generated_file targets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Similar to the write_file() function, the generated_file target type</span><br><span class="line">creates a file in the specified location with the specified content. The</span><br><span class="line">primary difference between write_file() and this target type is that the</span><br><span class="line">write_file function does the file write at parse time, while the</span><br><span class="line">generated_file target type writes at target resolution time. See</span><br><span class="line">&quot;gn help generated_file&quot; for more detail.</span><br><span class="line"></span><br><span class="line">When written at target resolution time, generated_file enables GN to</span><br><span class="line">collect and write aggregated metadata from dependents.</span><br><span class="line"></span><br><span class="line">A generated_file target can declare either &#39;contents&#39; to write statically</span><br><span class="line">known contents to a file or &#39;data_keys&#39; to aggregate metadata and write the</span><br><span class="line">result to a file. It can also specify &#39;walk_keys&#39; (to restrict the metadata</span><br><span class="line">collection), &#39;output_conversion&#39;, and &#39;rebase&#39;.</span><br></pre></td></tr></table></figure>

<h4 id="Collection-and-Aggregation"><a href="#Collection-and-Aggregation" class="headerlink" title="Collection and Aggregation"></a><strong>Collection and Aggregation</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">Targets can declare a &#39;metadata&#39; variable containing a scope, and this</span><br><span class="line">metadata may be collected and written out to a file specified by</span><br><span class="line">generated_file aggregation targets. The &#39;metadata&#39; scope must contain</span><br><span class="line">only list values since the aggregation step collects a list of these values.</span><br><span class="line"></span><br><span class="line">During the target resolution, generated_file targets will walk their</span><br><span class="line">dependencies recursively, collecting metadata based on the specified</span><br><span class="line">&#39;data_keys&#39;. &#39;data_keys&#39; is specified as a list of strings, used by the walk</span><br><span class="line">to identify which variables in dependencies&#39; &#39;metadata&#39; scopes to collect.</span><br><span class="line"></span><br><span class="line">The walk begins with the listed dependencies of the &#39;generated_file&#39; target.</span><br><span class="line">The &#39;metadata&#39; scope for each dependency is inspected for matching elements</span><br><span class="line">of the &#39;generated_file&#39; target&#39;s &#39;data_keys&#39; list.  If a match is found, the</span><br><span class="line">data from the dependent&#39;s matching key list is appended to the aggregate walk</span><br><span class="line">list. Note that this means that if more than one walk key is specified, the</span><br><span class="line">data in all of them will be aggregated into one list. From there, the walk</span><br><span class="line">will then recurse into the dependencies of each target it encounters,</span><br><span class="line">collecting the specified metadata for each.</span><br><span class="line"></span><br><span class="line">For example:</span><br><span class="line"></span><br><span class="line">  group(&quot;a&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      doom_melon &#x3D; [ &quot;enable&quot; ]</span><br><span class="line">      my_files &#x3D; [ &quot;foo.cpp&quot; ]</span><br><span class="line">      my_extra_files &#x3D; [ &quot;bar.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:b&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;b&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;baz.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  generated_file(&quot;metadata&quot;) &#123;</span><br><span class="line">    outputs &#x3D; [ &quot;$root_build_dir&#x2F;my_files.json&quot; ]</span><br><span class="line">    data_keys &#x3D; [ &quot;my_files&quot;, &quot;my_extra_files&quot; ]</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:a&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">The above will produce the following file data:</span><br><span class="line"></span><br><span class="line">  foo.cpp</span><br><span class="line">  bar.cpp</span><br><span class="line">  baz.cpp</span><br><span class="line"></span><br><span class="line">The dependency walk can be limited by using the &#39;walk_keys&#39;. This is a list of</span><br><span class="line">labels that should be included in the walk. All labels specified here should</span><br><span class="line">also be in one of the deps lists. These keys act as barriers, where the walk</span><br><span class="line">will only recurse into the targets listed. An empty list in all specified</span><br><span class="line">barriers will end that portion of the walk.</span><br><span class="line"></span><br><span class="line">  group(&quot;a&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;foo.cpp&quot; ]</span><br><span class="line">      my_files_barrier &#x3D; [ &quot;:b&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:b&quot;, &quot;:c&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;b&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;bar.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  group(&quot;c&quot;) &#123;</span><br><span class="line">    metadata &#x3D; &#123;</span><br><span class="line">      my_files &#x3D; [ &quot;doom_melon.cpp&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  generated_file(&quot;metadata&quot;) &#123;</span><br><span class="line">    outputs &#x3D; [ &quot;$root_build_dir&#x2F;my_files.json&quot; ]</span><br><span class="line">    data_keys &#x3D; [ &quot;my_files&quot; ]</span><br><span class="line">    walk_keys &#x3D; [ &quot;my_files_barrier&quot; ]</span><br><span class="line"></span><br><span class="line">    deps &#x3D; [ &quot;:a&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">The above will produce the following file data (note that &#96;doom_melon.cpp&#96; is</span><br><span class="line">not included):</span><br><span class="line"></span><br><span class="line">  foo.cpp</span><br><span class="line">  bar.cpp</span><br><span class="line"></span><br><span class="line">A common example of this sort of barrier is in builds that have host tools</span><br><span class="line">built as part of the tree, but do not want the metadata from those host tools</span><br><span class="line">to be collected with the target-side code.</span><br></pre></td></tr></table></figure>

<h4 id="Common-Uses"><a href="#Common-Uses" class="headerlink" title="Common Uses"></a><strong>Common Uses</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Metadata can be used to collect information about the different targets in the</span><br><span class="line">build, and so a common use is to provide post-build tooling with a set of data</span><br><span class="line">necessary to do aggregation tasks. For example, if each test target specifies</span><br><span class="line">the output location of its binary to run in a metadata field, that can be</span><br><span class="line">collected into a single file listing the locations of all tests in the</span><br><span class="line">dependency tree. A local build tool (or continuous integration infrastructure)</span><br><span class="line">can then use that file to know which tests exist, and where, and run them</span><br><span class="line">accordingly.</span><br><span class="line"></span><br><span class="line">Another use is in image creation, where a post-build image tool needs to know</span><br><span class="line">various pieces of information about the components it should include in order</span><br><span class="line">to put together the correct image.</span><br></pre></td></tr></table></figure>
<h3 id="Ninja-build-rules"><a href="#Ninja-build-rules" class="headerlink" title="Ninja build rules"></a><a name="ninja_rules"></a><strong>Ninja build rules</strong></h3><h4 id="The-“all”-and-“default”-rules"><a href="#The-“all”-and-“default”-rules" class="headerlink" title="The “all” and “default” rules"></a><strong>The “all” and “default” rules</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">All generated targets (see &quot;gn help execution&quot;) will be added to an implicit</span><br><span class="line">build rule called &quot;all&quot; so &quot;ninja all&quot; will always compile everything. The</span><br><span class="line">default rule will be used by Ninja if no specific target is specified (just</span><br><span class="line">typing &quot;ninja&quot;). If there is a target named &quot;default&quot; in the root build file,</span><br><span class="line">it will be the default build rule, otherwise the implicit &quot;all&quot; rule will be</span><br><span class="line">used.</span><br></pre></td></tr></table></figure>

<h4 id="Phony-rules"><a href="#Phony-rules" class="headerlink" title="Phony rules"></a><strong>Phony rules</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">GN generates Ninja &quot;phony&quot; rules for targets in the default toolchain.  The</span><br><span class="line">phony rules can collide with each other and with the names of generated files</span><br><span class="line">so are generated with the following priority:</span><br><span class="line"></span><br><span class="line">  1. Actual files generated by the build always take precedence.</span><br><span class="line"></span><br><span class="line">  2. Targets in the toplevel &#x2F;&#x2F;BUILD.gn file.</span><br><span class="line"></span><br><span class="line">  3. Targets in toplevel directories matching the names of the directories.</span><br><span class="line">     So &quot;ninja foo&quot; can be used to compile &quot;&#x2F;&#x2F;foo:foo&quot;. This only applies to</span><br><span class="line">     the first level of directories since usually these are the most</span><br><span class="line">     important (so this won&#39;t apply to &quot;&#x2F;&#x2F;foo&#x2F;bar:bar&quot;).</span><br><span class="line"></span><br><span class="line">  4. The short names of executables if there is only one executable with that</span><br><span class="line">     short name. Use &quot;ninja doom_melon&quot; to compile the</span><br><span class="line">     &quot;&#x2F;&#x2F;tools&#x2F;fruit:doom_melon&quot; executable.</span><br><span class="line"></span><br><span class="line">  5. The short names of all targets if there is only one target with that</span><br><span class="line">     short name.</span><br><span class="line"></span><br><span class="line">  6. Full label name with no leading slashes. So you can use</span><br><span class="line">     &quot;ninja tools&#x2F;fruit:doom_melon&quot; to build &quot;&#x2F;&#x2F;tools&#x2F;fruit:doom_melon&quot;.</span><br><span class="line"></span><br><span class="line">  7. Labels with an implicit name part (when the short names match the</span><br><span class="line">     directory). So you can use &quot;ninja foo&#x2F;bar&quot; to compile &quot;&#x2F;&#x2F;foo&#x2F;bar:bar&quot;.</span><br><span class="line"></span><br><span class="line">These &quot;phony&quot; rules are provided only for running Ninja since this matches</span><br><span class="line">people&#39;s historical expectations for building. For consistency with the rest</span><br><span class="line">of the program, GN introspection commands accept explicit labels.</span><br><span class="line"></span><br><span class="line">To explicitly compile a target in a non-default toolchain, you must give</span><br><span class="line">Ninja the exact name of the output file relative to the build directory.</span><br></pre></td></tr></table></figure>
<h3 id="nogncheck-Skip-an-include-line-from-checking"><a href="#nogncheck-Skip-an-include-line-from-checking" class="headerlink" title="nogncheck: Skip an include line from checking."></a><a name="nogncheck"></a><strong>nogncheck</strong>: Skip an include line from checking.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">GN&#39;s header checker helps validate that the includes match the build</span><br><span class="line">dependency graph. Sometimes an include might be conditional or otherwise</span><br><span class="line">problematic, but you want to specifically allow it. In this case, it can be</span><br><span class="line">whitelisted.</span><br><span class="line"></span><br><span class="line">Include lines containing the substring &quot;nogncheck&quot; will be excluded from</span><br><span class="line">header checking. The most common case is a conditional include:</span><br><span class="line"></span><br><span class="line">  #if defined(ENABLE_DOOM_MELON)</span><br><span class="line">  #include &quot;tools&#x2F;doom_melon&#x2F;doom_melon.h&quot;  &#x2F;&#x2F; nogncheck</span><br><span class="line">  #endif</span><br><span class="line"></span><br><span class="line">If the build file has a conditional dependency on the corresponding target</span><br><span class="line">that matches the conditional include, everything will always link correctly:</span><br><span class="line"></span><br><span class="line">  source_set(&quot;mytarget&quot;) &#123;</span><br><span class="line">    ...</span><br><span class="line">    if (enable_doom_melon) &#123;</span><br><span class="line">      defines &#x3D; [ &quot;ENABLE_DOOM_MELON&quot; ]</span><br><span class="line">      deps +&#x3D; [ &quot;&#x2F;&#x2F;tools&#x2F;doom_melon&quot; ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">But GN&#39;s header checker does not understand preprocessor directives, won&#39;t</span><br><span class="line">know it matches the build dependencies, and will flag this include as</span><br><span class="line">incorrect when the condition is false.</span><br></pre></td></tr></table></figure>

<h4 id="More-information"><a href="#More-information" class="headerlink" title="More information"></a><strong>More information</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The topic &quot;gn help check&quot; has general information on how checking works and</span><br><span class="line">advice on fixing problems. Targets can also opt-out of checking, see</span><br><span class="line">&quot;gn help check_includes&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="Runtime-dependencies"><a href="#Runtime-dependencies" class="headerlink" title="Runtime dependencies"></a><a name="runtime_deps"></a><strong>Runtime dependencies</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Runtime dependencies of a target are exposed via the &quot;runtime_deps&quot; category</span><br><span class="line">of &quot;gn desc&quot; (see &quot;gn help desc&quot;) or they can be written at build generation</span><br><span class="line">time via write_runtime_deps(), or --runtime-deps-list-file (see &quot;gn help</span><br><span class="line">--runtime-deps-list-file&quot;).</span><br><span class="line"></span><br><span class="line">To a first approximation, the runtime dependencies of a target are the set of</span><br><span class="line">&quot;data&quot; files, data directories, and the shared libraries from all transitive</span><br><span class="line">dependencies. Executables, shared libraries, and loadable modules are</span><br><span class="line">considered runtime dependencies of themselves.</span><br></pre></td></tr></table></figure>

<h4 id="Executables"><a href="#Executables" class="headerlink" title="Executables"></a><strong>Executables</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Executable targets and those executable targets&#39; transitive dependencies are</span><br><span class="line">not considered unless that executable is listed in &quot;data_deps&quot;. Otherwise, GN</span><br><span class="line">assumes that the executable (and everything it requires) is a build-time</span><br><span class="line">dependency only.</span><br></pre></td></tr></table></figure>

<h4 id="Actions-and-copies"><a href="#Actions-and-copies" class="headerlink" title="Actions and copies"></a><strong>Actions and copies</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Action and copy targets that are listed as &quot;data_deps&quot; will have all of their</span><br><span class="line">outputs and data files considered as runtime dependencies. Action and copy</span><br><span class="line">targets that are &quot;deps&quot; or &quot;public_deps&quot; will have only their data files</span><br><span class="line">considered as runtime dependencies. These targets can list an output file in</span><br><span class="line">both the &quot;outputs&quot; and &quot;data&quot; lists to force an output file as a runtime</span><br><span class="line">dependency in all cases.</span><br><span class="line"></span><br><span class="line">The different rules for deps and data_deps are to express build-time (deps)</span><br><span class="line">vs. run-time (data_deps) outputs. If GN counted all build-time copy steps as</span><br><span class="line">data dependencies, there would be a lot of extra stuff, and if GN counted all</span><br><span class="line">run-time dependencies as regular deps, the build&#39;s parallelism would be</span><br><span class="line">unnecessarily constrained.</span><br><span class="line"></span><br><span class="line">This rule can sometimes lead to unintuitive results. For example, given the</span><br><span class="line">three targets:</span><br><span class="line">  A  --[data_deps]--&gt;  B  --[deps]--&gt;  ACTION</span><br><span class="line">GN would say that A does not have runtime deps on the result of the ACTION,</span><br><span class="line">which is often correct. But the purpose of the B target might be to collect</span><br><span class="line">many actions into one logic unit, and the &quot;data&quot;-ness of A&#39;s dependency is</span><br><span class="line">lost. Solutions:</span><br><span class="line"></span><br><span class="line"> - List the outputs of the action in its data section (if the results of</span><br><span class="line">   that action are always runtime files).</span><br><span class="line"> - Have B list the action in data_deps (if the outputs of the actions are</span><br><span class="line">   always runtime files).</span><br><span class="line"> - Have B list the action in both deps and data deps (if the outputs might be</span><br><span class="line">   used in both contexts and you don&#39;t care about unnecessary entries in the</span><br><span class="line">   list of files required at runtime).</span><br><span class="line"> - Split B into run-time and build-time versions with the appropriate &quot;deps&quot;</span><br><span class="line">   for each.</span><br></pre></td></tr></table></figure>

<h4 id="Static-libraries-and-source-sets"><a href="#Static-libraries-and-source-sets" class="headerlink" title="Static libraries and source sets"></a><strong>Static libraries and source sets</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The results of static_library or source_set targets are not considered</span><br><span class="line">runtime dependencies since these are assumed to be intermediate targets only.</span><br><span class="line">If you need to list a static library as a runtime dependency, you can</span><br><span class="line">manually compute the .a&#x2F;.lib file name for the current platform and list it</span><br><span class="line">in the &quot;data&quot; list of a target (possibly on the static library target</span><br><span class="line">itself).</span><br></pre></td></tr></table></figure>

<h4 id="Multiple-outputs"><a href="#Multiple-outputs" class="headerlink" title="Multiple outputs"></a><strong>Multiple outputs</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Linker tools can specify which of their outputs should be considered when</span><br><span class="line">computing the runtime deps by setting runtime_outputs. If this is unset on</span><br><span class="line">the tool, the default will be the first output only.</span><br></pre></td></tr></table></figure>
<h3 id="How-Source-Expansion-Works"><a href="#How-Source-Expansion-Works" class="headerlink" title="How Source Expansion Works"></a><a name="source_expansion"></a><strong>How Source Expansion Works</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Source expansion is used for the action_foreach and copy target types to map</span><br><span class="line">source file names to output file names or arguments.</span><br><span class="line"></span><br><span class="line">To perform source expansion in the outputs, GN maps every entry in the</span><br><span class="line">sources to every entry in the outputs list, producing the cross product of</span><br><span class="line">all combinations, expanding placeholders (see below).</span><br><span class="line"></span><br><span class="line">Source expansion in the args works similarly, but performing the placeholder</span><br><span class="line">substitution produces a different set of arguments for each invocation of the</span><br><span class="line">script.</span><br><span class="line"></span><br><span class="line">If no placeholders are found, the outputs or args list will be treated as a</span><br><span class="line">static list of literal file names that do not depend on the sources.</span><br><span class="line"></span><br><span class="line">See &quot;gn help copy&quot; and &quot;gn help action_foreach&quot; for more on how this is</span><br><span class="line">applied.</span><br></pre></td></tr></table></figure>

<h4 id="Placeholders"><a href="#Placeholders" class="headerlink" title="Placeholders"></a><strong>Placeholders</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">This section discusses only placeholders for actions. There are other</span><br><span class="line">placeholders used in the definition of tools. See &quot;gn help tool&quot; for those.</span><br><span class="line"></span><br><span class="line">&#123;&#123;source&#125;&#125;</span><br><span class="line">    The name of the source file including directory (*). This will generally</span><br><span class="line">    be used for specifying inputs to a script in the &quot;args&quot; variable.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;..&#x2F;..&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_file_part&#125;&#125;</span><br><span class="line">    The file part of the source including the extension.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;baz.txt&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_name_part&#125;&#125;</span><br><span class="line">    The filename part of the source file with no directory or extension. This</span><br><span class="line">    will generally be used for specifying a transformation from a source file</span><br><span class="line">    to a destination file with the same name but different extension.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;baz&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_dir&#125;&#125;</span><br><span class="line">    The directory (*) containing the source file with no trailing slash.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;..&#x2F;..&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_root_relative_dir&#125;&#125;</span><br><span class="line">    The path to the source file&#39;s directory relative to the source root, with</span><br><span class="line">    no leading &quot;&#x2F;&#x2F;&quot; or trailing slashes. If the path is system-absolute,</span><br><span class="line">    (beginning in a single slash) this will just return the path with no</span><br><span class="line">    trailing slash. This value will always be the same, regardless of whether</span><br><span class="line">    it appears in the &quot;outputs&quot; or &quot;args&quot; section.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_gen_dir&#125;&#125;</span><br><span class="line">    The generated file directory (*) corresponding to the source file&#39;s path.</span><br><span class="line">    This will be different than the target&#39;s generated file directory if the</span><br><span class="line">    source file is in a different directory than the BUILD.gn file.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;gen&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_out_dir&#125;&#125;</span><br><span class="line">    The object file directory (*) corresponding to the source file&#39;s path,</span><br><span class="line">    relative to the build directory. this us be different than the target&#39;s</span><br><span class="line">    out directory if the source file is in a different directory than the</span><br><span class="line">    build.gn file.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;obj&#x2F;foo&#x2F;bar&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#123;source_target_relative&#125;&#125;</span><br><span class="line">    The path to the source file relative to the target&#39;s directory. This will</span><br><span class="line">    generally be used for replicating the source directory layout in the</span><br><span class="line">    output directory. This can only be used in actions and bundle_data</span><br><span class="line">    targets. It is an error to use in process_file_template where there is no</span><br><span class="line">    &quot;target&quot;.</span><br><span class="line">      &quot;&#x2F;&#x2F;foo&#x2F;bar&#x2F;baz.txt&quot; &#x3D;&gt; &quot;baz.txt&quot;</span><br></pre></td></tr></table></figure>

<h4 id="Note-on-directories"><a href="#Note-on-directories" class="headerlink" title="(*) Note on directories"></a><strong>(*) Note on directories</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Paths containing directories (except the source_root_relative_dir) will be</span><br><span class="line">different depending on what context the expansion is evaluated in. Generally</span><br><span class="line">it should &quot;just work&quot; but it means you can&#39;t concatenate strings containing</span><br><span class="line">these values with reasonable results.</span><br><span class="line"></span><br><span class="line">Details: source expansions can be used in the &quot;outputs&quot; variable, the &quot;args&quot;</span><br><span class="line">variable, and in calls to &quot;process_file_template&quot;. The &quot;args&quot; are passed to a</span><br><span class="line">script which is run from the build directory, so these directories will</span><br><span class="line">relative to the build directory for the script to find. In the other cases,</span><br><span class="line">the directories will be source- absolute (begin with a &quot;&#x2F;&#x2F;&quot;) because the</span><br><span class="line">results of those expansions will be handled by GN internally.</span><br></pre></td></tr></table></figure>

<h4 id="Examples-22"><a href="#Examples-22" class="headerlink" title="Examples"></a><strong>Examples</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Non-varying outputs:</span><br><span class="line">  action(&quot;hardcoded_outputs&quot;) &#123;</span><br><span class="line">    sources &#x3D; [ &quot;input1.idl&quot;, &quot;input2.idl&quot; ]</span><br><span class="line">    outputs &#x3D; [ &quot;$target_out_dir&#x2F;output1.dat&quot;,</span><br><span class="line">                &quot;$target_out_dir&#x2F;output2.dat&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">The outputs in this case will be the two literal files given.</span><br><span class="line"></span><br><span class="line">Varying outputs:</span><br><span class="line">  action_foreach(&quot;varying_outputs&quot;) &#123;</span><br><span class="line">    sources &#x3D; [ &quot;input1.idl&quot;, &quot;input2.idl&quot; ]</span><br><span class="line">    outputs &#x3D; [ &quot;&#123;&#123;source_gen_dir&#125;&#125;&#x2F;&#123;&#123;source_name_part&#125;&#125;.h&quot;,</span><br><span class="line">                &quot;&#123;&#123;source_gen_dir&#125;&#125;&#x2F;&#123;&#123;source_name_part&#125;&#125;.cc&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">Performing source expansion will result in the following output names:</span><br><span class="line">  &#x2F;&#x2F;out&#x2F;Debug&#x2F;obj&#x2F;mydirectory&#x2F;input1.h</span><br><span class="line">  &#x2F;&#x2F;out&#x2F;Debug&#x2F;obj&#x2F;mydirectory&#x2F;input1.cc</span><br><span class="line">  &#x2F;&#x2F;out&#x2F;Debug&#x2F;obj&#x2F;mydirectory&#x2F;input2.h</span><br><span class="line">  &#x2F;&#x2F;out&#x2F;Debug&#x2F;obj&#x2F;mydirectory&#x2F;input2.cc</span><br></pre></td></tr></table></figure>
<h3 id="Available-global-switches"><a href="#Available-global-switches" class="headerlink" title="Available global switches"></a><a name="switch_list"></a><strong>Available global switches</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Do &quot;gn help --the_switch_you_want_help_on&quot; for more. Individual commands may</span><br><span class="line">take command-specific switches not listed here. See the help on your specific</span><br><span class="line">command for more.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">*   --args: Specifies build arguments overrides.</span><br><span class="line">*   --color: Force colored output.</span><br><span class="line">*   --dotfile: Override the name of the &quot;.gn&quot; file.</span><br><span class="line">*   --fail-on-unused-args: Treat unused build args as fatal errors.</span><br><span class="line">*   --markdown: Write help output in the Markdown format.</span><br><span class="line">*   --ninja-executable: Set the Ninja executable.</span><br><span class="line">*   --nocolor: Force non-colored output.</span><br><span class="line">*   -q: Quiet mode. Don&#39;t print output on success.</span><br><span class="line">*   --root: Explicitly specify source root.</span><br><span class="line">*   --root-target: Override the root target.</span><br><span class="line">*   --runtime-deps-list-file: Save runtime dependencies for targets in file.</span><br><span class="line">*   --script-executable: Set the executable used to execute scripts.</span><br><span class="line">*   --threads: Specify number of worker threads.</span><br><span class="line">*   --time: Outputs a summary of how long everything took.</span><br><span class="line">*   --tracelog: Writes a Chrome-compatible trace log to the given file.</span><br><span class="line">*   -v: Verbose logging.</span><br><span class="line">*   --version: Prints the GN version number and exits.</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/gn/" rel="tag"># gn</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2021/07/04/%E6%8A%80%E6%9C%AF/linux/Linux%20%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4%20tar%20%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/" rel="next" title="tar简明教程">
                  <i class="fa fa-chevron-left"></i> tar简明教程
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2021/07/04/%E6%8A%80%E6%9C%AF/%E5%B7%A5%E5%85%B7/Google%20gn%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/" rel="prev" title="Google gn简明教程">
                  Google gn简明教程 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments" id="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC80NzUwNi8yNDAwNg=="></div>
  </div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Contents"><span class="nav-number">1.</span> <span class="nav-text">Contents</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Commands"><span class="nav-number">2.</span> <span class="nav-text">Commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-analyze-lt-out-dir-gt-lt-input-path-gt-lt-output-path-gt"><span class="nav-number">2.1.</span> <span class="nav-text">gn analyze &lt;out_dir&gt; &lt;input_path&gt; &lt;output_path&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-args-command-line-tool"><span class="nav-number">2.2.</span> <span class="nav-text">gn args: (command-line tool)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Usage"><span class="nav-number">2.2.1.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples"><span class="nav-number">2.2.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-check-lt-out-dir-gt-lt-label-pattern-gt-force-check-generated"><span class="nav-number">2.3.</span> <span class="nav-text">gn check &lt;out_dir&gt; [&lt;label_pattern&gt;] [--force] [--check-generated]</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Command-specific-switches"><span class="nav-number">2.3.1.</span> <span class="nav-text">Command-specific switches</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#What-gets-checked"><span class="nav-number">2.3.2.</span> <span class="nav-text">What gets checked</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Advice-on-fixing-problems"><span class="nav-number">2.3.3.</span> <span class="nav-text">Advice on fixing problems</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-1"><span class="nav-number">2.3.4.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-clean-lt-out-dir-gt-…"><span class="nav-number">2.4.</span> <span class="nav-text">gn clean &lt;out_dir&gt;…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-clean-stale-ninja-executable-…-lt-out-dir-gt-…"><span class="nav-number">2.5.</span> <span class="nav-text">gn clean_stale [--ninja-executable&#x3D;…] &lt;out_dir&gt;…</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Options"><span class="nav-number">2.5.1.</span> <span class="nav-text">Options</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-desc"><span class="nav-number">2.6.</span> <span class="nav-text">gn desc</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Possibilities-for-lt-what-to-show-gt"><span class="nav-number">2.6.1.</span> <span class="nav-text">Possibilities for &lt;what to show&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shared-flags"><span class="nav-number">2.6.2.</span> <span class="nav-text">Shared flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Target-flags"><span class="nav-number">2.6.3.</span> <span class="nav-text">Target flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Configs"><span class="nav-number">2.6.4.</span> <span class="nav-text">Configs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Printing-outputs"><span class="nav-number">2.6.5.</span> <span class="nav-text">Printing outputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Printing-deps"><span class="nav-number">2.6.6.</span> <span class="nav-text">Printing deps</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Note"><span class="nav-number">2.6.7.</span> <span class="nav-text">Note</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-2"><span class="nav-number">2.6.8.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-format-dump-tree-stdin-lt-list-of-build-files…-gt"><span class="nav-number">2.7.</span> <span class="nav-text">gn format [--dump-tree] (--stdin | &lt;list of build_files…&gt;)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments"><span class="nav-number">2.7.1.</span> <span class="nav-text">Arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-3"><span class="nav-number">2.7.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-gen-check-lt-ide-options-gt-lt-out-dir-gt"><span class="nav-number">2.8.</span> <span class="nav-text">gn gen [--check] [&lt;ide options&gt;] &lt;out_dir&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#General-options"><span class="nav-number">2.8.1.</span> <span class="nav-text">General options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IDE-options"><span class="nav-number">2.8.2.</span> <span class="nav-text">IDE options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Visual-Studio-Flags"><span class="nav-number">2.8.3.</span> <span class="nav-text">Visual Studio Flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Xcode-Flags"><span class="nav-number">2.8.4.</span> <span class="nav-text">Xcode Flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#QtCreator-Flags"><span class="nav-number">2.8.5.</span> <span class="nav-text">QtCreator Flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Eclipse-IDE-Support"><span class="nav-number">2.8.6.</span> <span class="nav-text">Eclipse IDE Support</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Generic-JSON-Output"><span class="nav-number">2.8.7.</span> <span class="nav-text">Generic JSON Output</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Compilation-Database"><span class="nav-number">2.8.8.</span> <span class="nav-text">Compilation Database</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-help-lt-anything-gt"><span class="nav-number">2.9.</span> <span class="nav-text">gn help &lt;anything&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Switches"><span class="nav-number">2.9.1.</span> <span class="nav-text">Switches</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example"><span class="nav-number">2.9.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-ls-lt-out-dir-gt-lt-label-pattern-gt-default-toolchain-as-…"><span class="nav-number">2.10.</span> <span class="nav-text">gn ls &lt;out_dir&gt; [&lt;label_pattern&gt;] [--default-toolchain] [--as&#x3D;…]</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-1"><span class="nav-number">2.10.1.</span> <span class="nav-text">Options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-4"><span class="nav-number">2.10.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-meta"><span class="nav-number">2.11.</span> <span class="nav-text">gn meta</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-1"><span class="nav-number">2.11.1.</span> <span class="nav-text">Arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-5"><span class="nav-number">2.11.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-outputs-lt-out-dir-gt-lt-list-of-target-or-file-names…-gt"><span class="nav-number">2.12.</span> <span class="nav-text">gn outputs &lt;out_dir&gt; &lt;list of target or file names…&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Target-outputs"><span class="nav-number">2.12.1.</span> <span class="nav-text">Target outputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#File-outputs"><span class="nav-number">2.12.2.</span> <span class="nav-text">File outputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-1"><span class="nav-number">2.12.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-path-lt-out-dir-gt-lt-target-one-gt-lt-target-two-gt"><span class="nav-number">2.13.</span> <span class="nav-text">gn path &lt;out_dir&gt; &lt;target_one&gt; &lt;target_two&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interesting-paths"><span class="nav-number">2.13.1.</span> <span class="nav-text">Interesting paths</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-2"><span class="nav-number">2.13.2.</span> <span class="nav-text">Options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-2"><span class="nav-number">2.13.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-refs"><span class="nav-number">2.14.</span> <span class="nav-text">gn refs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Options-3"><span class="nav-number">2.14.1.</span> <span class="nav-text">Options</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-target-input"><span class="nav-number">2.14.2.</span> <span class="nav-text">Examples (target input)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-file-input"><span class="nav-number">2.14.3.</span> <span class="nav-text">Examples (file input)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Target-declarations"><span class="nav-number">3.</span> <span class="nav-text">Target declarations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#action-Declare-a-target-that-runs-a-script-a-single-time"><span class="nav-number">3.1.</span> <span class="nav-text">action: Declare a target that runs a script a single time.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Inputs"><span class="nav-number">3.1.1.</span> <span class="nav-text">Inputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Outputs"><span class="nav-number">3.1.2.</span> <span class="nav-text">Outputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#File-name-handling"><span class="nav-number">3.1.3.</span> <span class="nav-text">File name handling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables"><span class="nav-number">3.1.4.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-3"><span class="nav-number">3.1.5.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#action-foreach-Declare-a-target-that-runs-a-script-over-a-set-of-files"><span class="nav-number">3.2.</span> <span class="nav-text">action_foreach: Declare a target that runs a script over a set of files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Inputs-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">Inputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Outputs-1"><span class="nav-number">3.2.2.</span> <span class="nav-text">Outputs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#File-name-handling-1"><span class="nav-number">3.2.3.</span> <span class="nav-text">File name handling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-1"><span class="nav-number">3.2.4.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-4"><span class="nav-number">3.2.5.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-data-iOS-macOS-Declare-a-target-without-output"><span class="nav-number">3.3.</span> <span class="nav-text">bundle_data: [iOS&#x2F;macOS] Declare a target without output.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-2"><span class="nav-number">3.3.1.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-6"><span class="nav-number">3.3.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#copy-Declare-a-target-that-copies-files"><span class="nav-number">3.4.</span> <span class="nav-text">copy: Declare a target that copies files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#File-name-handling-2"><span class="nav-number">3.4.1.</span> <span class="nav-text">File name handling</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-7"><span class="nav-number">3.4.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#create-bundle-ios-macOS-Build-an-iOS-or-macOS-bundle"><span class="nav-number">3.5.</span> <span class="nav-text">create_bundle: [ios&#x2F;macOS] Build an iOS or macOS bundle.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Code-signing"><span class="nav-number">3.5.1.</span> <span class="nav-text">Code signing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-3"><span class="nav-number">3.5.2.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-5"><span class="nav-number">3.5.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#executable-Declare-an-executable-target"><span class="nav-number">3.6.</span> <span class="nav-text">executable: Declare an executable target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Language-and-compilation"><span class="nav-number">3.6.1.</span> <span class="nav-text">Language and compilation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-4"><span class="nav-number">3.6.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#generated-file-Declare-a-generated-file-target"><span class="nav-number">3.7.</span> <span class="nav-text">generated_file: Declare a generated_file target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-metadata-collection"><span class="nav-number">3.7.1.</span> <span class="nav-text">Example (metadata collection)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-5"><span class="nav-number">3.7.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#group-Declare-a-named-group-of-targets"><span class="nav-number">3.8.</span> <span class="nav-text">group: Declare a named group of targets.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-6"><span class="nav-number">3.8.1.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-6"><span class="nav-number">3.8.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loadable-module-Declare-a-loadable-module-target"><span class="nav-number">3.9.</span> <span class="nav-text">loadable_module: Declare a loadable module target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Language-and-compilation-1"><span class="nav-number">3.9.1.</span> <span class="nav-text">Language and compilation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-7"><span class="nav-number">3.9.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rust-library-Declare-a-Rust-library-target"><span class="nav-number">3.10.</span> <span class="nav-text">rust_library: Declare a Rust library target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Language-and-compilation-2"><span class="nav-number">3.10.1.</span> <span class="nav-text">Language and compilation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-8"><span class="nav-number">3.10.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rust-proc-macro-Declare-a-Rust-procedural-macro-target"><span class="nav-number">3.11.</span> <span class="nav-text">rust_proc_macro: Declare a Rust procedural macro target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Language-and-compilation-3"><span class="nav-number">3.11.1.</span> <span class="nav-text">Language and compilation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-9"><span class="nav-number">3.11.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shared-library-Declare-a-shared-library-target"><span class="nav-number">3.12.</span> <span class="nav-text">shared_library: Declare a shared library target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Language-and-compilation-4"><span class="nav-number">3.12.1.</span> <span class="nav-text">Language and compilation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-10"><span class="nav-number">3.12.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#source-set-Declare-a-source-set-target"><span class="nav-number">3.13.</span> <span class="nav-text">source_set: Declare a source set target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#C-language-source-sets"><span class="nav-number">3.13.1.</span> <span class="nav-text">C-language source_sets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-11"><span class="nav-number">3.13.2.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#static-library-Declare-a-static-library-target"><span class="nav-number">3.14.</span> <span class="nav-text">static_library: Declare a static library target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-12"><span class="nav-number">3.14.1.</span> <span class="nav-text">Variables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-Declare-an-target-with-the-given-programmatic-type"><span class="nav-number">3.15.</span> <span class="nav-text">target: Declare an target with the given programmatic type.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-7"><span class="nav-number">3.15.1.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Buildfile-functions"><span class="nav-number">4.</span> <span class="nav-text">Buildfile functions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#assert-Assert-an-expression-is-true-at-generation-time"><span class="nav-number">4.1.</span> <span class="nav-text">assert: Assert an expression is true at generation time.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-8"><span class="nav-number">4.1.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#config-Defines-a-configuration-object"><span class="nav-number">4.2.</span> <span class="nav-text">config: Defines a configuration object.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#More-background"><span class="nav-number">4.2.1.</span> <span class="nav-text">More background</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-valid-in-a-config-definition"><span class="nav-number">4.2.2.</span> <span class="nav-text">Variables valid in a config definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-on-a-target-used-to-apply-configs"><span class="nav-number">4.2.3.</span> <span class="nav-text">Variables on a target used to apply configs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-8"><span class="nav-number">4.2.4.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#declare-args-Declare-build-arguments"><span class="nav-number">4.3.</span> <span class="nav-text">declare_args: Declare build arguments.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-9"><span class="nav-number">4.3.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defined-Returns-whether-an-identifier-is-defined"><span class="nav-number">4.4.</span> <span class="nav-text">defined: Returns whether an identifier is defined.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-10"><span class="nav-number">4.4.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exec-script-Synchronously-run-a-script-and-return-the-output"><span class="nav-number">4.5.</span> <span class="nav-text">exec_script: Synchronously run a script and return the output.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-2"><span class="nav-number">4.5.1.</span> <span class="nav-text">Arguments:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-11"><span class="nav-number">4.5.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#filter-exclude-Remove-values-that-match-a-set-of-patterns"><span class="nav-number">4.6.</span> <span class="nav-text">filter_exclude: Remove values that match a set of patterns.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-9"><span class="nav-number">4.6.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#filter-include-Remove-values-that-do-not-match-a-set-of-patterns"><span class="nav-number">4.7.</span> <span class="nav-text">filter_include: Remove values that do not match a set of patterns.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-10"><span class="nav-number">4.7.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#foreach-Iterate-over-a-list"><span class="nav-number">4.8.</span> <span class="nav-text">foreach: Iterate over a list.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-12"><span class="nav-number">4.8.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forward-variables-from-Copies-variables-from-a-different-scope"><span class="nav-number">4.9.</span> <span class="nav-text">forward_variables_from: Copies variables from a different scope.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-11"><span class="nav-number">4.9.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get-label-info-Get-an-attribute-from-a-target’s-label"><span class="nav-number">4.10.</span> <span class="nav-text">get_label_info: Get an attribute from a target’s label.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Possible-values-for-the-“what”-parameter"><span class="nav-number">4.10.1.</span> <span class="nav-text">Possible values for the “what” parameter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-12"><span class="nav-number">4.10.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get-path-info-Extract-parts-of-a-file-or-directory-name"><span class="nav-number">4.11.</span> <span class="nav-text">get_path_info: Extract parts of a file or directory name.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Possible-values-for-the-“what”-parameter-1"><span class="nav-number">4.11.1.</span> <span class="nav-text">Possible values for the “what” parameter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-13"><span class="nav-number">4.11.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get-target-outputs-file-list-Get-the-list-of-outputs-from-a-target"><span class="nav-number">4.12.</span> <span class="nav-text">get_target_outputs: [file list] Get the list of outputs from a target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Return-value"><span class="nav-number">4.12.1.</span> <span class="nav-text">Return value</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-13"><span class="nav-number">4.12.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getenv-Get-an-environment-variable"><span class="nav-number">4.13.</span> <span class="nav-text">getenv: Get an environment variable.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-14"><span class="nav-number">4.13.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#import-Import-a-file-into-the-current-scope"><span class="nav-number">4.14.</span> <span class="nav-text">import: Import a file into the current scope.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-14"><span class="nav-number">4.14.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#not-needed-Mark-variables-from-scope-as-not-needed"><span class="nav-number">4.15.</span> <span class="nav-text">not_needed: Mark variables from scope as not needed.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-15"><span class="nav-number">4.15.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pool-Defines-a-pool-object"><span class="nav-number">4.16.</span> <span class="nav-text">pool: Defines a pool object.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-13"><span class="nav-number">4.16.1.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-16"><span class="nav-number">4.16.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#print-Prints-to-the-console"><span class="nav-number">4.17.</span> <span class="nav-text">print: Prints to the console.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-15"><span class="nav-number">4.17.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#process-file-template-Do-template-expansion-over-a-list-of-files"><span class="nav-number">4.18.</span> <span class="nav-text">process_file_template: Do template expansion over a list of files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-3"><span class="nav-number">4.18.1.</span> <span class="nav-text">Arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-17"><span class="nav-number">4.18.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-file-Read-a-file-into-a-variable"><span class="nav-number">4.19.</span> <span class="nav-text">read_file: Read a file into a variable.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-4"><span class="nav-number">4.19.1.</span> <span class="nav-text">Arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-18"><span class="nav-number">4.19.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rebase-path-Rebase-a-file-or-directory-to-another-location"><span class="nav-number">4.20.</span> <span class="nav-text">rebase_path: Rebase a file or directory to another location.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-5"><span class="nav-number">4.20.1.</span> <span class="nav-text">Arguments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Return-value-1"><span class="nav-number">4.20.2.</span> <span class="nav-text">Return value</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-19"><span class="nav-number">4.20.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-default-toolchain-Sets-the-default-toolchain-name"><span class="nav-number">4.21.</span> <span class="nav-text">set_default_toolchain: Sets the default toolchain name.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Argument"><span class="nav-number">4.21.1.</span> <span class="nav-text">Argument</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-20"><span class="nav-number">4.21.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-defaults-Set-default-values-for-a-target-type"><span class="nav-number">4.22.</span> <span class="nav-text">set_defaults: Set default values for a target type.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-21"><span class="nav-number">4.22.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#split-list-Splits-a-list-into-N-different-sub-lists"><span class="nav-number">4.23.</span> <span class="nav-text">split_list: Splits a list into N different sub-lists.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-22"><span class="nav-number">4.23.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-join-Concatenates-a-list-of-strings-with-a-separator"><span class="nav-number">4.24.</span> <span class="nav-text">string_join: Concatenates a list of strings with a separator.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-16"><span class="nav-number">4.24.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-replace-Replaces-substring-in-the-given-string"><span class="nav-number">4.25.</span> <span class="nav-text">string_replace: Replaces substring in the given string.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-23"><span class="nav-number">4.25.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#string-split-Split-string-into-a-list-of-strings"><span class="nav-number">4.26.</span> <span class="nav-text">string_split: Split string into a list of strings.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-without-a-separator-split-on-whitespace"><span class="nav-number">4.26.1.</span> <span class="nav-text">Examples without a separator (split on whitespace):</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-with-a-separator-split-on-separators"><span class="nav-number">4.26.2.</span> <span class="nav-text">Examples with a separator (split on separators):</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#template-Define-a-template-rule"><span class="nav-number">4.27.</span> <span class="nav-text">template: Define a template rule.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-and-templates"><span class="nav-number">4.27.1.</span> <span class="nav-text">Variables and templates:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Target-naming"><span class="nav-number">4.27.2.</span> <span class="nav-text">Target naming</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Overriding-builtin-targets"><span class="nav-number">4.27.3.</span> <span class="nav-text">Overriding builtin targets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-of-defining-a-template"><span class="nav-number">4.27.4.</span> <span class="nav-text">Example of defining a template</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-of-invoking-the-resulting-template"><span class="nav-number">4.27.5.</span> <span class="nav-text">Example of invoking the resulting template</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tool-Specify-arguments-to-a-toolchain-tool"><span class="nav-number">4.28.</span> <span class="nav-text">tool: Specify arguments to a toolchain tool.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Usage-1"><span class="nav-number">4.28.1.</span> <span class="nav-text">Usage</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Tool-types"><span class="nav-number">4.28.2.</span> <span class="nav-text">Tool types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Tool-variables"><span class="nav-number">4.28.3.</span> <span class="nav-text">Tool variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Expansions-for-tool-variables"><span class="nav-number">4.28.4.</span> <span class="nav-text">Expansions for tool variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Separate-linking-and-dependencies-for-shared-libraries"><span class="nav-number">4.28.5.</span> <span class="nav-text">Separate linking and dependencies for shared libraries</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-24"><span class="nav-number">4.28.6.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toolchain-Defines-a-toolchain"><span class="nav-number">4.29.</span> <span class="nav-text">toolchain: Defines a toolchain.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Toolchain-overview"><span class="nav-number">4.29.1.</span> <span class="nav-text">Toolchain overview</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Functions-and-variables"><span class="nav-number">4.29.2.</span> <span class="nav-text">Functions and variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-of-defining-a-toolchain"><span class="nav-number">4.29.3.</span> <span class="nav-text">Example of defining a toolchain</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-of-cross-toolchain-dependencies"><span class="nav-number">4.29.4.</span> <span class="nav-text">Example of cross-toolchain dependencies</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-file-Write-a-file-to-disk"><span class="nav-number">4.30.</span> <span class="nav-text">write_file: Write a file to disk.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Arguments-6"><span class="nav-number">4.30.1.</span> <span class="nav-text">Arguments</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Built-in-predefined-variables"><span class="nav-number">5.</span> <span class="nav-text">Built-in predefined variables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#current-cpu-The-processor-architecture-of-the-current-toolchain"><span class="nav-number">5.1.</span> <span class="nav-text">current_cpu: The processor architecture of the current toolchain.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#current-os-The-operating-system-of-the-current-toolchain"><span class="nav-number">5.2.</span> <span class="nav-text">current_os: The operating system of the current toolchain.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#current-toolchain-Label-of-the-current-toolchain"><span class="nav-number">5.3.</span> <span class="nav-text">current_toolchain: Label of the current toolchain.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-25"><span class="nav-number">5.3.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#default-toolchain-string-Label-of-the-default-toolchain"><span class="nav-number">5.4.</span> <span class="nav-text">default_toolchain: [string] Label of the default toolchain.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-version-number-The-version-of-gn"><span class="nav-number">5.5.</span> <span class="nav-text">gn_version: [number] The version of gn.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-26"><span class="nav-number">5.5.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#host-cpu-The-processor-architecture-that-GN-is-running-on"><span class="nav-number">5.6.</span> <span class="nav-text">host_cpu: The processor architecture that GN is running on.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Some-possible-values"><span class="nav-number">5.6.1.</span> <span class="nav-text">Some possible values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#host-os-string-The-operating-system-that-GN-is-running-on"><span class="nav-number">5.7.</span> <span class="nav-text">host_os: [string] The operating system that GN is running on.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Some-possible-values-1"><span class="nav-number">5.7.1.</span> <span class="nav-text">Some possible values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#invoker-string-The-invoking-scope-inside-a-template"><span class="nav-number">5.8.</span> <span class="nav-text">invoker: [string] The invoking scope inside a template.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-27"><span class="nav-number">5.8.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python-path-Absolute-path-of-Python"><span class="nav-number">5.9.</span> <span class="nav-text">python_path: Absolute path of Python.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#root-build-dir-string-Directory-where-build-commands-are-run"><span class="nav-number">5.10.</span> <span class="nav-text">root_build_dir: [string] Directory where build commands are run.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#root-gen-dir-Directory-for-the-toolchain’s-generated-files"><span class="nav-number">5.11.</span> <span class="nav-text">root_gen_dir: Directory for the toolchain’s generated files.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#root-out-dir-string-Root-directory-for-toolchain-output-files"><span class="nav-number">5.12.</span> <span class="nav-text">root_out_dir: [string] Root directory for toolchain output files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-28"><span class="nav-number">5.12.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-cpu-The-desired-cpu-architecture-for-the-build"><span class="nav-number">5.13.</span> <span class="nav-text">target_cpu: The desired cpu architecture for the build.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Possible-values"><span class="nav-number">5.13.1.</span> <span class="nav-text">Possible values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-gen-dir-Directory-for-a-target’s-generated-files"><span class="nav-number">5.14.</span> <span class="nav-text">target_gen_dir: Directory for a target’s generated files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-29"><span class="nav-number">5.14.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-name-string-The-name-of-the-current-target"><span class="nav-number">5.15.</span> <span class="nav-text">target_name: [string] The name of the current target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-30"><span class="nav-number">5.15.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-os-The-desired-operating-system-for-the-build"><span class="nav-number">5.16.</span> <span class="nav-text">target_os: The desired operating system for the build.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Possible-values-1"><span class="nav-number">5.16.1.</span> <span class="nav-text">Possible values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#target-out-dir-string-Directory-for-target-output-files"><span class="nav-number">5.17.</span> <span class="nav-text">target_out_dir: [string] Directory for target output files.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-31"><span class="nav-number">5.17.1.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Variables-you-set-in-targets"><span class="nav-number">6.</span> <span class="nav-text">Variables you set in targets</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#aliased-deps-scope-Set-of-crate-dependency-pairs"><span class="nav-number">6.1.</span> <span class="nav-text">aliased_deps: [scope] Set of crate-dependency pairs.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#all-dependent-configs-Configs-to-be-forced-on-dependents"><span class="nav-number">6.2.</span> <span class="nav-text">all_dependent_configs: Configs to be forced on dependents.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values"><span class="nav-number">6.2.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#allow-circular-includes-from-Permit-includes-from-deps"><span class="nav-number">6.3.</span> <span class="nav-text">allow_circular_includes_from: Permit includes from deps.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Details"><span class="nav-number">6.3.1.</span> <span class="nav-text">Details</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Danger"><span class="nav-number">6.3.2.</span> <span class="nav-text">Danger</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-32"><span class="nav-number">6.3.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arflags-Arguments-passed-to-static-library-archiver"><span class="nav-number">6.4.</span> <span class="nav-text">arflags: Arguments passed to static_library archiver.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-1"><span class="nav-number">6.4.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#args-target-variable-Arguments-passed-to-an-action"><span class="nav-number">6.5.</span> <span class="nav-text">args: (target variable) Arguments passed to an action.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#asmflags-Flags-passed-to-the-assembler"><span class="nav-number">6.6.</span> <span class="nav-text">asmflags: Flags passed to the assembler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-2"><span class="nav-number">6.6.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#assert-no-deps-Ensure-no-deps-on-these-targets"><span class="nav-number">6.7.</span> <span class="nav-text">assert_no_deps: Ensure no deps on these targets.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-33"><span class="nav-number">6.7.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bridge-header-string-Path-to-C-Objective-C-compatibility-header"><span class="nav-number">6.8.</span> <span class="nav-text">bridge_header: [string] Path to C&#x2F;Objective-C compatibility header.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-contents-dir-Expansion-of-in"><span class="nav-number">6.9.</span> <span class="nav-text">bundle_contents_dir: Expansion of  in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-deps-filter-label-list-A-list-of-labels-that-are-filtered-out"><span class="nav-number">6.10.</span> <span class="nav-text">bundle_deps_filter: [label list] A list of labels that are filtered out.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-34"><span class="nav-number">6.10.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-executable-dir"><span class="nav-number">6.11.</span> <span class="nav-text">bundle_executable_dir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-resources-dir"><span class="nav-number">6.12.</span> <span class="nav-text">bundle_resources_dir</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bundle-root-dir-Expansion-of-in-create-bundle"><span class="nav-number">6.13.</span> <span class="nav-text">bundle_root_dir: Expansion of  in create_bundle.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-35"><span class="nav-number">6.13.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cflags-Flags-passed-to-the-C-compiler"><span class="nav-number">6.14.</span> <span class="nav-text">cflags*: Flags passed to the C compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-3"><span class="nav-number">6.14.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cflags-Flags-passed-to-the-C-compiler-1"><span class="nav-number">6.15.</span> <span class="nav-text">cflags*: Flags passed to the C compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-4"><span class="nav-number">6.15.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cflags-Flags-passed-to-the-C-compiler-2"><span class="nav-number">6.16.</span> <span class="nav-text">cflags*: Flags passed to the C compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-5"><span class="nav-number">6.16.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cflags-Flags-passed-to-the-C-compiler-3"><span class="nav-number">6.17.</span> <span class="nav-text">cflags*: Flags passed to the C compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-6"><span class="nav-number">6.17.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cflags-Flags-passed-to-the-C-compiler-4"><span class="nav-number">6.18.</span> <span class="nav-text">cflags*: Flags passed to the C compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-7"><span class="nav-number">6.18.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#check-includes-boolean-Controls-whether-a-target’s-files-are-checked"><span class="nav-number">6.19.</span> <span class="nav-text">check_includes: [boolean] Controls whether a target’s files are checked.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-36"><span class="nav-number">6.19.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#code-signing-args-string-list-Arguments-passed-to-code-signing-script"><span class="nav-number">6.20.</span> <span class="nav-text">code_signing_args: [string list] Arguments passed to code signing script.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#code-signing-outputs-file-list-Output-files-for-code-signing-step"><span class="nav-number">6.21.</span> <span class="nav-text">code_signing_outputs: [file list] Output files for code signing step.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#code-signing-script-file-name-Script-for-code-signing-”"><span class="nav-number">6.22.</span> <span class="nav-text">code_signing_script: [file name] Script for code signing.”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#code-signing-sources-file-list-Sources-for-code-signing-step"><span class="nav-number">6.23.</span> <span class="nav-text">code_signing_sources: [file list] Sources for code signing step.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#complete-static-lib-boolean-Links-all-deps-into-a-static-library"><span class="nav-number">6.24.</span> <span class="nav-text">complete_static_lib: [boolean] Links all deps into a static library.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-37"><span class="nav-number">6.24.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#configs-Configs-applying-to-this-target-or-config"><span class="nav-number">6.25.</span> <span class="nav-text">configs: Configs applying to this target or config.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Configs-on-a-target"><span class="nav-number">6.25.1.</span> <span class="nav-text">Configs on a target</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Configs-on-a-config"><span class="nav-number">6.25.2.</span> <span class="nav-text">Configs on a config</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-8"><span class="nav-number">6.25.3.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-38"><span class="nav-number">6.25.4.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#contents-Contents-to-write-to-file"><span class="nav-number">6.26.</span> <span class="nav-text">contents: Contents to write to file.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crate-name-string-The-name-for-the-compiled-crate"><span class="nav-number">6.27.</span> <span class="nav-text">crate_name: [string] The name for the compiled crate.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crate-root-string-The-root-source-file-for-a-binary-or-library"><span class="nav-number">6.28.</span> <span class="nav-text">crate_root: [string] The root source file for a binary or library.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#crate-type-string-The-type-of-linkage-to-use-on-a-shared-library"><span class="nav-number">6.29.</span> <span class="nav-text">crate_type: [string] The type of linkage to use on a shared_library.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#data-Runtime-data-file-dependencies"><span class="nav-number">6.30.</span> <span class="nav-text">data: Runtime data file dependencies.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#data-deps-Non-linked-dependencies"><span class="nav-number">6.31.</span> <span class="nav-text">data_deps: Non-linked dependencies.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-39"><span class="nav-number">6.31.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#data-keys-Keys-from-which-to-collect-metadata"><span class="nav-number">6.32.</span> <span class="nav-text">data_keys: Keys from which to collect metadata.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defines-C-preprocessor-defines"><span class="nav-number">6.33.</span> <span class="nav-text">defines: C preprocessor defines.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-9"><span class="nav-number">6.33.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-40"><span class="nav-number">6.33.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#depfile-string-File-name-for-input-dependencies-for-actions"><span class="nav-number">6.34.</span> <span class="nav-text">depfile: [string] File name for input dependencies for actions.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-41"><span class="nav-number">6.34.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#deps-Private-linked-dependencies"><span class="nav-number">6.35.</span> <span class="nav-text">deps: Private linked dependencies.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Details-of-dependency-propagation"><span class="nav-number">6.35.1.</span> <span class="nav-text">Details of dependency propagation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#externs-scope-Set-of-Rust-crate-dependency-pairs"><span class="nav-number">6.36.</span> <span class="nav-text">externs: [scope] Set of Rust crate-dependency pairs.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-17"><span class="nav-number">6.36.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#framework-dirs-directory-list-Additional-framework-search-directories"><span class="nav-number">6.37.</span> <span class="nav-text">framework_dirs: [directory list] Additional framework search directories.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-10"><span class="nav-number">6.37.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-42"><span class="nav-number">6.37.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#frameworks-name-list-Name-of-frameworks-that-must-be-linked"><span class="nav-number">6.38.</span> <span class="nav-text">frameworks: [name list] Name of frameworks that must be linked.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-11"><span class="nav-number">6.38.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-43"><span class="nav-number">6.38.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#friend-Allow-targets-to-include-private-headers"><span class="nav-number">6.39.</span> <span class="nav-text">friend: Allow targets to include private headers.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-44"><span class="nav-number">6.39.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#include-dirs-Additional-include-directories"><span class="nav-number">6.40.</span> <span class="nav-text">include_dirs: Additional include directories.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-12"><span class="nav-number">6.40.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-45"><span class="nav-number">6.40.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#inputs-Additional-compile-time-dependencies"><span class="nav-number">6.41.</span> <span class="nav-text">inputs: Additional compile-time dependencies.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Inputs-for-actions"><span class="nav-number">6.41.1.</span> <span class="nav-text">Inputs for actions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Script-input-gotchas"><span class="nav-number">6.41.2.</span> <span class="nav-text">Script input gotchas</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Inputs-for-binary-targets"><span class="nav-number">6.41.3.</span> <span class="nav-text">Inputs for binary targets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-46"><span class="nav-number">6.41.4.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ldflags-Flags-passed-to-the-linker"><span class="nav-number">6.42.</span> <span class="nav-text">ldflags: Flags passed to the linker.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-13"><span class="nav-number">6.42.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lib-dirs-Additional-library-directories"><span class="nav-number">6.43.</span> <span class="nav-text">lib_dirs: Additional library directories.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-14"><span class="nav-number">6.43.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-47"><span class="nav-number">6.43.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#libs-Additional-libraries-to-link"><span class="nav-number">6.44.</span> <span class="nav-text">libs: Additional libraries to link.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Types-of-libs"><span class="nav-number">6.44.1.</span> <span class="nav-text">Types of libs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-15"><span class="nav-number">6.44.2.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-18"><span class="nav-number">6.44.3.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#metadata-Metadata-of-this-target"><span class="nav-number">6.45.</span> <span class="nav-text">metadata: Metadata of this target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-48"><span class="nav-number">6.45.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#module-name-string-The-name-for-the-compiled-module"><span class="nav-number">6.46.</span> <span class="nav-text">module_name: [string] The name for the compiled module.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#output-conversion-Data-format-for-generated-file-targets"><span class="nav-number">6.47.</span> <span class="nav-text">output_conversion: Data format for generated_file targets.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#output-dir-directory-Directory-to-put-output-file-in"><span class="nav-number">6.48.</span> <span class="nav-text">output_dir: [directory] Directory to put output file in.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-49"><span class="nav-number">6.48.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#output-extension-Value-to-use-for-the-output’s-file-extension"><span class="nav-number">6.49.</span> <span class="nav-text">output_extension: Value to use for the output’s file extension.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-50"><span class="nav-number">6.49.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#output-name-Define-a-name-for-the-output-file-other-than-the-default"><span class="nav-number">6.50.</span> <span class="nav-text">output_name: Define a name for the output file other than the default.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-51"><span class="nav-number">6.50.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#output-prefix-override-Don’t-use-prefix-for-output-name"><span class="nav-number">6.51.</span> <span class="nav-text">output_prefix_override: Don’t use prefix for output name.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-52"><span class="nav-number">6.51.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#outputs-Output-files-for-actions-and-copy-targets"><span class="nav-number">6.52.</span> <span class="nav-text">outputs: Output files for actions and copy targets.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#partial-info-plist-filename-Path-plist-from-asset-catalog-compiler"><span class="nav-number">6.53.</span> <span class="nav-text">partial_info_plist: [filename] Path plist from asset catalog compiler.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pool-Label-of-the-pool-used-by-the-action"><span class="nav-number">6.54.</span> <span class="nav-text">pool: Label of the pool used by the action.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-53"><span class="nav-number">6.54.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#precompiled-header-string-Header-file-to-precompile"><span class="nav-number">6.55.</span> <span class="nav-text">precompiled_header: [string] Header file to precompile.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#GCC-precompiled-headers"><span class="nav-number">6.55.1.</span> <span class="nav-text">GCC precompiled headers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MSVC-precompiled-headers"><span class="nav-number">6.55.2.</span> <span class="nav-text">MSVC precompiled headers</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#precompiled-header-type-string-“gcc”-or-“msvc”"><span class="nav-number">6.56.</span> <span class="nav-text">precompiled_header_type: [string] “gcc” or “msvc”.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#precompiled-source-file-name-Source-file-to-precompile"><span class="nav-number">6.57.</span> <span class="nav-text">precompiled_source: [file name] Source file to precompile.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#product-type-Product-type-for-Xcode-projects"><span class="nav-number">6.58.</span> <span class="nav-text">product_type: Product type for Xcode projects.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#public-Declare-public-header-files-for-a-target"><span class="nav-number">6.59.</span> <span class="nav-text">public: Declare public header files for a target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-19"><span class="nav-number">6.59.1.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#public-configs-Configs-to-be-applied-on-dependents"><span class="nav-number">6.60.</span> <span class="nav-text">public_configs: Configs to be applied on dependents.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Propagation-of-public-configs"><span class="nav-number">6.60.1.</span> <span class="nav-text">Propagation of public configs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Avoiding-applying-public-configs-to-this-target"><span class="nav-number">6.60.2.</span> <span class="nav-text">Avoiding applying public configs to this target</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-16"><span class="nav-number">6.60.3.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#public-deps-Declare-public-dependencies"><span class="nav-number">6.61.</span> <span class="nav-text">public_deps: Declare public dependencies.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Discussion"><span class="nav-number">6.61.1.</span> <span class="nav-text">Discussion</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-54"><span class="nav-number">6.61.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rebase-Rebase-collected-metadata-as-files"><span class="nav-number">6.62.</span> <span class="nav-text">rebase: Rebase collected metadata as files.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#response-file-contents-Contents-of-a-response-file-for-actions"><span class="nav-number">6.63.</span> <span class="nav-text">response_file_contents: Contents of a response file for actions.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-55"><span class="nav-number">6.63.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#script-Script-file-for-actions"><span class="nav-number">6.64.</span> <span class="nav-text">script: Script file for actions.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sources-Source-files-for-a-target"><span class="nav-number">6.65.</span> <span class="nav-text">sources: Source files for a target</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sources-for-binary-targets"><span class="nav-number">6.65.1.</span> <span class="nav-text">Sources for binary targets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sources-for-non-binary-targets"><span class="nav-number">6.65.2.</span> <span class="nav-text">Sources for non-binary targets</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#swiftflags-Flags-passed-to-the-swift-compiler"><span class="nav-number">6.66.</span> <span class="nav-text">swiftflags: Flags passed to the swift compiler.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-17"><span class="nav-number">6.66.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#testonly-Declares-a-target-must-only-be-used-for-testing"><span class="nav-number">6.67.</span> <span class="nav-text">testonly: Declares a target must only be used for testing.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-56"><span class="nav-number">6.67.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#visibility-A-list-of-labels-that-can-depend-on-a-target"><span class="nav-number">6.68.</span> <span class="nav-text">visibility: A list of labels that can depend on a target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Patterns"><span class="nav-number">6.68.1.</span> <span class="nav-text">Patterns</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-20"><span class="nav-number">6.68.2.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#walk-keys-Key-s-for-managing-the-metadata-collection-walk"><span class="nav-number">6.69.</span> <span class="nav-text">walk_keys: Key(s) for managing the metadata collection walk.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#weak-frameworks-name-list-Name-of-frameworks-that-must-be-weak-linked"><span class="nav-number">6.70.</span> <span class="nav-text">weak_frameworks: [name list] Name of frameworks that must be weak linked.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Ordering-of-flags-and-values-18"><span class="nav-number">6.70.1.</span> <span class="nav-text">Ordering of flags and values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-57"><span class="nav-number">6.70.2.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#write-runtime-deps-Writes-the-target’s-runtime-deps-to-the-given-path"><span class="nav-number">6.71.</span> <span class="nav-text">write_runtime_deps: Writes the target’s runtime_deps to the given path.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xcasset-compiler-flags-Flags-passed-to-xcassets-compiler"><span class="nav-number">6.72.</span> <span class="nav-text">xcasset_compiler_flags: Flags passed to xcassets compiler.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xcode-extra-attributes-scope-Extra-attributes-for-Xcode-projects"><span class="nav-number">6.73.</span> <span class="nav-text">xcode_extra_attributes: [scope] Extra attributes for Xcode projects.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xcode-test-application-name-Name-for-Xcode-test-target"><span class="nav-number">6.74.</span> <span class="nav-text">xcode_test_application_name: Name for Xcode test target.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-58"><span class="nav-number">6.74.1.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-help-topics"><span class="nav-number">7.</span> <span class="nav-text">Other help topics</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Build-Arguments-Overview"><span class="nav-number">7.1.</span> <span class="nav-text">Build Arguments Overview</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#How-build-arguments-are-set"><span class="nav-number">7.1.1.</span> <span class="nav-text">How build arguments are set</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-21"><span class="nav-number">7.1.2.</span> <span class="nav-text">Examples</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#How-build-arguments-are-used"><span class="nav-number">7.1.3.</span> <span class="nav-text">How build arguments are used</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gn-file"><span class="nav-number">7.2.</span> <span class="nav-text">.gn file</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Variables-14"><span class="nav-number">7.2.1.</span> <span class="nav-text">Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Example-gn-file-contents"><span class="nav-number">7.2.2.</span> <span class="nav-text">Example .gn file contents</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Build-graph-and-execution-overview"><span class="nav-number">7.3.</span> <span class="nav-text">Build graph and execution overview</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Overall-build-flow"><span class="nav-number">7.3.1.</span> <span class="nav-text">Overall build flow</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Executing-target-definitions-and-templates"><span class="nav-number">7.3.2.</span> <span class="nav-text">Executing target definitions and templates</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Which-targets-are-built"><span class="nav-number">7.3.3.</span> <span class="nav-text">Which targets are built</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dependencies"><span class="nav-number">7.3.4.</span> <span class="nav-text">Dependencies</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Language-and-grammar-for-GN-build-files"><span class="nav-number">7.4.</span> <span class="nav-text">Language and grammar for GN build files</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Tokens"><span class="nav-number">7.4.1.</span> <span class="nav-text">Tokens</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#White-space-and-comments"><span class="nav-number">7.4.2.</span> <span class="nav-text">White space and comments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Identifiers"><span class="nav-number">7.4.3.</span> <span class="nav-text">Identifiers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Keywords"><span class="nav-number">7.4.4.</span> <span class="nav-text">Keywords</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Integer-literals"><span class="nav-number">7.4.5.</span> <span class="nav-text">Integer literals</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String-literals"><span class="nav-number">7.4.6.</span> <span class="nav-text">String literals</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Punctuation"><span class="nav-number">7.4.7.</span> <span class="nav-text">Punctuation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Grammar"><span class="nav-number">7.4.8.</span> <span class="nav-text">Grammar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Types"><span class="nav-number">7.4.9.</span> <span class="nav-text">Types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Lists"><span class="nav-number">7.4.10.</span> <span class="nav-text">Lists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Scopes"><span class="nav-number">7.4.11.</span> <span class="nav-text">Scopes</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-and-output-conversion"><span class="nav-number">7.5.</span> <span class="nav-text">Input and output conversion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File-patterns"><span class="nav-number">7.6.</span> <span class="nav-text">File patterns</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Pattern-examples"><span class="nav-number">7.6.1.</span> <span class="nav-text">Pattern examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Label-patterns"><span class="nav-number">7.7.</span> <span class="nav-text">Label patterns</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#About-labels"><span class="nav-number">7.8.</span> <span class="nav-text">About labels</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Toolchains"><span class="nav-number">7.8.1.</span> <span class="nav-text">Toolchains</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Relative-labels"><span class="nav-number">7.8.2.</span> <span class="nav-text">Relative labels</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Implicit-names"><span class="nav-number">7.8.3.</span> <span class="nav-text">Implicit names</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Metadata-Collection"><span class="nav-number">7.9.</span> <span class="nav-text">Metadata Collection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#generated-file-targets"><span class="nav-number">7.9.1.</span> <span class="nav-text">generated_file targets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Collection-and-Aggregation"><span class="nav-number">7.9.2.</span> <span class="nav-text">Collection and Aggregation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Common-Uses"><span class="nav-number">7.9.3.</span> <span class="nav-text">Common Uses</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ninja-build-rules"><span class="nav-number">7.10.</span> <span class="nav-text">Ninja build rules</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-“all”-and-“default”-rules"><span class="nav-number">7.10.1.</span> <span class="nav-text">The “all” and “default” rules</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Phony-rules"><span class="nav-number">7.10.2.</span> <span class="nav-text">Phony rules</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nogncheck-Skip-an-include-line-from-checking"><span class="nav-number">7.11.</span> <span class="nav-text">nogncheck: Skip an include line from checking.</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#More-information"><span class="nav-number">7.11.1.</span> <span class="nav-text">More information</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Runtime-dependencies"><span class="nav-number">7.12.</span> <span class="nav-text">Runtime dependencies</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Executables"><span class="nav-number">7.12.1.</span> <span class="nav-text">Executables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Actions-and-copies"><span class="nav-number">7.12.2.</span> <span class="nav-text">Actions and copies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Static-libraries-and-source-sets"><span class="nav-number">7.12.3.</span> <span class="nav-text">Static libraries and source sets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Multiple-outputs"><span class="nav-number">7.12.4.</span> <span class="nav-text">Multiple outputs</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-Source-Expansion-Works"><span class="nav-number">7.13.</span> <span class="nav-text">How Source Expansion Works</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Placeholders"><span class="nav-number">7.13.1.</span> <span class="nav-text">Placeholders</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Note-on-directories"><span class="nav-number">7.13.2.</span> <span class="nav-text">(*) Note on directories</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-22"><span class="nav-number">7.13.3.</span> <span class="nav-text">Examples</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Available-global-switches"><span class="nav-number">7.14.</span> <span class="nav-text">Available global switches</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="elesos"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">elesos</p>
  <div class="site-description" itemprop="description">视频经验，视频解答，视频教程，视频教学</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">128</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/starRTC" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;starRTC" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:895377235@qq.com" title="E-Mail &amp;rarr; mailto:895377235@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">elesos</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.5.0
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
















  

  

<script>
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>

  <script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
